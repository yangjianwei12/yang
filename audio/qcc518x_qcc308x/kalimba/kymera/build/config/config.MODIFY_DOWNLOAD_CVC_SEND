############################################################################
# CONFIDENTIAL
#
# Copyright (c) 2023 Qualcomm Technologies International, Ltd.
#
############################################################################
# Definitions for CVC capabilities

# Source directory list, used for places to look for uses of changed CPP symbols
%list ALL_SRCDIRS
capabilities/cvc_send

# List of global include paths
%list ALL_INCDIRS
components/ml_modules/common
components/ml_modules/ml_runtime
components/ml_modules/ml_engine
../lib_private/mlfe100/
../lib_private/cvc_processing



# List of libraries to build
# Support library is intrinsically only for ROM build config, that is, xxx_rom_release
%list CFG_LIBS
# Capabilities
capabilities/cvc_send/cvc_send
../lib/math/math
support_lib/ml_engine_lib/ml_engine_lib

support_lib/vol_ctrl_lib/vol_ctrl_lib


%list PREBUILT_LIBS
libbasic_op.a
libcommon.a
libcvc_modules.a
libmath.a
libmlfe100.a
libcvc_processing.a


#
# Capabilities we want to include on the chip
# The CFG_CAPABILITIES list gets turned into a set of defines of the form INSTALL_OPERATOR_XXXX
# Warning: When you want to enable another variant of cVc, also remember to go
# into the capability XML to check if the "InstallOperator" tag is defined correctly
# for your variant ID. If not, derivation engine will not generate default
# parameters correctly and create operator will fail.

%list CFG_CAPABILITIES
CVC_HEADSET_1MIC
CVC_HEADSET_2MIC_MONO
CVC_HEADSET_BINAURAL
CVC_SPEAKER_1MIC
CVC_SPEAKER_2MIC
-CVC_SPEAKER_3MIC
-CVC_SPEAKER_4MIC
-CVC_AUTO_1MIC
-CVC_AUTO_2MIC
-CVC_24K
-CVC_48K
CVC_EARBUD_2MIC_IE
CVC_EARBUD_3MIC_MONO_IE
CVC_EARBUD_3MIC_HYBRID
CVC_HEADSET_2MIC_MONO_HYBRID
CVC_HEADSET_1MIC_HYBRID

%build
-BUILD_CVC_AUTO_1MIC
-BUILD_CVC_AUTO_2MIC
BUILD_CVC_HEADSET_1MIC = true
BUILD_CVC_HEADSET_2MIC = true
BUILD_CVC_SPEAKER_1MIC = true
BUILD_CVC_SPEAKER_2MIC = true
-BUILD_CVC_SPEAKER_3MIC
-BUILD_CVC_SPEAKER_4MIC
BUILD_CVC_EARBUD_2MIC_IE = true
BUILD_CVC_EARBUD_3MIC_MONO_IE = true
BUILD_CVC_EARBUD_3MIC_HYBRID = true
BUILD_CVC_HEADSET_2MIC_MONO_HYBRID = true
BUILD_CVC_HEADSET_1MIC_HYBRID = true
RELEASE_BUILD=TRUE

# if kalsim target
#Skip math lib code (math_lib.asm, math_lib_c.c) from being compiled
BUILD_MATH_LIB=$(if $(findstring $(KALSIM_CONFIG),True),false,true)

#By defining CVC_INEAR_MAOR_ROM_HARDWARE_BUILD, 
#we force the build system to use the hardcoded gen param file -- "cvc_send_gen_asm_dl.h" --
#to build the cvc_send downloadable against the official ROM image
%cpp 
CVC_EARBUD_3MIC_MONO_IE_ENABLE
$(if $(findstring $(SQIF_CONFIG),True),,$(if $(findstring $(KALSIM_CONFIG),True),KALSIM_DOWNLOADABLE_BUILD,CVC_INEAR_MAOR_ROM_HARDWARE_BUILD))
#Skip math lib code from being compiled
SKIP_KALIMBA_MATH_LIB

