// *****************************************************************************
//  Copyright (c) 2015 Qualcomm Technologies International, Ltd.
//  All Rights Reserved.
//  Qualcomm Technologies International, Ltd. Confidential and Proprietary.
//  Notifications and licenses are retained for attribution purposes only
// %%version
// *****************************************************************************

#include "mem_utils/dynamic_mem_macros.h"
#include "audio_proc_library.h"
#include "cvc_send_data.h"
#include "cvc_send_config.h"

// default build flags for variants
#define BLD_NB
#define BLD_WB
#define BLD_UWB
#define BLD_SWB
#define BLD_FB

// build flag to turn on/off the VA feature
#if !defined(CVC_VA_DISABLE)
   #define BLD_VA
#endif

#if CVC_SEND_MAJOR_CONFIG == 0
   #define BLD_HEADSET
#elif CVC_SEND_MAJOR_CONFIG == 1
   #define BLD_SPEAKER
#elif CVC_SEND_MAJOR_CONFIG == 2
   #define BLD_AUTO
#else
   .error "Unknown Use Case"
#endif

#if CVC_DYN_NUM_MICS == 1
   #define BLD_1MIC

   #undef uses_NC
   #define uses_NC 0

   #undef uses_ASF
   #define uses_ASF 0

   #undef uses_MGDC
   #define uses_MGDC  0
#else
   #define BLD_DMSS
   #define BLD_DMS2
#endif

#if defined(CVC_USE_FDFBC)
   #if CVC_SEND_MAJOR_CONFIG == 1 && CVC_DYN_NUM_MICS == 1
      #define BLD_FDFBC
   #endif
#endif

#if defined(BLD_AUTO)
   #define BLD_AEC_HDM
#endif

#if !defined(BLD_1MIC)
   #if !defined(BLD_HEADSET)
      #define BLD_AECLRM
   #endif

   #if !defined(BLD_AECLRM)
      #define BLD_AEC2
   #endif

   #if defined(BLD_HEADSET)
      #define BLD_ASF_WNR
   #endif
#endif

#if CVC_DYN_NUM_MICS > 2
   #if defined(BLD_SPEAKER)
      #if (!defined(CVC_SPEAKER_APP_CONFIG) || (CVC_SPEAKER_APP_CONFIG == 0))
         #define MIC_GROUPING 
      #endif
   #endif

   #if !defined(MIC_GROUPING)
      #define BLD_3MIC
   #endif
#endif

#if defined(BLD_SPEAKER)
   #if !defined(CVC_SPEAKER_AEC_60)
      #define BLD_SPEAKER_120
   #endif

   #if CVC_DYN_NUM_MICS == 2 || defined(MIC_GROUPING)
      #define BLD_DMS_LINEAR
   #endif
#endif

#define uses_REF_VAD       (uses_AEC)
#define uses_SND_VAD       (uses_SND_AGC)
#define uses_IN0_OMS       (uses_MGDC || uses_AEC)

#if !uses_IN0_OMS
   #if uses_AEC
      .error "AEC cannot be enabled without uses_IN0_OMS"
   #endif
#endif

#if defined(CVC_LOW_RESOURCE_MODE)
   #if defined(BLD_HEADSET) && defined(BLD_1MIC)
      // preAEC using send NS
      #undef  uses_IN0_OMS
      #define uses_IN0_OMS    0
   #endif
#endif

#if uses_NC
   // Obsolete NC permanently
   #undef uses_NC
   #define uses_NC         0
#endif

#if !defined(BLD_HEADSET)
   #define BLD_AEC_AUX
#endif

// Compile Time options

// SP.  Placehold for Variables that will be resized by loader
#define WILL_BE_RESIZED                      1

// Constants for Variants
.CONST $CVC_BASE.FFT_BUFFER_SIZE.NB          64;
.CONST $CVC_BASE.FFT_BUFFER_SIZE.WB          128;
.CONST $CVC_BASE.FFT_BUFFER_SIZE.HD          256;

.CONST $CVC_BASE.NB.SAMPLES_PER_FRAME        60;
.CONST $CVC_BASE.NB.NUM_FREQ_BIN             65;
.CONST $CVC_BASE.NB.NUM_FFT_WINDOW           120;
.CONST $CVC_BASE.NB.OMS280.STATELENGTH       104;

.CONST $CVC_BASE.WB.SAMPLES_PER_FRAME        120;
.CONST $CVC_BASE.WB.NUM_FREQ_BIN             129;
.CONST $CVC_BASE.WB.NUM_FFT_WINDOW           240;
.CONST $CVC_BASE.WB.OMS280.STATELENGTH       124;

.CONST $CVC_BASE.SWB.SAMPLES_PER_FRAME       240;
.CONST $CVC_BASE.SWB.NUM_FREQ_BIN            257;
.CONST $CVC_BASE.SWB.NUM_FFT_WINDOW          480;
.CONST $CVC_BASE.SWB.OMS280.STATELENGTH      144;

.CONST $CVC_BASE.FB.SAMPLES_PER_FRAME        240;

#if defined(BLD_HEADSET)
   #define FFT_WIN_FACTOR                 1
   // Powr adjustment for hanning windown filter bank
   .CONST $cvc.POWER_ADJUST_NB_Q8_16      (0.906890595608518700/(1<<7));
   .CONST $cvc.POWER_ADJUST_WB_Q8_16      (0.906890595608518700/(1<<7));
   .CONST $cvc.POWER_ADJUST_SWB_Q8_16     (0.906890595608518700/(1<<7));
#else
   #define FFT_WIN_FACTOR                 2
   // Powr adjustment for non-hanning windown filter bank, narrow band
   .CONST $cvc.POWER_ADJUST_NB_Q8_16      (0.901831858058359970/(1<<7));
   // Powr adjustment for non-hanning windown filter bank, wide band
   .CONST $cvc.POWER_ADJUST_WB_Q8_16      (0.900704213416237740/(1<<7));
   // Powr adjustment for non-hanning windown filter bank, supper wide band
   .CONST $cvc.POWER_ADJUST_SWB_Q8_16     (0.904917545699831290/(1<<7));
#endif

#define MAX_NUM_PEQ_STAGES             (10)

#define CVC_MAX_SCRATCH_SIZE_DM1       $asf200.SCRATCH_SIZE_DM1
#define CVC_MAX_SCRATCH_SIZE_DM2       $asf200.SCRATCH_SIZE_DM2

// Scratch memory sharing, making sure that the actual size of the memory is enough for each module
#define oms_scratch              dm1_scratch
#define dms_scratch              dm1_scratch

#define asf100_scratch_dm1       dm1_scratch
#define asf100_scratch_dm2       dm2_scratch

#define nlp_scratch              dm2_scratch

#define vad_scratch              dm2_scratch

// FFT DM1/DM2 scrach size:
//    nb : 128/64
//    wb : 256/128
//    hd : 512/256
#define fft_real_scratch         dm1_scratch
#define fft_imag_scratch         dm2_scratch
#define fft_circ_scratch         fft_real_scratch + ($CVC_BASE.FFT_BUFFER_SIZE.WB * MK1)

#define nc_scratch_dm1           dm1_scratch   

#define fdfbc_scratch_dm1        dm1_scratch
#define fdfbc_scratch_dm2        dm2_scratch

#if CVC_DYN_NUM_MICS == 1 && CVC_SEND_MAJOR_CONFIG == 0 && CVC_HEADSET_APP_CONFIG == 0

.MODULE $M.CVC_SEND_CAP.headset_data_1mic;

#elif CVC_DYN_NUM_MICS == 1 && CVC_SEND_MAJOR_CONFIG == 0 && CVC_HEADSET_APP_CONFIG == 1

.MODULE $M.CVC_SEND_CAP.headset_data_1mic_va;
   #if defined(BLD_VA)
      #define BLD_VOICE_OFF
   #endif

#elif CVC_DYN_NUM_MICS == 2 && CVC_SEND_MAJOR_CONFIG == 0 && CVC_HEADSET_APP_CONFIG == 0

.MODULE $M.CVC_SEND_CAP.headset_data_2mic;

#elif CVC_DYN_NUM_MICS == 2 && CVC_SEND_MAJOR_CONFIG == 0 && CVC_HEADSET_APP_CONFIG == 1
.MODULE $M.CVC_SEND_CAP.headset_2mic_data_va_wakeon;
   #if defined(BLD_VA)
      #define BLD_VA_WAKEON
      #define BLD_VOICE_OFF
   #endif

#elif CVC_DYN_NUM_MICS == 2 && CVC_SEND_MAJOR_CONFIG == 0 && CVC_HEADSET_APP_CONFIG == 2
.MODULE $M.CVC_SEND_CAP.headset_2mic_data_va_bargein;
   #if defined(BLD_VA)
      #define BLD_VOICE_OFF
   #endif

#elif CVC_DYN_NUM_MICS == 2 && CVC_SEND_MAJOR_CONFIG == 0 && CVC_HEADSET_APP_CONFIG == 3
.MODULE $M.CVC_SEND_CAP.earbud_2mic;
   #define BLD_IM
   #define stream_im    stream_d1
   #define D_im         D1
   #undef  BLD_DMSS

#elif CVC_DYN_NUM_MICS == 3 && CVC_SEND_MAJOR_CONFIG == 0 && CVC_HEADSET_APP_CONFIG == 3
.MODULE $M.CVC_SEND_CAP.earbud_3mic;
   #define BLD_IM
   #define stream_im    stream_d2
   #define D_im         D2

#elif CVC_DYN_NUM_MICS == 3 && CVC_SEND_MAJOR_CONFIG == 0 && CVC_HEADSET_APP_CONFIG == 4
.MODULE $M.CVC_SEND_CAP.earbud_3mic_hybrid;
   #define BLD_IM
   #define BLD_HYBRID
   #define stream_im    stream_d2
   #define D_im         D2

#elif CVC_DYN_NUM_MICS == 2 && CVC_SEND_MAJOR_CONFIG == 0 && CVC_HEADSET_APP_CONFIG == 4
.MODULE $M.CVC_SEND_CAP.headset_data_2mic_hybrid;
   #define BLD_HYBRID

#elif CVC_DYN_NUM_MICS == 1 && CVC_SEND_MAJOR_CONFIG == 0 && CVC_HEADSET_APP_CONFIG == 4
.MODULE $M.CVC_SEND_CAP.headset_data_1mic_hybrid;
   #define BLD_HYBRID   

#elif CVC_DYN_NUM_MICS == 1 && CVC_SEND_MAJOR_CONFIG == 1

.MODULE $M.CVC_SEND_CAP.speaker_data_1mic;

#elif CVC_DYN_NUM_MICS == 2 && CVC_SEND_MAJOR_CONFIG == 1

.MODULE $M.CVC_SEND_CAP.speaker_data_2mic;

#elif CVC_DYN_NUM_MICS == 1 && CVC_SEND_MAJOR_CONFIG == 2

.MODULE $M.CVC_SEND_CAP.auto_data_1mic;

#elif CVC_DYN_NUM_MICS == 2 && CVC_SEND_MAJOR_CONFIG == 2

.MODULE $M.CVC_SEND_CAP.auto_data_2mic;

#elif CVC_DYN_NUM_MICS == 3 && CVC_SEND_MAJOR_CONFIG == 1

   #if CVC_SPEAKER_APP_CONFIG == 0 // linear mic array 

      .MODULE $M.CVC_SEND_CAP.speaker_data_3mic;

   #elif CVC_SPEAKER_APP_CONFIG == 1 // circular mic array

      .MODULE $M.CVC_SEND_CAP.speaker_circ_data_3mic;

   #elif CVC_SPEAKER_APP_CONFIG == 2 // circular mic array VA
      #if defined(BLD_VA)
         #define BLD_SPK_VA
      #endif
      .MODULE $M.CVC_SEND_CAP.speaker_circ_data_3mic_va;

   #elif CVC_SPEAKER_APP_CONFIG == 3 // circular mic array VA4B
      #if defined(BLD_VA)
         #define BLD_SPK_VA
         #define BLD_VA4B
      #endif      
      .MODULE $M.CVC_SEND_CAP.speaker_circ_data_3mic_va4b;
   #endif

#elif CVC_DYN_NUM_MICS == 4 && CVC_SEND_MAJOR_CONFIG == 1

.MODULE $M.CVC_SEND_CAP.speaker_data_4mic;

#endif

   .DATASEGMENT DM;

#if defined(BLD_HYBRID)
   #undef BLD_NB
   #undef BLD_UWB
   #undef BLD_FB

   #if defined(BLD_DMSS)
      #define BLD_WNR_MAP
      #define BLD_LOW_SNR_DETECT
      #define BLD_TMM
   #endif
   #define uses_HIGH_RES_FILTERBANK_CONFIG
   #define BLD_MLMASK
#endif

#ifdef uses_HIGH_RES_FILTERBANK_CONFIG
   #define HR_NUM_BINS_FACTOR 2
#else
   #define HR_NUM_BINS_FACTOR 1
#endif

// Define MBDRC for all variants
#define BLD_MBDRC
#ifdef BLD_MBDRC
   #define mbdrc100_2x16b_complex_in_buffer     dm1_scratch
   #define mbdrc100_gains                       dm2_scratch
   .VAR mbdrc100_in_buffer[] = 
         &D0,        // cvc_freq_buffer
         0;          // num_bins

   .VAR mbdrc100_obj[$mbdrc100_library.mbdrc100_object_t_struct.STRUC_SIZE] = 
         &mbdrc100_in_buffer,
         &mbdrc100_2x16b_complex_in_buffer,
         &mbdrc100_gains,
         &CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_SND_MBDRC_NUM_BANDS,
         HR_NUM_BINS_FACTOR,
         0 ...;
#endif       

#if defined(BLD_IM)
   #define CVC_NUM_MICS_EXT         (CVC_DYN_NUM_MICS-1)

   #if !defined(BLD_DMSS)
      #undef BLD_AEC2
      #undef BLD_DMS2

      #undef uses_NC
      #define uses_NC 0

      #undef uses_MGDC
      #define uses_MGDC  0

      #undef uses_ASF
      #define uses_ASF 0
   #else
      #define BLD_WNR_MAP
      #define BLD_LOW_SNR_DETECT
      #define BLD_TMM
   #endif

   #define BLD_FBC_IM
   #define BLD_FBC_IM_RESAMPLER
   #define FBC_IM_MAX_G_LENGTH            60

   #define BLD_SELFCLEAN
   #define BLD_BCM_ACC
   #define BLD_INT_MIC_FIT
   #define BLD_INT_MALFUNC
   #define BLD_OMS_IN0_IM
   #define BLD_AEC_IM
   #define BLD_NS_IM
   //  was BLD_AEC_MAP
   #define BLD_EQ_MAP
   
   // use AEC AUX filter for internal mic only
   #define BLD_AEC_AUX_IM
#else
   #define CVC_NUM_MICS_EXT         CVC_DYN_NUM_MICS
#endif

// only enable variant WB for the speaker VA capabilities
#if defined(BLD_SPK_VA)
   #undef BLD_NB
   #undef BLD_UWB
   #undef BLD_SWB
   #undef BLD_FB

   #if defined(BLD_AECLRM)
      #undef BLD_AECLRM
      #define BLD_AEC2
      #define BLD_AEC3
   #endif

   #define BLD_ASF200

   #if defined(BLD_DMSS)
      #undef   BLD_DMSS
   #endif

   #if uses_MGDC
      #undef   uses_MGDC
      #define  uses_MGDC      0
   #endif

   #if defined(BLD_VA4B)
      #undef   uses_AEC
      #define  uses_AEC       0
   #endif

   #define OMS_WNR_OFF
#endif

#if defined(BLD_VOICE_OFF)
   #undef BLD_NB
   #undef BLD_UWB
   #undef BLD_SWB
   #undef BLD_FB

   #if defined(BLD_1MIC)
      #define  BLD_1MIC_VA
      #if uses_IN0_OMS
         #undef   uses_IN0_OMS
         #define  uses_IN0_OMS   0
      #endif
   #endif

   #if defined(BLD_VA_WAKEON)
      #if uses_AEC         
         #undef   uses_AEC
         #define  uses_AEC       0
      #endif
   #endif

   #if uses_REF_VAD
      #undef   uses_REF_VAD
      #define  uses_REF_VAD   0
   #endif

   //Disabe Post-Processing Modules
   #if uses_SND_AGC
      #undef   uses_SND_AGC
      #define  uses_SND_AGC   0
   #endif

   #if uses_SND_PEQ
      #undef   uses_SND_PEQ
      #define  uses_SND_PEQ   0
   #endif
   
   #if uses_SND_VAD
      #undef   uses_SND_VAD
      #define  uses_SND_VAD   0
   #endif

   #define RER_CNG_OFF
   #define VSM_FDNLP_OFF
   #define RNR_OFF
   #define OMS_WNR_OFF

   #if defined(BLD_ASF_WNR)
      #undef BLD_ASF_WNR
   #endif

   #define SND_HARM_OFF
   .CONST snd_harm_obj        0;
#endif

   #define cur_mode_ptr             cap_root_ptr + $cvc_send.cap.CUR_MODE
   #define cvc_variant              cap_root_ptr + $cvc_send.cap.DATA_VARIANT
   #define cvc_streams              cap_root_ptr + $cvc_send.cap.PTR_INPUT_STREAM_REF_FIELD
   #define low_input_flag           selfclean100_dobj + $selfclean100.LOW_INPUT_FLAG

   #define mic_array             cvc_streams + $cvc_send.stream.sndin_left

   #define CONFIG_FLAGS    uses_DCBLOCK*flag_uses_DCBLOCK +  uses_SND_PEQ*flag_uses_SND_PEQ  +  uses_SND_AGC*flag_uses_SND_AGC +  uses_SND_NS*flag_uses_SND_NS +  uses_ADF*flag_uses_ADF +  uses_NC*flag_uses_NC +  uses_AEC*flag_uses_AEC +  uses_MGDC*flag_uses_MGDC +  uses_ASF*flag_uses_ASF


   // CVC data root object
#ifndef CVC_INEAR_MAOR_ROM_HARDWARE_BUILD
   .VAR root[$cvc_send.data.STRUC_SIZE] =
#else
   .VAR root[$cvc_send.data.STRUC_SIZE_HW] =
#endif
         CONFIG_FLAGS,           // $cvc_send.data.config_flag
         &cap_root_ptr,          // $cvc_send.data.cap_root_ptr
         &CurParams,             // $cvc_send.data.param
         &snd_harm_obj,          // $cvc_send.data.harm_obj
         &dms200_obj,            // $cvc_send.data.dms200_obj
         1.0,                    // $cvc_send.data.one
         0 ...;                  // $cvc_send.data.zero

   #define OneValue        root + $cvc_send.data.one
   #define ZeroValue       root + $cvc_send.data.zero
   #define mic_mode        root + $cvc_send.data.mic_mode
   #define wind_flag       root + $cvc_send.data.wind_flag
   #define echo_flag       root + $cvc_send.data.echo_flag
   #define vad_flag        root + $cvc_send.data.vad_flag
   #define TP_mode         root + $cvc_send.data.TP_mode
   #define power_adjust    root + $cvc_send.data.power_adjust
   #define selfclean_flag  root + $cvc_send.data.selfclean_flag

   #define snd_gain_voice     CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_SNDGAIN
   #define snd_gain_va        CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_SNDGAIN_VA

#if !defined(CAPABILITY_DOWNLOAD_BUILD)
   .VAR/DM2 CurParams[$M.GEN.CVC_SEND.PARAMETERS.STRUCT_SIZE+1];
#else 
   .VAR/DM2 CurParams[$M.GEN.CVC_SEND.PARAMETERS.STRUCT_SIZE.DL+1];
#endif

#if !defined(CAPABILITY_DOWNLOAD_BUILD)
   .VAR StatusArray[$M.GEN.CVC_SEND.STATUS.BLOCK_SIZE - ($M.GEN.CVC_SEND.STATUS.COMPILED_CONFIG >> LOG2_ADDR_PER_WORD)] =
#else
   .VAR StatusArray[$M.GEN.CVC_SEND.STATUS.BLOCK_SIZE.DL - ($M.GEN.CVC_SEND.STATUS.COMPILED_CONFIG >> LOG2_ADDR_PER_WORD)] =
#endif
      &root + $cvc_send.data.config_flag,
      &stream_d0 + $cvc_stream.frmbuffer_struct.PEAK_VALUE_FIELD,
      &stream_d1 + $cvc_stream.frmbuffer_struct.PEAK_VALUE_FIELD,
      &stream_z0 + $cvc_stream.frmbuffer_struct.PEAK_VALUE_FIELD,
      &ZeroValue,
      &ZeroValue,
   #if uses_SND_AGC
      &snd_agc400_dm + $agc400.OFFSET_INPUT_LEVEL_FIELD,
      &snd_agc400_dm + $agc400.OFFSET_G_REAL_FIELD,
   #else
      &ZeroValue,
      &ZeroValue,
   #endif

   #if uses_AEC
      &aec_obj + $aec530.OFFSET_AEC_COUPLING,
   #else
      &ZeroValue,
   #endif

   #if uses_ASF && !defined(BLD_ASF200)
      &asf_object + $asf100.wnr.MEAN_PWR_FIELD,
      &asf_object + $asf100.wnr.MEAN_G_FIELD,
   #else
      #if !defined(OMS_WNR_OFF)
         &oms_wnr_obj + $M.oms280.wnr.POWER_LEVEL_FIELD,
      #else
         &ZeroValue,
      #endif
      &ZeroValue,
   #endif
      &wind_flag,             //(input - status)
      &ZeroValue,          // M.CVC_SEND.STATUS.MUTE_FLAG (dummy)
   #if uses_MGDC
      &mgdc100_obj+$mgdc100.OMNI_MODE_FIELD,
   #else
      &ZeroValue,          // M.CVC_SEND.STATUS.OMNI_FLAG (dummy)
   #endif

      &stream_d2 + $cvc_stream.frmbuffer_struct.PEAK_VALUE_FIELD,
      &stream_d3 + $cvc_stream.frmbuffer_struct.PEAK_VALUE_FIELD,
      &stream_x + $cvc_stream.frmbuffer_struct.PEAK_VALUE_FIELD,

   #if defined(BLD_FBC_IM)
      &fbc_im + $fbc.L2P_PWR_DIFFERENCE_FIELD,
   #elif defined(BLD_FDFBC)
      &fdfbc0_obj + $fdfbc.POWER_DIFF,
   #else
      &ZeroValue,
   #endif

   #if uses_AEC && !defined(VSM_FDNLP_OFF)
       &vsm_fdnlp + $aec530.nlp.OFFSET_HC_TIER_STATE,
   #else 
      &ZeroValue,
   #endif
   
   #if defined(BLD_VA)
      &stream_z1 + $cvc_stream.frmbuffer_struct.PEAK_VALUE_FIELD,
   #else 
      &ZeroValue,     // RESERVED
   #endif
   
   #if defined(BLD_INT_MIC_FIT)
      &int_fit_eval100_data_obj + $int_fit_eval100.POW_DIFF,
   #else 
      &ZeroValue,
   #endif

   #if defined(BLD_AEC_IM)
      &aec_im + $aec530.OFFSET_AEC_COUPLING,
   #else
      &ZeroValue,
   #endif   

   #if defined(BLD_TMM)
      &tmm_obj + $cvc.tmm.MODE_FLAG,
   #else
      &ZeroValue,
   #endif
   
   &cvc_status_bitflag,        // CVC_STATUS_BITFLAG
   
   #if defined(BLD_LOW_SNR_DETECT)
      &dmss_snr_obj + $dmss.snr.NOISE_EST_FIELD,
   #else 
      &ZeroValue,
   #endif
   
   #if defined(BLD_INT_MALFUNC)
      &int_malfunc_data_obj + $int_malfunc.POW_DIFF,
   #else 
      &ZeroValue,
   #endif


   #if defined(BLD_EQ_MAP) || defined(BLD_INT_MALFUNC)
      &refpwr_obj + $refpwr.PEAK_FIELD;
   #else
      &ZeroValue;
   #endif

   // CVC statistics combined bitflag
   .VAR cvc_status_bitflag[] = 
      // self clean flag
      #if defined(BLD_SELFCLEAN) || defined(BLD_BCM_ACC)
         &selfclean_flag,
      #else 
         &ZeroValue,
      #endif

      // mic malfunc flag
      #if defined(BLD_INT_MALFUNC)
         &int_malfunc_data_obj + $int_malfunc.INT_MALFUNC_FLAG, 
      #else 
         &ZeroValue,
      #endif

      // loose fit flag
      #if defined(BLD_INT_MIC_FIT)
         &int_fit_eval100_data_obj + $int_fit_eval100.LOOSE_FIT_FLAG,
      #else 
         &ZeroValue,
      #endif

      // blend on flag (three mic flag)
      #if defined(BLD_TMM)
         &tmm_obj + $cvc.tmm.BLEND_ON_FLAG,
      #else
         &ZeroValue,
      #endif

      // ref power flag
      #if defined(BLD_EQ_MAP) || defined(BLD_INT_MALFUNC)
         &refpwr_obj + $refpwr.ECHO_FLAG_FIELD,
      #else
         &ZeroValue,
      #endif

      &vad_flag;

#if defined(DEBUG_MIPS)
   
   #define CVCPREPROC_IDX             0
   #define DCBLOCK_IDX                6*ADDR_PER_WORD
   #define REFVAD_IDX                 12*ADDR_PER_WORD
   #define ECHOEVENT_IDX              18*ADDR_PER_WORD
   #define FDFBC_IDX                  24*ADDR_PER_WORD
   #define TDFBC_IDX                  30*ADDR_PER_WORD
   #define INTMICVAD_IDX              36*ADDR_PER_WORD
   #define ISOSELFCLEAN_IDX           42*ADDR_PER_WORD
   #define HARM_IDX                   48*ADDR_PER_WORD
   #define AFB_IDX                    54*ADDR_PER_WORD
   #define MGDC_IDX                   60*ADDR_PER_WORD
   #define MGDCPERSIST_IDX            66*ADDR_PER_WORD
   #define OMSEXT_IDX                 72*ADDR_PER_WORD
   #define REFPOWER_IDX               78*ADDR_PER_WORD
   #define MICMALFUNC_IDX             84*ADDR_PER_WORD
   #define AECEXT_IDX                 90*ADDR_PER_WORD
   #define AECEXT_REFPROC_IDX         96*ADDR_PER_WORD
   #define AECEXT_REFPREPROC_IDX      102*ADDR_PER_WORD
   #define SELFCLEAN_PREPROC_IDX      108*ADDR_PER_WORD
   #define INPUTPWRMONITOR_IDX        114*ADDR_PER_WORD
   #define ASF100_IDX                 120*ADDR_PER_WORD
   #define LOWSNR_IDX                 126*ADDR_PER_WORD
   #define LOWSNRHYST_IDX             132*ADDR_PER_WORD
   #define NC100_IDX                  138*ADDR_PER_WORD
   #define OUTPUTPWRMONITOR_IDX       144*ADDR_PER_WORD
   #define RNR_IDX                    150*ADDR_PER_WORD
   #define DMSEXT_IDX                 156*ADDR_PER_WORD
   #define DMSEXTAPPLYGAIN_IDX        162*ADDR_PER_WORD
   #define SELFCLEAN_IDX              168*ADDR_PER_WORD
   #define NPC_IDX                    174*ADDR_PER_WORD
   #define TARGETRATIO_IDX            180*ADDR_PER_WORD
   #define NDVC_IDX                   186*ADDR_PER_WORD
   #define TARGETPROTECT_IDX          192*ADDR_PER_WORD
   #define AED_IDX                    198*ADDR_PER_WORD
   #define AECNLPEXT_IDX              204*ADDR_PER_WORD
   #define CNGEXT_IDX                 210*ADDR_PER_WORD
   #define MBDRC_IDX                  216*ADDR_PER_WORD
   #define RNRGAINAPPLY_IDX           222*ADDR_PER_WORD
   #define WINDHYST_IDX               228*ADDR_PER_WORD
   #define OMSINT_IDX                 234*ADDR_PER_WORD
   #define AECINT_IDX                 240*ADDR_PER_WORD
   #define FITEVAL_IDX                246*ADDR_PER_WORD
   #define AECNLPINT_IDX              252*ADDR_PER_WORD
   #define CNGINT_IDX                 258*ADDR_PER_WORD
   #define EQMAP_IDX                  264*ADDR_PER_WORD
   #define DMSINT_IDX                 270*ADDR_PER_WORD
   #define DMSINTAPPLYGAIN_IDX        276*ADDR_PER_WORD
   #define DMS2INT_IDX                282*ADDR_PER_WORD
   #define DMS2INTAPPLYGAIN_IDX       288*ADDR_PER_WORD
   #define BLEND_IDX                  294*ADDR_PER_WORD
   #define SFB_IDX                    300*ADDR_PER_WORD
   #define AGC_IDX                    306*ADDR_PER_WORD
   #define NUM_MODULES                (AGC_IDX >> LOG2_ADDR_PER_WORD)/6 + 1
   
   
   .VAR mips_array[6*NUM_MODULES];
#endif   


#ifdef DEBUG_MIPS
   #define MIPS_DEBUG(x) x,
#else
   #define MIPS_DEBUG(x)
#endif
 


    


//  ******************  Define Scratch/Shared Memory ************************

    // Frequency Domain Shared working buffers
   .BLOCK/SM1 FFT_DM1;
      .VAR D_l_real[WILL_BE_RESIZED];
      #if !defined(BLD_1MIC)
         .VAR D_r_real[WILL_BE_RESIZED];
      #endif
      #if defined(BLD_3MIC)
         .VAR D_mic3_real[WILL_BE_RESIZED];
      #endif
      .VAR X_real[WILL_BE_RESIZED];
      #if !defined(BLD_VOICE_OFF)
         .VAR AttenuationPersist[WILL_BE_RESIZED];
         .VAR in0oms_LpXnz[WILL_BE_RESIZED];
      #else
         .CONST   AttenuationPersist   0;
         .CONST   in0oms_LpXnz         0;
      #endif
      #if defined(BLD_FDFBC)
         .VAR DD_r_real[WILL_BE_RESIZED];
         .VAR X_fdfbc_real[WILL_BE_RESIZED];
      #endif
      #if defined(BLD_SELFCLEAN)
         .VAR D_selfclean_real[WILL_BE_RESIZED];
      #endif

   .ENDBLOCK;

   .BLOCK/SM2 FFT_DM2;
      .VAR D_l_imag[WILL_BE_RESIZED];
      #if !defined(BLD_1MIC)
         .VAR D_r_imag[WILL_BE_RESIZED];
      #endif
      #if defined(BLD_3MIC)
         .VAR D_mic3_imag[WILL_BE_RESIZED];
      #endif
      .VAR X_imag[WILL_BE_RESIZED];
      #if uses_IN0_OMS
         .VAR G_dmsZ[WILL_BE_RESIZED];
         .VAR in0oms_G[WILL_BE_RESIZED];
      #else
         // in0oms using send dms200, G_dmsZ can't use scratch memory
         #define in0oms_G        G_dmsZ
      #endif
      #if defined(BLD_FDFBC)
         .VAR DD_r_imag[WILL_BE_RESIZED];
         .VAR X_fdfbc_imag[WILL_BE_RESIZED];
      #endif
      #if defined(BLD_SELFCLEAN)
         .VAR D_selfclean_imag[WILL_BE_RESIZED];
      #endif
   .ENDBLOCK;

   .BLOCK/SM1 dm1_scratch;
      #if uses_AEC
         .VAR  W_ri[WILL_BE_RESIZED];
         .VAR  L_adaptA[WILL_BE_RESIZED];
         .VAR  L_adaptR[WILL_BE_RESIZED];
         #if (uses_ASF) || !defined(RER_CNG_OFF)
            .VAR  Dt_real[$aec530.RER_DIM];
            .VAR  Et_real[$aec530.RER_DIM];
         #endif
      #endif
      #if (uses_ASF) || defined(BLD_FDFBC) || defined(BLD_AEC_HDM)
         .VAR  scratch_extra_dm1[WILL_BE_RESIZED];
      #endif
      #if defined(BLD_MLMASK)
         .VAR swb_scratch_real[WILL_BE_RESIZED];
      #endif
   .ENDBLOCK;

   .BLOCK/SM2 dm2_scratch;
      #if uses_AEC
         .VAR  Exp_Mts_adapt[WILL_BE_RESIZED];
         #if (uses_ASF) || !defined(RER_CNG_OFF)
            .VAR  DTC_lin[WILL_BE_RESIZED];
            .VAR  Dt_imag[$aec530.RER_DIM];
            .VAR  Et_imag[$aec530.RER_DIM];
         #endif
         #if CVC_SEND_MAJOR_CONFIG != 0
            // Handsfree only
            .VAR  rerdt_dtc[WILL_BE_RESIZED];
         #else
            .CONST rerdt_dtc        0;
         #endif
      #endif
      #if (uses_ASF) || defined(BLD_FDFBC)
         .VAR  scratch_extra_dm2[WILL_BE_RESIZED];
      #endif
      #if defined(BLD_FDFBC)
         .VAR  scratch_extra_fdfbc[WILL_BE_RESIZED];
      #endif
      #if defined(BLD_MLMASK)
         .VAR swb_scratch_imag[WILL_BE_RESIZED];
      #endif
   .ENDBLOCK;

   // ***************  Common Test Mode Control Structure **************************
   .BLOCK/DM;
      .VAR X[] =  
         &X_real,    // X real
         &X_imag,    // X image
         &BExp_X;    // BExp_X

      .VAR D0[] = 
         &D_l_real,  // D0 real
         &D_l_imag,  // D0 image
         &BExp_D0;   // BExp_D0

      #if !defined(BLD_1MIC)
         .VAR D1[] = 
            &D_r_real,  // D1 real
            &D_r_imag,  // D1 image
            &BExp_D1;   // BExp_D1
         .VAR BExp_D1;
      #endif
      
      #if defined(BLD_FDFBC)
         .VAR DD_fdfbc[] = 
            &DD_r_real,  // DD_fdfbc real
            &DD_r_imag,  // DD_fdfbc imag
            &BExp_DD;    // BExp(DD_fdfbc)
         .VAR BExp_DD;
         
         .VAR X_fdfbc[] =  
            &X_fdfbc_real,    // X real_fdfbc
            &X_fdfbc_imag,    // X imag_fdfbc
            &BExp_X_fdfbc;    // BExp_X_fdfbc
         .VAR BExp_X_fdfbc;
      #endif
      
      #if defined(BLD_SELFCLEAN)
         .VAR D_selfclean[] = 
            &D_selfclean_real,  // D_selfclean_real
            &D_selfclean_imag,  // D_selfclean_imag
            &BExp_selfclean;    // BExp(D_selfclean)
         .VAR BExp_selfclean;
      #endif

      #if defined(BLD_3MIC)
         .VAR D2[] = 
            &D_mic3_real,  // D2 real
            &D_mic3_imag,  // D2 image
            &BExp_D2;   // BExp_D2
         .VAR BExp_D2;
      #endif
      
      #if defined(BLD_MLMASK)
      .VAR swb_scratch[] = 
            &swb_scratch_real,  // D_selfclean_real
            &swb_scratch_imag,  // D_selfclean_imag
            &BExp_swb_scratch;    // BExp(D_selfclean)
         .VAR BExp_swb_scratch;
      #endif


      .VAR BExp_D0;
      .VAR BExp_X;
   .ENDBLOCK;

   .BLOCK/DM;
      // FFT data object, common to all filter_bank cases
      // The three buffers in this object are temporary to FFT and could be shared
      .VAR fft_obj[$M.filter_bank.fft.STRUC_SIZE] =
         0,
         &fft_real_scratch,
         &fft_imag_scratch,
         &fft_circ_scratch,
         fft_split, // PTR_FFTSPLIT
         0 ...;
         
      #if defined(BLD_FDFBC)
      // Filter Bank Analysis Left Channel BEFORE FDFBC is applied
         .VAR fba_left_pre_fdfbc[$filter_bank.analysis.STRUC_SIZE] =
            fb_configuration,                                 // OFFSET_CONFIG_OBJECT
            &stream_dd0,                                      // OFFSET_PTR_FRAME
            &bufd_l_inp_pre_fdfbc,                            // OFFSET_PTR_HISTORY
            &fft_obj,                                         // FFT_OBJ_FIELD
            &DD_fdfbc,                                        // OFFSET_PTR_FFT_FREQ_OBJ 
            0;                                                // HPF_FIELD
      #endif    

      // Filter Bank Analysis Left Channel
      .VAR fba_left[$filter_bank.analysis.STRUC_SIZE] =
         fb_configuration,                                 // OFFSET_CONFIG_OBJECT
         &stream_d0,                                       // OFFSET_PTR_FRAME
         &bufd_l_inp,                                      // OFFSET_PTR_HISTORY
         &fft_obj,                                         // FFT_OBJ_FIELD
         &D0,                                              // OFFSET_PTR_FFT_FREQ_OBJ 
         CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_HPF_ON; // HPF_FIELD

      #if !defined(BLD_1MIC)
         // Filter Bank Analysis Right Channel
        .VAR fba_right[$filter_bank.analysis.STRUC_SIZE] =
            fb_configuration,                                 // OFFSET_CONFIG_OBJECT
            &stream_d1,                                       // OFFSET_PTR_FRAME
            &bufd_r_inp,                                      // OFFSET_PTR_HISTORY
            &fft_obj,                                         // FFT_OBJ_FIELD
            &D1,                                              // OFFSET_PTR_FFT_FREQ_OBJ 
            CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_HPF_ON; // HPF_FIELD
      #endif

      #if defined(BLD_3MIC)
         // Filter Bank Analysis 3rd Channel
        .VAR fba_mic3[$filter_bank.analysis.STRUC_SIZE] =
            fb_configuration,                                 // OFFSET_CONFIG_OBJECT
            &stream_d2,                                       // OFFSET_PTR_FRAME
            &bufd_mic3_inp,                                   // OFFSET_PTR_HISTORY
            &fft_obj,                                         // FFT_OBJ_FIELD
            &D2,                                              // OFFSET_PTR_FFT_FREQ_OBJ 
            CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_HPF_ON; // HPF_FIELD
      #endif 
   .ENDBLOCK;

   .BLOCK/DM2;
      // history buffer: filter_bank analysis
      .VAR bufd_l_inp[WILL_BE_RESIZED];
      #if !defined(BLD_1MIC)
         .VAR bufd_r_inp[WILL_BE_RESIZED];
      #endif
      #if defined(BLD_3MIC)
         .VAR bufd_mic3_inp[WILL_BE_RESIZED];
      #endif

      // history buffer: filter_bank synthesis
      #if !defined(BLD_VOICE_OFF)
         .VAR  bufd_outp[WILL_BE_RESIZED];
      #endif
      #if defined(BLD_VA)
         .VAR  bufd_outp_va1[WILL_BE_RESIZED];
      #endif
      #if defined(BLD_SPK_VA)    
         .VAR  bufd_outp_va2[WILL_BE_RESIZED];
         .VAR  bufd_outp_va3[WILL_BE_RESIZED];
         .VAR  bufd_outp_va4[WILL_BE_RESIZED];
      #endif
   .ENDBLOCK;

   .BLOCK/DM;
      // Synthesis Filter Bank Config Block

      #if uses_ASF
         #define Q_FBS_SND       0
      #else
         #define Q_FBS_SND       -1
      #endif

      #if !defined(BLD_VOICE_OFF)
         .VAR fbs_snd[$filter_bank.synthesis.STRUC_SIZE] =
            fb_configuration,                      // OFFSET_CONFIG_OBJECT
            &stream_z0,                            // OFFSET_PTR_FRAME
            &bufd_outp,                            // OFFSET_PTR_HISTORY
            &fft_obj,                              // FFT_OBJ_FIELD
            &D0,                                   // OFFSET_PTR_FFT_FREQ_OBJ
            1,                                     // ZDN_FIELD
            Q_FBS_SND;                             // SP_FIELD
      #endif

      #if defined(BLD_VA)
         .VAR fbs_snd_va1[$filter_bank.synthesis.STRUC_SIZE] =
            fb_configuration,                      // OFFSET_CONFIG_OBJECT
            &stream_z1,                            // OFFSET_PTR_FRAME
            &bufd_outp_va1,                        // OFFSET_PTR_HISTORY
            &fft_obj,                              // FFT_OBJ_FIELD
            &X,                                    // OFFSET_PTR_FFT_FREQ_OBJ
            1,                                     // ZDN_FIELD
            0;                                     // SP_FIELD
      #endif

      #if defined(BLD_SPK_VA)    
         .VAR fbs_snd_va2[$filter_bank.synthesis.STRUC_SIZE] =
            fb_configuration,                      // OFFSET_CONFIG_OBJECT
            &stream_z2,                            // OFFSET_PTR_FRAME
            &bufd_outp_va2,                        // OFFSET_PTR_HISTORY
            &fft_obj,                              // FFT_OBJ_FIELD
            &D1,                                   // OFFSET_PTR_FFT_FREQ_OBJ
            1,                                     // ZDN_FIELD
            0;                                     // SP_FIELD

         .VAR fbs_snd_va3[$filter_bank.synthesis.STRUC_SIZE] =
            fb_configuration,                      // OFFSET_CONFIG_OBJECT
            &stream_z3,                            // OFFSET_PTR_FRAME
            &bufd_outp_va3,                        // OFFSET_PTR_HISTORY
            &fft_obj,                              // FFT_OBJ_FIELD
            &D2,                                   // OFFSET_PTR_FFT_FREQ_OBJ
            1,                                     // ZDN_FIELD
            0;                                     // SP_FIELD

         .VAR fbs_snd_va4[$filter_bank.synthesis.STRUC_SIZE] =
            fb_configuration,                      // OFFSET_CONFIG_OBJECT
            &stream_z4,                            // OFFSET_PTR_FRAME
            &bufd_outp_va4,                        // OFFSET_PTR_HISTORY
            &fft_obj,                              // FFT_OBJ_FIELD
            &Z3,                                   // OFFSET_PTR_FFT_FREQ_OBJ
            1,                                     // ZDN_FIELD
            0;                                     // SP_FIELD
      #endif
   .ENDBLOCK;

#if uses_MGDC
   .BLOCK/DM;
      .VAR harm_inputs[2] =
            &fba_left,
            &fba_right;

      .VAR mgdc100_obj[$mgdc100.STRUC_SIZE] =
         &D0,                       // X0_FIELD
         &D1,                       // X1_FIELD
         CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_MGDC_MAXCOMP,  // PARAM_FIELD
         &cvc_variant,              // PTR_VARIANT_FIELD 
         &mic_mode,                 // PTR_MICMODE_FIELD (mgdc - output)
         &in0oms_G,                 // PTR_G_OMS_FIELD 
         &oms280in0_obj + $M.oms280.VOICED_FIELD, // PTR_OMS_VAD_FIELD
         0,                         // FRONTMICBIAS_FIELD
         0 ...;                     // L2FBPXD_FIELD
   .ENDBLOCK;
#endif


#if uses_NC
   .BLOCK/DM2 nc_freqObj_persistent;
         .VAR NC_TEMP0[]=
               0,       // Should be filled by modulesd by modules
               0,       // Should be filled by modulesd by modules
               0;       // Should be filled by modulesd by modules
   
         .VAR NC_TEMP1[]=
               0,       // Should be filled by modulesd by modules
               0,       // Should be filled by modulesd by modules
               0;       // Should be filled by modulesd by modules
   .ENDBLOCK;

   .VAR/DM2 nc_ctrl[WILL_BE_RESIZED];
   .VAR LRatio_interpolated[WILL_BE_RESIZED];
   .VAR nc100_dm1[$nc100.DM1_DATA_SIZE];
   .VAR nc100_dm2[$nc100.DM2_DATA_SIZE];

   .VAR nc100_obj[$nc100.STRUCT_SIZE] = 
         &D0,                       // X0_FIELD
         &D1,                       // X1_FIELD
         &CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_NC_TAP, // $nc100.PARAM_FIELD
         &LRatio_interpolated,      // $nc100.LRATIO_PTR_FIELD
         &dms200_obj + $dms200.SNR_MN_FIELD,              // $nc100.SNR_MN_FIELD 
         &nc100_dm1,                // DM1_DATA_FIELD
         &nc100_dm2,                // DM2_DATA_FIELD
         &nc_scratch_dm1,           // DM1_SCRATCH_FIELD
         &nc_ctrl,                  // NC_CTRL_FIELD (DM2)
         0,                         // G_OMS_FIELD
         NC_TEMP0,                  // $nc100.OFFSET_FNLMS_E_FREQ_OBJ 
         NC_TEMP1,                  // $nc100.OFFSET_FNLMS_D_FREQ_OBJ
         &cvc_variant,              // $nc100.PTR_VARIANT_FIELD
         0 ...;
#endif

#if uses_IN0_OMS
   // <start> of memory declared per instance of oms280
   .BLOCK/DM;
      .VAR in0oms_LpX_queue[WILL_BE_RESIZED];
      .VAR in0oms_state[WILL_BE_RESIZED];
   .ENDBLOCK;

   .VAR oms280in0_obj[$M.oms280.STRUC_SIZE] =
         &D0,                    // Y_FIELD
         &D0,                    // X_FIELD
         &cvc_variant,           // PTR_VARIANT_FIELD         
         oms_mode_object,        // PTR_MODE_FIELD
         0,                      // PARAM_FIELD
         &cvclib_table,          // $M.oms280.PBP_TABLE_FIELD           
         &in0oms_LpX_queue,      // $M.oms280.LPX_QUEUE_START_FIELD
         &in0oms_G,              // $M.oms280.PTR_G_FIELD;
         &in0oms_LpXnz,          // $M.oms280.PTR_LPXNZ_FIELD,
         &in0oms_state,          // $M.oms280.PTR_STATE_FIELD
         &oms_scratch,           // $M.oms280.PTR_SCRATCH_FIELD
         0.45,                   // $M.oms280.HARMONICITY_THRESHOLD_FIELD
         $dms200.MS_DUR,         // $M.oms280.MIN_SEARCH_TIME_FIELD
         0,                      // $M.oms280.MMSE_LSA_ON_FIELD
         0,                      // $M.oms280.PTR_TONE_FLAG_FIELD
         0 ...;
#endif

#if !defined(SND_HARM_OFF)
   .VAR harm_history[$CVC_BASE.NB.SAMPLES_PER_FRAME * 3];
   .VAR snd_harm_obj[$harm100.STRUC_SIZE] =
         &stream_d0,                   // $harm100.INP_X_FIELD
         &cvc_variant,                 // $harm100.VARIANT_FIELD
         &harm_history,                // $harm100.HISTORY_FIELD
         0 ...;
#endif

#if uses_SND_NS
   #define dms_doa0     CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_DOA0
   #define dms_param    CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_DMS_AGGR

   #if defined(BLD_SPK_VA)
      #define $dms200.pbp.QUE_LENGTH_WB.USER    $dms200.pbp.QUE_LENGTH.VA_WB
      #define $dms200.pbp.QUE_LENGTH_NB.USER    $dms200.pbp.QUE_LENGTH.VA_NB
   #else
      #define $dms200.pbp.QUE_LENGTH_WB.USER    $dms200.pbp.QUE_LENGTH_WB
      #define $dms200.pbp.QUE_LENGTH_NB.USER    $dms200.pbp.QUE_LENGTH_NB
   #endif

   .BLOCK/DM dms_data;
      #if defined(BLD_DMS_LINEAR)
         #define dms_pbp_table                  0
         .VAR sndLpX_queue[WILL_BE_RESIZED];
         .VAR dms_state[$dms200.STATE_LENGTH];
      #else
         #define dms_pbp_table                  cvclib_table
         .VAR sndLpX_queue[WILL_BE_RESIZED];
         .VAR dms_state[WILL_BE_RESIZED];
      #endif

      #if defined(BLD_DMS2)
         .VAR dms_Ath[$dms200.ATH_STATE_LENGTH];
      #endif

      #if uses_IN0_OMS == 0
         .VAR G_dmsZ[WILL_BE_RESIZED];
         #define LpX_Nz_dmsZ     in0oms_LpXnz
      #else
         .CONST LpX_Nz_dmsZ      0;
      #endif
   .ENDBLOCK;

   .VAR dms200_obj[$dms200.STRUC_SIZE] =
         &D0,                    // Y_FIELD
         &D0,                    // X_FIELD
         &cvc_variant,           // PTR_VARIANT_FIELD
         dms_mode_object,        // PTR_MODE_FIELD
         &dms_param,             // PARAM_FIELD
         dms_pbp_table,          // $M.oms280.PBP_TABLE_FIELD  
         &sndLpX_queue,          // $M.oms280.LPX_QUEUE_START_FIELD
         &G_dmsZ,                // $M.oms280.PTR_G_FIELD;
         &LpX_Nz_dmsZ,           // $M.oms280.PTR_LPXNZ_FIELD,
         &dms_state,             // $M.oms280.PTR_STATE_FIELD
         &dms_scratch,           // $M.oms280.PTR_SCRATCH_FIELD
         0.45,                   // $M.oms280.HARMONICITY_THRESHOLD_FIELD
         $dms200.MS_DUR,         // $M.oms280.MIN_SEARCH_TIME_FIELD
         1,                      // $M.oms280.MMSE_LSA_ON_FIELD
         0,                      // $M.oms280.PTR_TONE_FLAG_FIELD
         &dms_obj,               // DMS_OBJ_FIELD
         0 ...;

   .VAR dms_obj[$dms200.dms.STRUC_SIZE] =
         &mic_mode,              // PTR_MIC_MODE_FIELD
         &dms_doa0,              // PTR_DOA0_FIELD
         &power_adjust,          // PTR_POWR_ADJUST_FIELD
      #if defined(BLD_DMS2)
         &D1,                    // D1_FIELD
         &dms_Ath,               // AUTO_TH_STATE_FIELD
         #if defined(BLD_SPP)
            &spp,                // SPP_FIELD
         #endif
      #endif
         0 ...;

   #if defined(BLD_SPK_VA)
      .VAR/DM sndLpX_queue_va2[$dms200.pbp.QUE_LENGTH_WB.USER];
      .VAR/DM sndLpX_queue_va3[$dms200.pbp.QUE_LENGTH_WB.USER];
      .VAR/DM sndLpX_queue_va4[$dms200.pbp.QUE_LENGTH_WB.USER];

      .VAR dms_state_va2[$dms200.pbp.STATE_LENGTH];
      .VAR dms_state_va3[$dms200.pbp.STATE_LENGTH];
      .VAR dms_state_va4[$dms200.pbp.STATE_LENGTH];

      .VAR dms200_obj_va2[$dms200.STRUC_SIZE] =
            0,                      // Y_FIELD
            &D1,                    // X_FIELD
            &cvc_variant,           // PTR_VARIANT_FIELD
            dms_mode_object,        // PTR_MODE_FIELD
            &dms_param,             // PARAM_FIELD
            &cvclib_table,          // $M.oms280.PBP_TABLE_FIELD  
            &sndLpX_queue_va2,      // $M.oms280.LPX_QUEUE_START_FIELD
            0,                      // $M.oms280.PTR_G_FIELD;
            0,                      // $M.oms280.PTR_LPXNZ_FIELD,
            &dms_state_va2,         // $M.oms280.PTR_STATE_FIELD
            &dms_scratch,           // $M.oms280.PTR_SCRATCH_FIELD
            0.45,                   // $M.oms280.HARMONICITY_THRESHOLD_FIELD
            $dms200.MS_DUR.VA,      // $M.oms280.MIN_SEARCH_TIME_FIELD
            1,                      // $M.oms280.MMSE_LSA_ON_FIELD
            0,                      // $M.oms280.PTR_TONE_FLAG_FIELD
            &dms_obj_va2,           // DMS_OBJ_FIELD
            &D1,
            0 ...;

      .VAR dms200_obj_va3[$dms200.STRUC_SIZE] =
            0,                      // Y_FIELD
            &D2,                    // X_FIELD
            &cvc_variant,           // PTR_VARIANT_FIELD
            dms_mode_object,        // PTR_MODE_FIELD
            &dms_param,             // PARAM_FIELD
            &cvclib_table,          // $M.oms280.PBP_TABLE_FIELD  
            &sndLpX_queue_va3,      // $M.oms280.LPX_QUEUE_START_FIELD
            0,                      // $M.oms280.PTR_G_FIELD;
            0,                      // $M.oms280.PTR_LPXNZ_FIELD,
            &dms_state_va3,         // $M.oms280.PTR_STATE_FIELD
            &dms_scratch,           // $M.oms280.PTR_SCRATCH_FIELD
            0.45,                   // $M.oms280.HARMONICITY_THRESHOLD_FIELD
            $dms200.MS_DUR.VA,      // $M.oms280.MIN_SEARCH_TIME_FIELD
            1,                      // $M.oms280.MMSE_LSA_ON_FIELD
            0,                      // $M.oms280.PTR_TONE_FLAG_FIELD
            &dms_obj_va3,           // DMS_OBJ_FIELD
            &D2,
            0 ...;

      .VAR dms200_obj_va4[$dms200.STRUC_SIZE] =
            0,                      // Y_FIELD
            &Z3,                    // X_FIELD
            &cvc_variant,           // PTR_VARIANT_FIELD
            dms_mode_object,        // PTR_MODE_FIELD
            &dms_param,             // PARAM_FIELD
            &cvclib_table,          // $M.oms280.PBP_TABLE_FIELD  
            &sndLpX_queue_va4,      // $M.oms280.LPX_QUEUE_START_FIELD
            0,                      // $M.oms280.PTR_G_FIELD;
            0,                      // $M.oms280.PTR_LPXNZ_FIELD,
            &dms_state_va4,         // $M.oms280.PTR_STATE_FIELD
            &dms_scratch,           // $M.oms280.PTR_SCRATCH_FIELD
            0.45,                   // $M.oms280.HARMONICITY_THRESHOLD_FIELD
            $dms200.MS_DUR.VA,      // $M.oms280.MIN_SEARCH_TIME_FIELD
            1,                      // $M.oms280.MMSE_LSA_ON_FIELD
            0,                      // $M.oms280.PTR_TONE_FLAG_FIELD
            &dms_obj_va4,           // DMS_OBJ_FIELD
            &Z3,
            0 ...;        

      .VAR dms_obj_va2[$dms200.dms.STRUC_SIZE] =
            &mic_mode,              // PTR_MIC_MODE_FIELD
            &dms_doa0,              // PTR_DOA0_FIELD
            &power_adjust,          // PTR_POWR_ADJUST_FIELD
            0 ...;

      .VAR dms_obj_va3[$dms200.dms.STRUC_SIZE] =
            &mic_mode,              // PTR_MIC_MODE_FIELD
            &dms_doa0,              // PTR_DOA0_FIELD
            &power_adjust,          // PTR_POWR_ADJUST_FIELD
            0 ...;

      .VAR dms_obj_va4[$dms200.dms.STRUC_SIZE] =
            &mic_mode,              // PTR_MIC_MODE_FIELD
            &dms_doa0,              // PTR_DOA0_FIELD
            &power_adjust,          // PTR_POWR_ADJUST_FIELD
            0 ...;
   #endif

   #if !defined(OMS_WNR_OFF)
      .VAR oms_wnr_obj[$M.oms280.wnr.STRUC_SIZE] =
            &CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_WNR_AGGR, // PTR_WNR_PARAM_FIELD   
            &ZeroValue,    // PTR_RCVVAD_FLAG_FIELD (input)
            &vad_flag,     // PTR_SNDVAD_FLAG_FIELD (input)
            &wind_flag,    // PTR_WIND_FLAG_FIELD (output)
            0 ...;
   #endif

#endif // uses_SND_NS

#if uses_REF_VAD
   // Declare a dummy frame buffer structure, intended for linear buffer that
   // could be used with calls to '$cvc.stream.get_buffer_with_start_address'
   // between VAD PEQ and VAD processing modules.  $cvc_stream.frmbuffer_struct.FRAME_SIZE_FIELD
   // will be set by VAD PEQ.  Because the buffer is linear the length and
   // base address are zero.
   .VAR vad_peq_output[$cvc_stream.frmbuffer_struct.STRUC_SIZE.NO_PEAK]  =
      &vad_scratch,  // $cvc_stream.frmbuffer_struct.FRAME_PTR_FIELD
      0,             // $cvc_stream.frmbuffer_struct.FRAME_SIZE_FIELD
      0,             // $cvc_stream.frmbuffer_struct.BUFFER_SIZE_FIELD
      0;             // $cvc_stream.frmbuffer_struct.BUFFER_ADDR_FIELD

   // Reference VAD (with PEQ filter - NB/WB/UWB)
   .VAR/DM1 ref_vad_peq[PEQ_OBJECT_SIZE(1)] =
      &ref_delay_stream,                        // PTR_INPUT_DATA_BUFF_FIELD
      &vad_peq_output,                          // PTR_OUTPUT_DATA_BUFF_FIELD
      1,                                        // MAX_STAGES_FIELD
      vad_dc_coeffs + $M.vad410.VAD_PEQ_COEFF_OFFSET, // PARAM_PTR_FIELD
      0 ...;

   #if defined(BLD_SPK_VA)
      #define $vad410.PARAM_SIZE_FIELD          0
      .VAR vad_default_param[9] =
            // attack,    decay,        envelope,       init_frame,   ratio
            Qfmt_(0.3,7), Qfmt_(0.3,7), Qfmt_(0.005,7), Qfmt_(1.0,7), 0.75,
            // min_signal,  min_max_env,      delta_th,       count_Th
            Qfmt_(8.0, 12), Qfmt_(-60.0, 12), Qfmt_(2.0, 12), Qfmt_(0.85,7);
   #else
      // default parameters are appended at bottom of ref_vad410, 
      // and initialized by $vad410.initialize
      #define $vad410.PARAM_SIZE_FIELD          9
      .CONST vad_default_param                  0;
      #if 0
         Qfmt_(3.0,7), Qfmt_(3.0,7), Qfmt_(0.032,7), Qfmt_(0.195,7), 0.5,
         Qfmt_(8.0, 12), Qfmt_(-44.0, 12), Qfmt_(5.0, 12), Qfmt_(0.448,7);
      #endif
   #endif

   .VAR ref_vad410[$M.vad410.OBJECT_SIZE_FIELD + $vad410.PARAM_SIZE_FIELD] =
      &ref_delay_stream,   // $M.vad410.INPUT_PTR_FIELD
      &vad_default_param,  // $M.vad410.PARAM_PTR_FIELD
      &cvc_variant,        // $M.vad410.PTR_VARIANT_FIELD 
      &ref_vad_peq,        // $M.vad410.PTR_FILTER_FIELD
      0 ...;

   #define vad_rcv      ref_vad410 + $M.vad410.FLAG_FIELD
#else
   #define vad_rcv      ZeroValue
#endif

#if uses_AEC
   #define aec_param    CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_LMS_FREQ
   #define nlp_param    CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_HD_THRESH_GAIN

   #if defined(BLD_AUTO)
      #define $M.CVC.AEC_DTC_ENH_FLAG           (1)
   #else
      #define $M.CVC.AEC_DTC_ENH_FLAG           (0)
   #endif

   #if defined(BLD_HEADSET)
      #define $M.CVC.AEC_HF_FLAG                (0)
      #define $M.CVC.AEC_TAIL_LENGTH            (0.015)
      .CONST $M.CVC.AEC_Num_Primary_Taps        ($aec530.HS.Num_Primary_Taps);
      .CONST $M.CVC.AEC_Num_Auxillary_Taps      ($aec530.HS.Num_Auxillary_Taps);

      .CONST $M.CVC_UWB.AEC_Num_Primary_Taps    ($aec530.HS_UWB.Num_Primary_Taps);
      .CONST $M.CVC_UWB.AEC_Num_Auxillary_Taps  ($aec530.HS_UWB.Num_Auxillary_Taps);
   #elif defined(BLD_SPEAKER_120)
      #define $M.CVC.AEC_HF_FLAG                (2)
      #define $M.CVC.AEC_TAIL_LENGTH            (0.120)
      .CONST $M.CVC.AEC_Num_Primary_Taps        (2 * $aec530_HF.Num_Primary_Taps);
      .CONST $M.CVC.AEC_Num_Auxillary_Taps      (2 * $aec530_HF.Num_Auxillary_Taps);

      .CONST $M.CVC_UWB.AEC_Num_Primary_Taps    (2 * $aec530_HF_UWB.Num_Primary_Taps);
      .CONST $M.CVC_UWB.AEC_Num_Auxillary_Taps  (2 * $aec530_HF_UWB.Num_Auxillary_Taps);
   #else
      #define $M.CVC.AEC_HF_FLAG                (1)
      #define $M.CVC.AEC_TAIL_LENGTH            (0.060)
      .CONST $M.CVC.AEC_Num_Primary_Taps        (1 * $aec530_HF.Num_Primary_Taps);
      .CONST $M.CVC.AEC_Num_Auxillary_Taps      (1 * $aec530_HF.Num_Auxillary_Taps);

      .CONST $M.CVC_UWB.AEC_Num_Primary_Taps    (1 * $aec530_HF_UWB.Num_Primary_Taps);
      .CONST $M.CVC_UWB.AEC_Num_Auxillary_Taps  (1 * $aec530_HF_UWB.Num_Auxillary_Taps);
   #endif

   #if defined(BLD_AEC_HDM)
      #define AEC_MAX_FREQ                      8000
      #define $aec530.DIM.UWB                   86
      #define $aec530.DIM.SWB                   129
      #define $aec530.DIM.FB                    86
   #else
      #define AEC_MAX_FREQ                      0
      #define $aec530.DIM.UWB                   $CVC_BASE.WB.NUM_FREQ_BIN
      #define $aec530.DIM.SWB                   $CVC_BASE.SWB.NUM_FREQ_BIN
      #define $aec530.DIM.FB                    $CVC_BASE.SWB.NUM_FREQ_BIN
   #endif

   // AEC Reference
   #if defined(BLD_HEADSET)
      #define MAX_REF_DELAY_NB         $CVC_BASE.NB.SAMPLES_PER_FRAME * 2
      #define MAX_REF_DELAY_WB         $CVC_BASE.WB.SAMPLES_PER_FRAME * 2
      #define MAX_REF_DELAY_FB         $CVC_BASE.FB.SAMPLES_PER_FRAME * 2
   #else
      #define MAX_REF_DELAY_NB         $CVC_BASE.NB.SAMPLES_PER_FRAME * 4
      #define MAX_REF_DELAY_WB         $CVC_BASE.WB.SAMPLES_PER_FRAME * 4
      #define MAX_REF_DELAY_FB         $CVC_BASE.FB.SAMPLES_PER_FRAME * 4
   #endif
   .VAR/DM1 ref_delay_buffer[MAX_REF_DELAY_WB];
   .VAR ref_delay_stream[] = 
      &ref_delay_buffer,         // $cvc_stream.frmbuffer_struct.FRAME_PTR_FIELD
      0,                         // $cvc_stream.frmbuffer_struct.FRAME_SIZE_FIELD
      LENGTH(ref_delay_buffer),  // $cvc_stream.frmbuffer_struct.BUFFER_SIZE_FIELD
      &ref_delay_buffer;         // $cvc_stream.frmbuffer_struct.BUFFER_ADDR_FIELD

   .VAR/DM2 bufd_aec_inp[WILL_BE_RESIZED];
   .VAR/DM1 fba_ref[$filter_bank.analysis.STRUC_SIZE] =
      fb_configuration,                // OFFSET_CONFIG_OBJECT
      &ref_delay_stream,               // OFFSET_PTR_FRAME
      &bufd_aec_inp,                   // OFFSET_PTR_HISTORY
      &fft_obj,                        // FFT_OBJ_FIELD
      &X,                              // OFFSET_PTR_FFT_FREQ_OBJ
      0;

   // AEC states
   .VAR  RatFE[$aec530.RER_DIM];
   .VAR  LPwrX0[WILL_BE_RESIZED];
   .VAR  LPwrX1[WILL_BE_RESIZED];

   // data for fnmls reference bank
   .VAR/DM1 RcvBuf_real[WILL_BE_RESIZED];
   .VAR/DM2 RcvBuf_imag[WILL_BE_RESIZED];
   .VAR BExp_X_buf[WILL_BE_RESIZED];

   // data for 1st channel primary fnmls
   .VAR/DM2 Ga_real[WILL_BE_RESIZED];
   .VAR/DM1 Ga_imag[WILL_BE_RESIZED];
   .VAR BExp_Ga[WILL_BE_RESIZED];

   #if defined(BLD_AEC_AUX)
      // data for auxiliary fnmls
     .VAR/DM2 Gb_real[$aec530.RER_DIM * $M.CVC.AEC_Num_Auxillary_Taps];
     .VAR/DM1 Gb_imag[$aec530.RER_DIM * $M.CVC.AEC_Num_Auxillary_Taps];
     .VAR BExp_Gb[$aec530.RER_DIM];
     .VAR L_RatSqG[$aec530.RER_DIM];
   #endif

   // RER/CNG
   #if !defined(RER_CNG_OFF)
      #define $aec530.STRUCT_SIZE      $aec530.STRUCT_SIZE.FULL

      .VAR AEC_Dt[] =  &Dt_real,  &Dt_imag,  0;

      .BLOCK/DM rer_cng_mem;
         // RER: SqGr,L2absGr,LPwrD,Gr(real,imag)
         .VAR rer_mem[$aec530.RER_DIM * $aec530.RER_VEC];
         // CNG: Cng_Nz_Shape_Tab, LpZ_nz
         .VAR cng_mem[$CVC_BASE.WB.NUM_FREQ_BIN * 2];
      .ENDBLOCK;
   #else
      #define $aec530.STRUCT_SIZE      $aec530.STRUCT_SIZE.LMS

      .VAR AEC_Dt[] = &W_ri, &W_ri, 0;

      #if (uses_ASF==0) && !defined(BLD_FDFBC)
         #define DTC_lin         L_adaptR
      #endif

      .CONST rer_mem             0;
      .CONST cng_mem             0;
   #endif

   #if defined(BLD_FBC)
      // FBC data
      .VAR/DM2 g_a[DEFAULT_FBC_FILTER_SIZE];
      .VAR/DM2 g_b[DEFAULT_FBC_FILTER_SIZE];
      .VAR/DM1 cbuf_x_hi[DEFAULT_FBC_FRAME_SIZE + DEFAULT_FBC_FILTER_SIZE];
      .VAR/DM1 cbuf_d_hi[DEFAULT_FBC_FRAME_SIZE];
      .VAR/DM1 cbuf_x_delay[$aec530.fbc.HFP_B_SZIE];
      .VAR/DM1 cbuf_d_delay[$aec530.fbc.HFP_B_SZIE];
      .BLOCK/DM fbc_hpf_streams;
         .VAR hpf.buf_d_delay[] = 
            LENGTH(cbuf_d_delay),   // size (Linear if 0)
            &cbuf_d_delay,          // base
            &cbuf_d_delay;          // entry
         .VAR hpf.buf_d_hi[] = 
            LENGTH(cbuf_d_hi),      // size (Linear if 0)
            &cbuf_d_hi,             // base
            &cbuf_d_hi;             // entry
         .VAR hpf.buf_x_delay[] = 
            LENGTH(cbuf_x_delay),   // size (Linear if 0)
            &cbuf_x_delay,          // base
            &cbuf_x_delay;          // entry
         .VAR hpf.buf_x_hi[] = 
            LENGTH(cbuf_x_hi),      // size (Linear if 0)
            &cbuf_x_hi,             // base
            &cbuf_x_hi;             // entry
      .ENDBLOCK;
      .VAR fbc0_obj[$aec530.fbc.STRUCT_SIZE] =
            &stream_d0,                      // STREAM_D_FIELD
            &vad_rcv,                        // PTR_VADX_FIELD
            &g_a,                            // G_A_FIELD
            &g_b,                            // G_B_FIELD
            $aec530.fbc.PERD,                // PERD_FIELD
            $aec530.fbc.NIBBLE,              // NIBBLE_FIELD
            &fbc_hpf_streams,                // HPF_STREAM_FIELD
            &fbc_hpf_coeff,                  // HPF_FILTER_FIELD
            0 ...;

      #if defined(BLD_AEC2) // FBC DM
         .VAR/DM2 g_a_1[DEFAULT_FBC_FILTER_SIZE];
         .VAR/DM2 g_b_1[DEFAULT_FBC_FILTER_SIZE];
         .VAR/DM1 cbuf_x1_hi[DEFAULT_FBC_FRAME_SIZE + DEFAULT_FBC_FILTER_SIZE];
         .VAR/DM1 cbuf_d1_hi[DEFAULT_FBC_FRAME_SIZE];
         .VAR/DM1 cbuf_x1_delay[$aec530.fbc.HFP_B_SZIE];
         .VAR/DM1 cbuf_d1_delay[$aec530.fbc.HFP_B_SZIE];
         .BLOCK/DM fbc_hpf_streams_1;
            .VAR hpf.buf_d1_delay[] = 
               LENGTH(cbuf_d1_delay),   // size (Linear if 0)
               &cbuf_d1_delay,          // base
               &cbuf_d1_delay;          // entry
            .VAR hpf.buf_d1_hi[] = 
               LENGTH(cbuf_d1_hi),      // size (Linear if 0)
               &cbuf_d1_hi,             // base
               &cbuf_d1_hi;             // entry
            .VAR hpf.buf_x1_delay[] = 
               LENGTH(cbuf_x1_delay),   // size (Linear if 0)
               &cbuf_x1_delay,          // base
               &cbuf_x1_delay;          // entry
            .VAR hpf.buf_x1_hi[] = 
               LENGTH(cbuf_x1_hi),      // size (Linear if 0)
               &cbuf_x1_hi,             // base
               &cbuf_x1_hi;             // entry
         .ENDBLOCK;
         .VAR fbc1_obj[$aec530.fbc.STRUCT_SIZE] =
               &stream_d1,                      // STREAM_D_FIELD
               &vad_rcv,                        // PTR_VADX_FIELD
               &g_a_1,                          // G_A_FIELD
               &g_b_1,                          // G_B_FIELD
               $aec530.fbc.PERD,                // PERD_FIELD
               $aec530.fbc.NIBBLE,              // NIBBLE_FIELD
               &fbc_hpf_streams_1,              // HPF_STREAM_FIELD
               &fbc_hpf_coeff,                  // HPF_FILTER_FIELD
               0 ...;
      #endif
   #else
      .CONST fbc0_obj                     0;
      .CONST fbc1_obj                     0;
      .CONST fbc2_obj                     0;
   #endif

   // AEC Multi-Channel
   #if defined(BLD_AECLRM)
      .VAR aec_dm_obj[] =
            &mic_mode,                          // $aec530.dm.PTR_MIC_MODE_FIELD
            1,                                  // $aec530.dm.FLAG_AEC_LRM_FIELD
            &D1,                                // $aec530.dm.D1_FIELD
         #if defined(BLD_3MIC)
            &D2,                                // $aec530.dm.D2_FIELD
         #endif
            0 ...;                              // No more channels

   #elif defined(BLD_AEC2) // AEC DM
      // data for 2nd channel primary fnmls
      .VAR/DM2 GaMic1_real[WILL_BE_RESIZED];
      .VAR/DM1 GaMic1_imag[WILL_BE_RESIZED];
      .VAR BExp_GaMic1[WILL_BE_RESIZED];

      #if defined(BLD_AEC3)
         .VAR/DM2 GaMic2_real[WILL_BE_RESIZED];
         .VAR/DM1 GaMic2_imag[WILL_BE_RESIZED];
         .VAR BExp_GaMic2[WILL_BE_RESIZED];
      #endif

      .VAR aec_dm_obj[] =
            &mic_mode,                          // $aec530.dm.PTR_MIC_MODE_FIELD
            0,                                  // $aec530.dm.FLAG_AEC_LRM_FIELD
            // AEC primary LMS (right channel)
            &D1,                                // $aec530.dm.D1_FIELD
            &GaMic1_real,                       // $aec530.dm.GA1_REAL_FIELD
            &GaMic1_imag,                       // $aec530.dm.GA1_IMAG_FIELD
            &BExp_GaMic1,                       // $aec530.dm.GA1_BEXP_FIELD
            // AEC FBC (right channel)
            &fbc1_obj,                          // $aec530.dm.PTR_FBC1_OBJ_FIELD
         #if defined(BLD_AEC3)
            &D2,                                // $aec530.dm.D2_FIELD
            &GaMic2_real,                       // $aec530.dm.GA2_REAL_FIELD
            &GaMic2_imag,                       // $aec530.dm.GA2_IMAG_FIELD
            &BExp_GaMic2,                       // $aec530.dm.GA2_BEXP_FIELD
            // AEC FBC (third channel)
            &fbc2_obj,                          // $aec530.dm.PTR_FBC2_OBJ_FIELD
         #endif
            // end of channels
            0 ...;                              // No more channels
   #else
      .CONST aec_dm_obj    0;
   #endif

   #if defined(BLD_FDFBC)
      .VAR/DM1 g_time_fix[WILL_BE_RESIZED];
      .VAR/DM2 fdfbc_hist_buf[WILL_BE_RESIZED];
      .VAR/DM1 G_freq_fix_real[WILL_BE_RESIZED];
      .VAR/DM2 G_freq_fix_imag[WILL_BE_RESIZED];
      .VAR/DM  G_fix_Bexp[WILL_BE_RESIZED];
      .VAR/DM2 bufd_l_inp_pre_fdfbc[WILL_BE_RESIZED];
      .VAR stream_dd0[$cvc_stream.frmbuffer_struct.STRUC_SIZE] =
         0 ...;
      
      #define fbc_perc_aggressiveness_param        &CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_FDFBC_PERC
   
      .VAR fdfbc0_obj[$fdfbc.STRUCT_SIZE] =
          &stream_d0,                     // D_STREAM_PTR_FIELD
          &ref_delay_stream,              // X_STREAM_PTR_FIELD
          &DD_fdfbc,                            // DD_FIELD
          0.0075,                         // TAIL_LENGTH_FIELD
          Qfmt_(3,8),                     // COPY_COEFF_THRESHOLD_FIELD
          fbc_perc_aggressiveness_param,  // PERC_PTR_FIELD
          0,                              // ATTENUATION_ON_FIELD
          X_fdfbc,                        // X_FDFBC_FIELD
          &g_time_fix,                    // G_TIME_DOMAIN_FIX
          &G_freq_fix_real,               // G_FIX_REAL
          &G_freq_fix_imag,               // G_FIX_IMAG
          &G_fix_Bexp,                    // G_FIX_BEXP
          &fdfbc_hist_buf,                // START_HISTORY_BUF
          fdfbc_scratch_dm1,              // GFIX_ALIGN_REAL_SCRPTR
          fdfbc_scratch_dm2,              // GFIX_ALIGN_IMAG_SCRPTR
          0 ...;
          
   #else /* BLD_FDFBC  */ 
      .CONST fdfbc0_obj    0;
   #endif

   // AEC main data object
   .VAR aec_obj[$aec530.STRUCT_SIZE] =
         // AEC configuration and control
         &aec_mode_object,                   // $aec530.PTR_CONST_FIELD
         &aec_param,                         // $aec530.PARAM_FIELD
         &cvc_variant,                       // $aec530.VARIANT_FIELD 
         $M.CVC.AEC_TAIL_LENGTH,             // MAX_FILTER_LENGTH_FIELD
         $M.CVC.AEC_HF_FLAG,                 // HF_FLAG_FIELD
         $M.CVC.AEC_DTC_ENH_FLAG,            // FLAG_DTC_ENH
         &in0oms_G,                          // $aec530.OMS_G_FIELD
         &in0oms_LpXnz,                      // $aec530.OMS_LPN_FIELD
         // AEC reference
         &stream_x,                          // $aec530.X_STREAM_FIELD
         &ref_delay_stream,                  // $aec530.X_STREAM_DELAY_FIELD
         &X,                                 // $aec530.X_FIELD
         &RcvBuf_real,                       // $aec530.XBUF_REAL_FIELD
         &RcvBuf_imag,                       // $aec530.XBUF_IMAG_FIELD
         &BExp_X_buf,                        // $aec530.XBUF_BEXP_FIELD
         // AEC FBC (left channel)
         0,                                  // $aec530.PTR_FBC_OBJ_FIELD
         // AEC primary LMS (left channel)
         &D0,                                // $aec530.D_FIELD
         &Ga_real,                           // $aec530.GA_REAL_FIELD
         &Ga_imag,                           // $aec530.GA_IMAG_FIELD
         &BExp_Ga,                           // $aec530.GA_BEXP_FIELD
         // AEC (right channel)
         &aec_dm_obj,                        // $aec530.DM_OBJ_FIELD
         // Prep
         &LPwrX0,                            // $aec530.LPWRX0_FIELD
         &LPwrX1,                            // $aec530.LPWRX1_FIELD
         // DTC
         &RatFE,                             // $aec530.RATFE_FIELD
         // RER
         &rer_mem,                           // $aec530.RER_STATE_FIELD
         // CNG
         &cng_mem,                           // $aec530.CNG_STATE_FIELD
         // Scratch Arrays
         &L_adaptA,                          // $aec530.SCRPTR_LADAPTA_FIELD
         &Exp_Mts_adapt,                     // $aec530.SCRPTR_EXP_MTS_ADAPT_FIELD
         &AttenuationPersist,                // $aec530.SCRPTR_ATTENUATION_FIELD
         &W_ri,                              // $aec530.SCRPTR_W_RI_FIELD
         &L_adaptR,                          // $aec530.SCRPTR_LADAPTR_FIELD
         &DTC_lin,                           // $aec530.SCRPTR_DTC_LIN_FIELD
         &AEC_Dt,                            // $aec530.SCRPTR_T_FIELD
         // RERDT
         &rerdt_dtc,                         // $aec530.SCRPTR_RERDT_DTC_FIELD
      #if defined(BLD_AEC_AUX)
         // AEC Auxiliary LMS
         &Gb_real,                           // $aec530.GB_REAL_FIELD
         &Gb_imag,                           // $aec530.GB_IMAG_FIELD
         &BExp_Gb,                           // $aec530.GB_BEXP_FIELD
         &L_RatSqG,                          // $aec530.L_RATSQG_FIELD
      #endif
         0 ...;


   // AEC NLP data object
   #if !defined(VSM_FDNLP_OFF)
      .VAR vsm_fdnlp[$aec530.nlp.STRUCT_SIZE] =
            &aec_obj,                           // AEC_OBJ_PTR
            &nlp_param,                         // OFFSET_PARAM_PTR
            &ZeroValue,                         // OFFSET_CALLSTATE_PTR
            &vad_rcv,                           // OFFSET_PTR_RCV_DETECT (input), only used for HD/HC
            &AttenuationPersist,                // OFFSET_SCRPTR_Attenuation
         #if defined(BLD_AUTO) || defined(BLD_SPEAKER)
            &nlp_scratch,                       // OFFSET_SCRPTR
            $aec530.FdnlpProcess,               // FDNLP_FUNCPTR
            $aec530.VsmProcess,                 // VSM_FUNCPTR
         #endif
            0 ...;
   #else
      .CONST vsm_fdnlp   0;
   #endif
#endif

#if uses_DCBLOCK
   .VAR/DM1 in_l_dcblock[PEQ_OBJECT_SIZE(1)] =
      &stream_d0,                      // PTR_INPUT_DATA_BUFF_FIELD
      &stream_d0,                      // PTR_OUTPUT_DATA_BUFF_FIELD
      1,                               // MAX_STAGES_FIELD
      vad_dc_coeffs+$M.vad410.DCB_PEQ_COEFF_OFFSET,        // PARAM_PTR_FIELD
      0 ...;

   #if !defined(BLD_1MIC)
      .VAR/DM1 in_r_dcblock[PEQ_OBJECT_SIZE(1)] =
         &stream_d1,                      // PTR_INPUT_DATA_BUFF_FIELD
         &stream_d1,                      // PTR_OUTPUT_DATA_BUFF_FIELD
         1,                               // MAX_STAGES_FIELD
         vad_dc_coeffs+$M.vad410.DCB_PEQ_COEFF_OFFSET,        // PARAM_PTR_FIELD
         0 ...;
   #else
      .CONST in_r_dcblock           0;
   #endif
   
   #if defined(BLD_3MIC)
      .VAR/DM1 in_mic3_dcblock[PEQ_OBJECT_SIZE(1)] =
         &stream_d2,                      // PTR_INPUT_DATA_BUFF_FIELD
         &stream_d2,                      // PTR_OUTPUT_DATA_BUFF_FIELD
         1,                               // MAX_STAGES_FIELD
         vad_dc_coeffs+$M.vad410.DCB_PEQ_COEFF_OFFSET,        // PARAM_PTR_FIELD
         0 ...;
   #else
      .CONST in_mic3_dcblock        0;
   #endif
#endif



#if uses_SND_PEQ
   // Parameteric EQ
   .VAR/DM1 snd_peq[PEQ_OBJECT_SIZE(MAX_NUM_PEQ_STAGES)] =
      &stream_z0,                      // PTR_INPUT_DATA_BUFF_FIELD
      &stream_z0,                      // PTR_OUTPUT_DATA_BUFF_FIELD
      MAX_NUM_PEQ_STAGES,             // MAX_STAGES_FIELD
      CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_SND_PEQ_CONFIG,  // PARAM_PTR_FIELD
      0 ...;
#endif

#if uses_SND_VAD
   .VAR aed100_obj[$aed100.STRUC_SIZE] =
         &vad_flag,     // $aed100.PTR_VAD_FLAG_FIELD (output)
         &cvc_variant,  // $aed100.PTR_VARIANT_FIELD
         0 ...;
#endif

#if uses_SND_AGC
   .BLOCK/DM;
      .VAR snd_agc400_dm[$agc400.STRUCT_SIZE] =
         &CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_SND_AGC_G_INITIAL, // OFFSET_PARAM_PTR_FIELD
         &stream_z0,          //OFFSET_PTR_INPUT_FIELD
         &stream_z0,          //OFFSET_PTR_OUTPUT_FIELD
         &vad_agc_obj,        // OFFSET_PTR_VAD_VALUE_FIELD (input)
         &cvc_variant,        // PTR_VARIANT_FIELD
         0,                   //OFFSET_PTR_TONE_FLAG_FIELD
         0 ...;
      .VAR vad_agc_obj[$agc400.vad.STRUC_SIZE];
   .ENDBLOCK;
#endif


#if uses_ASF
#if !defined(BLD_ASF200)
   #if defined(BLD_AUTO)
      .CONST $cvc.DMSS_ASF_BEAM0_MODE         1;
      .CONST $cvc.DMSS_ASF_BEAM1_MODE         1;
   #else
      .CONST $cvc.DMSS_ASF_BEAM0_MODE         1;
      .CONST $cvc.DMSS_ASF_BEAM1_MODE         0;
   #endif

   .BLOCK/DM2 asf_freqObj_persistent;
      .VAR X0_SAVED_FREQ_OBJ[]=
            x0_saved_real,       // real
            x0_saved_imag,       // imag
            0;                   // exp

      .VAR X1_SAVED_FREQ_OBJ[]=
            x1_saved_real,       // real
            x1_saved_imag,       // imag
            0;                   // exp
            
      .VAR Z0_AUX_FREQ_OBJ[]=
            z0_aux_real,         // real
            z0_aux_imag,         // imag
            0;                   // exp

      .VAR Z1_AUX_FREQ_OBJ[]=
            z1_aux_real,         // real  
            z1_aux_imag,         // imag
            0;                   // exp

      .VAR ASF_TEMP0[]=
            0,       // Should be filled by modulesd by modules
            0,       // Should be filled by modulesd by modules
            0;       // Should be filled by modulesd by modules

      .VAR ASF_TEMP1[]=
            0,       // Should be filled by modulesd by modules
            0,       // Should be filled by modulesd by modules
            0;       // Should be filled by modulesd by modules

      .VAR ASF_TEMP2[]=
            0,       // Should be filled by modulesd by modules
            0,       // Should be filled by modulesd by modules
            0;       // Should be filled by modulesd by modules

      .VAR ASF_TEMP3[]=
            0,       // Should be filled by modulesd by modules
            0,       // Should be filled by modulesd by modules
            0;       // Should be filled by modulesd by modules  
   .ENDBLOCK;

   // ASF WNR
   #if defined(BLD_ASF_WNR)
      .VAR wnr_g[$asf100.NUM_PROC * 2];
   #else
      .CONST wnr_g   0;
   #endif

   // ASF/COH and DMS/SPP
   #if defined(BLD_SPP)
      .VAR spp[$dms200.DIM];
      .VAR coh_cos[$asf100.NUM_PROC];
      .VAR coh_sin[$asf100.NUM_PROC];
   #else
      .CONST spp        0;
      .CONST coh_cos    0;
      .CONST coh_sin    0;
   #endif

   .BLOCK/DM1 asf100_data_dm1;
      .VAR pX0[$asf100.NUM_PROC * 2];
      .VAR pX1[$asf100.NUM_PROC * 2];
      .VAR pXcR[$asf100.NUM_PROC * 2];
      .VAR pXcI[$asf100.NUM_PROC * 2];
      .VAR coh[$asf100.NUM_PROC * 2];
      .VAR beam0_cc_real[$asf100.NUM_PROC];
      .VAR beam1_cc_real[$asf100.NUM_PROC];
      .VAR beam0_phi_real[$asf100.NUM_PROC]; 
      .VAR beam1_phi_real[$asf100.NUM_PROC]; 
      .VAR beam0_w1_real[$asf100.NUM_PROC];
      .VAR beam_w0_aux_real[$asf100.NUM_PROC];
      .VAR beam_w1_aux_real[$asf100.NUM_PROC];
      .VAR beam1_w0_real[$asf100.NUM_PROC];
      .VAR beam1_w1_real[$asf100.NUM_PROC];
   .ENDBLOCK;

   .BLOCK/DM1 asf100_data_dm1_resize;
      .VAR x0_saved_real[WILL_BE_RESIZED];
      .VAR x1_saved_real[WILL_BE_RESIZED];
      .VAR z0_aux_real[WILL_BE_RESIZED];
      .VAR z1_aux_real[WILL_BE_RESIZED];
   .ENDBLOCK;

   .BLOCK/DM2 asf100_data_dm2;
      .VAR beam0_cc_imag[$asf100.NUM_PROC];
      .VAR beam1_cc_imag[$asf100.NUM_PROC];
      .VAR beam0_phi_imag[$asf100.NUM_PROC]; 
      .VAR beam1_phi_imag[$asf100.NUM_PROC]; 
      .VAR beam0_w1_imag[$asf100.NUM_PROC];
      .VAR beam_w0_aux_imag[$asf100.NUM_PROC];
      .VAR beam_w1_aux_imag[$asf100.NUM_PROC];
      .VAR beam1_w0_imag[$asf100.NUM_PROC];
      .VAR beam1_w1_imag[$asf100.NUM_PROC];
   .ENDBLOCK;

   .BLOCK/DM2 asf100_data_dm2_resize;
      .VAR x0_saved_imag[WILL_BE_RESIZED];
      .VAR x1_saved_imag[WILL_BE_RESIZED];
      .VAR z0_aux_imag[WILL_BE_RESIZED];
      .VAR z1_aux_imag[WILL_BE_RESIZED];
   .ENDBLOCK;

#ifndef CVC_INEAR_MAOR_ROM_HARDWARE_BUILD
   .VAR/DM asf_object[$asf100.STRUC_SIZE] =
#else
   .VAR/DM asf_object[$asf100.STRUC_SIZE_HW] =
#endif

      &D0,                          // X0_FIELD
      &D1,                          // X1_FIELD
      asf_mode_table,               // MODE_FIELD
      wnr_mode_table,
      &cvc_variant,                 // $asf100.PTR_VARIANT_FIELD
      CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_ASF_MIC_DISTANCE,               // PARAM_FIELD
      CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_DMP_MODE,                       // PTR_DMP_MODE_FIELD 
      0,                                                                        // BEAM0_SWITCHABLE_FLAG
      0,                                                                        // BYP_BEAM0_FLAG_FIELD
      &power_adjust,                // PTR_POWR_ADJUST_FIELD            
      asf100_scratch_dm1,           // SCRATCH_DM1_FIELD
      asf100_scratch_dm2,           // SCRATCH_DM2_FIELD
      &$asf100.bf.func_adaptive_2mic_mvdr_beam,  // BEAM_FUNC_FIELD
      $cvc.DMSS_ASF_BEAM0_MODE,     // BEAM0_MODE_FIELD
      $cvc.DMSS_ASF_BEAM1_MODE,     // BEAM1_MODE_FIELD
      &ASF_TEMP0,                   // X0_FREQ_OBJ
      &ASF_TEMP1,                   // X1_FREQ_OBJ
      &ASF_TEMP2,                   // SCRATCH_X0_TMP_BUF_FREQ_OBJ
      &ASF_TEMP3,                   // X1_TMP_BUF_FREQ_OBJ
      &X0_SAVED_FREQ_OBJ,           // X0_SAVED_FREQ_OBJ
      &X1_SAVED_FREQ_OBJ,           // X1_SAVED_FREQ_OBJ
      &Z0_AUX_FREQ_OBJ,             // Z0_AUX_FREQ_OBJ
      &Z1_AUX_FREQ_OBJ,             // Z1_AUX_FREQ_OBJ
      &wind_flag,                   // WIND_FLAG_PTR
      &pX0,                         // PX0N_FIELD
      &pX1,                         // PX1N_FIELD
      &pXcR,                        // PXCRN_FIELD
      &pXcI,                        // PXCIN_FIELD
      &coh,                         // COH_FIELD 
      &wnr_g,                       // WNR_G_FIELD
      &beam0_cc_real,               // BEAM0_CC_REAL_FIELD 
      &beam0_cc_imag,               // BEAM0_CC_IMAG_FIELD
      &beam1_cc_real,               // BEAM1_CC_REAL_FIELD 
      &beam1_cc_imag,               // BEAM1_CC_IMAG_FIELD
      &beam0_phi_real,              // BEAM0_PHI_REAL_FIELD 
      &beam0_phi_imag,              // BEAM0_PHI_IMAG_FIELD 
      &beam_w0_aux_real,            // BEAM_W0_AUX_REAL 
      &beam_w0_aux_imag,            // BEAM_W0_AUX_IMAG 
      &beam_w1_aux_real,            // BEAM_W1_AUX_REAL
      &beam_w1_aux_imag,            // BEAM_W1_AUX_IMAG
      &beam1_phi_real,              // BEAM1_PHI_REAL_FIELD 
      &beam1_phi_imag,              // BEAM1_PHI_IMAG_FIELD 
      &beam0_w1_real,               // BEAM0_W1_REAL 
      &beam0_w1_imag,               // BEAM0_W1_IMAG 
      &beam1_w0_real,               // BEAM1_W0_REAL
      &beam1_w0_imag,               // BEAM1_W0_IMAG
      &beam1_w1_real,               // BEAM1_W1_REAL
      &beam1_w1_imag,               // BEAM1_W1_IMAG
      &beam0_tr + $asf100.BIN_SKIPPED*ADDR_PER_WORD,    // BEAM0_TR_ASF_FIELD
      &beam1_tr + $asf100.BIN_SKIPPED*ADDR_PER_WORD,    // BEAM1_TR_ASF_FIELD
      &coh_cos,                     // COH_COS_FIELD
      &coh_sin,                     // COH_SIN_FIELD
      &spp + $asf100.BIN_SKIPPED*ADDR_PER_WORD,         // COH_G_FIELD
      0 ...;                        // rest zeros
#endif // BLD_ASF200
#endif   // uses_ASF

#if uses_ASF
#if defined(BLD_ASF200)
   #define asf200_scratch_dm1    dm1_scratch
   #define asf200_scratch_dm2    dm2_scratch
   #define asf_param             CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_ASF_BEAM0_AGGR

   .BLOCK/DM asf_RV;
      .VAR asf_RV_2mic[$asf200.RV_SIZE.2MIC];
      #if defined(BLD_3MIC)
         .VAR asf_RV_extra_3mic[$asf200.RV_SIZE.3MIC_EXTRA];
      #endif
   .ENDBLOCK;

   .VAR asf200_obj[$asf200.STRUC_SIZE] =
         &D0,                       // Z0_FIELD
         &D1,                       // Z1_FIELD
         &D2,                       // Z2_FIELD
         0,                         // Z3_FIELD
         &cvc_variant,              // VARIANT_FIELD
         &asf_param,                // PARAM_FIELD
         &asf200_scratch_dm1,       // SCRATCH_DM1_FIELD
         &asf200_scratch_dm2,       // SCRATCH_DM2_FIELD
         &asf_RV,                   // PTR_RV_FIELD 
         &bf_obj,                   // BF_OBJ_FIELD
         &asf_mode_table,           // MODE_FIELD 
         0 ...;                     // Internal

   #if 1 // FFV
      #define dms0_vad  dms200_obj     + $dms200.VAD_VOICED_FIELD
      #define dms1_vad  dms200_obj_va2 + $dms200.VAD_VOICED_FIELD
      #define dms2_vad  dms200_obj_va3 + $dms200.VAD_VOICED_FIELD
      #define dms3_vad  dms200_obj_va4 + $dms200.VAD_VOICED_FIELD
      #define Z3_real   asf200_scratch_dm1 + ($asf200.ffv.SCRATCH_Z3 * MK1)
      #define Z3_imag   asf200_scratch_dm2 + ($asf200.ffv.SCRATCH_Z3 * MK1)

      .VAR/DM1 ffv_data_real[$asf200.ffv.DATA1_SIZE.3MIC];
      .VAR/DM2 ffv_data_imag[$asf200.ffv.DATA2_SIZE.3MIC];

      .BLOCK/DM;
         .VAR BExp_Z3;
         .VAR Z3[3] = 
            &Z3_real,   // D3 real
            &Z3_imag,   // D3 image
            &BExp_Z3;   // BExp_D3

         .VAR bf_obj[$asf200.ffv.STRUC_SIZE] =
               $asf200.ffv.initialize,    // FUNC_INIT
               &Z3,                       // Z3
               &ffv_data_real,            // DATA_REAL
               &ffv_data_imag,            // DATA_IMAG
               &dms0_vad,                 // PTR_DVAD0
               &dms1_vad,                 // PTR_DVAD1
               &dms2_vad,                 // PTR_DVAD2
               &dms3_vad,                 // PTR_DVAD3
               0 ...;
      .ENDBLOCK;
   #endif
#endif // BLD_ASF200
#endif   // uses_ASF

#if defined(BLD_DMSS)
   #define dmss_param         CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_RNR_AGGR
   #define dmss_scratch_dm1   dm1_scratch
   #define dmss_scratch_dm2   dm2_scratch

   .BLOCK/SM1 dmss_sm1;
      .VAR PIZ0r[WILL_BE_RESIZED];
      .VAR PIZ1r[WILL_BE_RESIZED];
      .VAR POZ0r[WILL_BE_RESIZED];
      .VAR POZ1r[WILL_BE_RESIZED];
   .ENDBLOCK;

   .BLOCK/SM2 dmss_sm2;
      .VAR PIZ0i[WILL_BE_RESIZED];
      .VAR PIZ1i[WILL_BE_RESIZED];
      .VAR POZ0i[WILL_BE_RESIZED];
      .VAR POZ1i[WILL_BE_RESIZED];
   .ENDBLOCK;

   .BLOCK/DM;
      .VAR beam0_tr[$dmss100.NUM_PROC]; 
      .VAR beam1_tr[$dmss100.NUM_PROC]; 
      #if !defined(RNR_OFF)
         .VAR rnr_data[$dmss.rnr.swb.STATE_SIZE];
      #else
         #define rnr_data     dmss_scratch_dm1
      #endif
      #if defined(BLD_TP)
         .VAR TP_data_dm1[$dmss.tp.STATE_DM1_SIZE];
         .VAR TP_data_dm2[$dmss.tp.STATE_DM2_SIZE];
      #else
         #define TP_data_dm1  dmss_scratch_dm1
         #define TP_data_dm2  dmss_scratch_dm2
      #endif

      .VAR PIZ0[] = &PIZ0r, &PIZ0i, 0;
      .VAR PIZ1[] = &PIZ1r, &PIZ1i, 0;
      .VAR POZ0[] = &POZ0r, &POZ0i, 0;
      .VAR POZ1[] = &POZ1r, &POZ1i, 0;

      .VAR dmss_obj[$dmss.STRUC_SIZE] =
         &D0,                    // $dmss.X0_FIELD
         &D1,                    // $dmss.X1_FIELD
         &PIZ0,                  // $dmss.PIZ0_FIELD
         &PIZ1,                  // $dmss.PIZ1_FIELD
         &POZ0,                  // $dmss.POZ0_FIELD
         &POZ1,                  // $dmss.POZ1_FIELD
         &dmss_scratch_dm1,      // $dmss.SCRATCH_DM1_FIELD
         &dmss_scratch_dm2,      // $dmss.SCRATCH_DM2_FIELD
         &dmss_param,            // $dmss.PARAM_FIELD
         &cvclib_table,          // $dmss.TABLE_FIELD
         &AttenuationPersist,    // $dmss.TOTAL_ATT_FIELD
         &rnr_data,              // $dmss.RNR_STATE_FIELD
         &TP_mode,               // $dmss.TP_MODE_PTR_FIELD
         &TP_data_dm1,           // $dmss.TP_STATE_DM1_FIELD
         &TP_data_dm2,           // $dmss.TP_STATE_DM2_FIELD
         &dms200_obj + $M.oms280.PTR_G_FIELD,       // $dmss.DMS_PTR_GG_FIELD
         &oms280in0_obj + $M.oms280.PTR_G_FIELD,    // $dmss.OMS_PTR_G_FIELD
         &beam0_tr,              // $dmss.BEAM0_TR_FIELD
         &beam1_tr,              // $dmss.BEAM1_TR_FIELD
         &cvc_variant,           // $dmss.PTR_VARIANT_FIELD
         0 ...;
   .ENDBLOCK;
#endif


#if defined(BLD_MLMASK)
   #ifdef uses_HIGH_RES_FILTERBANK_CONFIG
      // High Resolution FFT
      #define fb_config_ml                   fb_config_hr
   #else
      // Normal Resolution FFT
      #define fb_config_ml                   fb_configuration
   #endif
   #define $CVC_BASE.WB.NUM_FFT_WINDOW.HR    480
   #define $CVC_BASE.SWB.NUM_FFT_WINDOW.HR   960
   #define D_ml                              D0

   .BLOCK/DM2;
      .VAR stream_z_ml[$cvc_stream.frmbuffer_struct.STRUC_SIZE];
      .VAR bufd_ml_inp[FFT_WIN_FACTOR * $CVC_BASE.WB.NUM_FFT_WINDOW.HR];
      .VAR bufd_ml_outp[FFT_WIN_FACTOR * $CVC_BASE.WB.NUM_FFT_WINDOW.HR + $CVC_BASE.WB.SAMPLES_PER_FRAME];
   .ENDBLOCK;

   .BLOCK/DM;
         .VAR fft_obj_hr[$M.filter_bank.fft.STRUC_SIZE] =
            0,
            &FFT_DM1,            // REAL_ADDR_FIELD
            &dm2_scratch,        // IMAG_ADDR_FIELD
            &dm1_scratch,        // CBUF_ADDR_FIELD
            fft_split,           // PTR_FFTSPLIT
            0,
            0,
            $filter_bank.QBIT_Z, // Q_DAT_IN
            0;

         .VAR fba_ml[$filter_bank.analysis.STRUC_SIZE] =
            fb_config_ml,        // OFFSET_CONFIG_OBJECT
            &stream_z0,          // OFFSET_PTR_FRAME
            &bufd_ml_inp,        // OFFSET_PTR_HISTORY
            &fft_obj_hr,         // FFT_OBJ_FIELD
            &D_ml,               // OFFSET_PTR_FFT_FREQ_OBJ 
            0;                   // HPF_FIELD

         .VAR fbs_ml[$filter_bank.synthesis.STRUC_SIZE] =
            fb_config_ml,        // OFFSET_CONFIG_OBJECT
            &stream_z_ml,        // OFFSET_PTR_FRAME, initialized by filter_bank syntheis init
            &bufd_ml_outp,       // OFFSET_PTR_HISTORY
            &fft_obj_hr,         // FFT_OBJ_FIELD
            &D_ml,               // OFFSET_PTR_FFT_FREQ_OBJ
            1,                   // ZDN_FIELD
            -1;                  // SP_FIELD
   .ENDBLOCK;

   .BLOCK/SM1 mlfe_sm1;
      .VAR tensor_scratch[WILL_BE_RESIZED];
      .VAR mulaw_scratch[WILL_BE_RESIZED];
   .ENDBLOCK;

   #define   mlfe_param   &CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_ML_GAIN
   .VAR mlmask_obj[$mlfe100_library_c.MLFE100_STRUC_struct.STRUC_SIZE] =
         0,                               // $mlfe100_library_c.MLFE100_STRUC_struct.ML_ENGINE_CONTAINER_FIELD
         mlfe_param,                      // $mlfe100_library_c.MLFE100_STRUC_struct.PARAM_PTR_FIELD
         1,                               // $mlfe100_library_c.MLFE100_STRUC_struct.INPUT_CNT_FIELD
         &D_ml,                           // $mlfe100_library_c.MLFE100_STRUC_struct.INPUT_ADDR_FIELD
         1,                               // $mlfe100_library_c.MLFE100_STRUC_struct.OUTPUT_CNT_FIELD
         &D_ml,                           // $mlfe100_library_c.MLFE100_STRUC_struct.OUTPUT_ADDR_FIELD
         &model_5_pre_proc_data,          // $mlfe100_library_c.MLFE100_STRUC_struct.PRE_PROC_DATA_FIELD
         &model_5_post_proc_data,         // $mlfe100_library_c.MLFE100_STRUC_struct.POST_PROC_DATA_FIELD
         &model_5_model_data,             // $mlfe100_library_c.MLFE100_STRUC_struct.MODEL_DATA_FIELD
         0 ...;
#endif

#if defined(BLD_MLMASK)
      .VAR freq_delay_buffer_ext[WILL_BE_RESIZED];
      .VAR chdelay_obj_ext[$chdelay100.STRUC_SIZE] =
            0,                                              // $chdelay100.INPUT_DATA_PTR                             
            &freq_delay_buffer_ext,                         // $chdelay100.DELAYBUF_START_PTR
            4,                                              // $chdelay100.DELAY_IN_FRAMES
            0 ...;

      .VAR freq_delay_buffer_swb[WILL_BE_RESIZED];
      .VAR chdelay_obj_swb[$chdelay100.STRUC_SIZE] =
            0,                                              // $chdelay100.INPUT_DATA_PTR                             
            &freq_delay_buffer_swb,                         // $chdelay100.DELAYBUF_START_PTR
            4,                                              // $chdelay100.DELAY_IN_FRAMES
            0 ...;
   
      .VAR model_5_pre_proc_data[$cvc_noise_sup_prepost.model_5_pre_proc_data_struct.STRUC_SIZE] = 
            &chdelay_obj_swb,                               // $model_5_pre_proc_struct.SWB_DELAY_STRUCT_FIELD
            &swb_scratch,                                   // $model_5_pre_proc_struct.SWB_SCRATCH_FIELD
            &chdelay_obj_ext,                               // $model_5_pre_proc_struct.DELAY_STRUCT_FIELD
            &tensor_scratch,                                // $model_5_pre_proc_struct.SCRATCH_TENSOR_FIELD
            &mulaw_compand100_data,                         // $model_5_pre_proc_struct.MULAW_COMPAND_DATA
            0 ...;         
       
       .VAR model_5_post_proc_data[$cvc_noise_sup_prepost.model_5_post_proc_data_t_struct.STRUC_SIZE] = 
            &mulaw_expand100_data,                          // $model_5_post_proc_struct.MULAW_EXPAND_DATA
            0 ...;
       
       .VAR model_5_model_data[$cvc_noise_sup_prepost.model_5_data_t_struct.STRUC_SIZE] = 
            0 ...;

// **** TBD *** Eliminate and replace with function arguments
       .VAR mulaw_compand100_data[$mulaw_compand100.STRUC_SIZE] = 
            0,                                              // $mulaw_compand100.INPUT_PTR_FIELD         
            0,                                              // $mulaw_compand100.OUTPUT_PTR_FIELD         
            &mulaw_scratch,                                 // $mulaw_compand100.MULAW_SCRPTR_FIELD
            0 ...;
       
// **** TBD *** Eliminate and replace with function arguments
       .VAR mulaw_expand100_data[$mulaw_expand100.STRUC_SIZE] = 
            0,                                              // $mulaw_expand100.INPUT_PTR_FIELD         
            0,                                              // $mulaw_expand100.OUTPUT_PTR_FIELD         
            &mulaw_scratch,                                 // $mulaw_expand100.MULAW_SCRPTR_FIELD
            0 ...;
       
       

#endif     

#if defined(BLD_FBC_IM)
   #if defined(BLD_FBC_IM_RESAMPLER)
      .VAR/DM1 ref_delay_buffer_downsampled[MAX_REF_DELAY_WB];
      .VAR stream_ref_wb[] = 
         &ref_delay_buffer_downsampled,         // $cvc_stream.frmbuffer_struct.FRAME_PTR_FIELD
         $CVC_BASE.WB.SAMPLES_PER_FRAME,        // $cvc_stream.frmbuffer_struct.FRAME_SIZE_FIELD
         LENGTH(ref_delay_buffer_downsampled),  // $cvc_stream.frmbuffer_struct.BUFFER_SIZE_FIELD
         &ref_delay_buffer_downsampled;         // $cvc_stream.frmbuffer_struct.BUFFER_ADDR_FIELD

      #define stream_im_wb                vad_peq_output
      #define fbc_im_scratch_dm1          dm1_scratch
      .CONST  fbc_im_scratch_dm2          0;
   #else
      #define fbc_im_scratch_dm1          dm1_scratch
      #define fbc_im_scratch_dm2          dm2_scratch
   #endif

   .VAR/DM2 fbc_im_g[FBC_IM_MAX_G_LENGTH * 2];
   .VAR fbc_im[$fbc.STRUCT_SIZE] =
         &stream_im,                      // STREAM_D_FIELD
         &ref_delay_stream,               // STREAM_X_FIELD
         &fbc_im_g,                       // G_A_FIELD
         &fbc_im_scratch_dm1,             // SCRATCH_FIELD
         16000,                           // SAMPLING_RATE_FIELD
         1,                               // PERD_FIELD
         0,                               // TAIL_LENGTH_FIELD
         0.5,                             // GAMMA_FIELD
         1,                               // VADX_FIELD
         0 ...;
#endif

#if defined(BLD_OMS_IN0_IM)
   #define in0oms_G_im        D_selfclean_imag
   #define in0oms_LpXnz_im    in0oms_LpXnz

   .BLOCK/DM;
      .VAR in0oms_LpX_queue_im[$M.oms280.QUE_LENGTH];
      .VAR in0oms_state_im[$CVC_BASE.WB.OMS280.STATELENGTH];
   .ENDBLOCK;

   .VAR oms280in0_im[$M.oms280.STRUC_SIZE] =
         &D_im,                  // Y_FIELD
         &D_im,                  // X_FIELD
         &cvc_variant,           // PTR_VARIANT_FIELD         
         oms_mode_object,        // PTR_MODE_FIELD
         0,                      // PARAM_FIELD
         &cvclib_table,          // $M.oms280.PBP_TABLE_FIELD           
         &in0oms_LpX_queue_im,   // $M.oms280.LPX_QUEUE_START_FIELD
         &in0oms_G_im,           // $M.oms280.PTR_G_FIELD;
         &in0oms_LpXnz_im,       // $M.oms280.PTR_LPXNZ_FIELD,
         &in0oms_state_im,       // $M.oms280.PTR_STATE_FIELD
         &oms_scratch,           // $M.oms280.PTR_SCRATCH_FIELD
         0.45,                   // $M.oms280.HARMONICITY_THRESHOLD_FIELD
         $dms200.MS_DUR,         // $M.oms280.MIN_SEARCH_TIME_FIELD
         0,                      // $M.oms280.MMSE_LSA_ON_FIELD
         0,                      // $M.oms280.PTR_TONE_FLAG_FIELD
         0 ...;
#endif

#if defined(BLD_AEC_IM)
   #define aec_param_im             CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_INT_LMS_FREQ
   #define X_im                     X
   #define AttenuationPersist_im    AttenuationPersist

   #if (1)
      // HD mode
      #define AEC_MAX_FREQ_INT      4000
      #define $aec530.DIM.INT       $CVC_BASE.NB.NUM_FREQ_BIN
   #else
      // Full mode
      #define AEC_MAX_FREQ_INT      0
      #define $aec530.DIM.INT       $CVC_BASE.WB.NUM_FREQ_BIN
   #endif

   .BLOCK/DM aec_data_im;
      .VAR RatFE_im[$aec530.RER_DIM];
      .VAR BExp_Ga_im[$aec530.DIM.INT];
      .VAR rer_mem_im[$aec530.RER_DIM * $aec530.RER_VEC];
      .VAR cng_mem_im[$aec530.DIM.INT];
   .ENDBLOCK;

   .VAR/DM2 Ga_real_im[$aec530.DIM.INT * $M.CVC.AEC_Num_Primary_Taps];
   .VAR/DM1 Ga_imag_im[$aec530.DIM.INT * $M.CVC.AEC_Num_Primary_Taps];

   #if defined(BLD_AEC_AUX_IM)
      // data for auxiliary fnmls
     .VAR/DM2 Gb_real_im[$aec530.RER_DIM * $M.CVC.AEC_Num_Auxillary_Taps];
     .VAR/DM1 Gb_imag_im[$aec530.RER_DIM * $M.CVC.AEC_Num_Auxillary_Taps];
     .VAR BExp_Gb_im[$aec530.RER_DIM];
     .VAR L_RatSqG_im[$aec530.RER_DIM];
   #endif

   // AEC main data object
   .VAR aec_im[$aec530.STRUCT_SIZE.FULL] =
         // AEC configuration and control
         &aec_mode_object,                   // $aec530.PTR_CONST_FIELD
         &aec_param_im,                      // $aec530.PARAM_FIELD
         &cvc_variant,                       // $aec530.VARIANT_FIELD 
         $M.CVC.AEC_TAIL_LENGTH,             // MAX_FILTER_LENGTH_FIELD
         $M.CVC.AEC_HF_FLAG,                 // HF_FLAG_FIELD
         $M.CVC.AEC_DTC_ENH_FLAG,            // FLAG_DTC_ENH
         &in0oms_G_im,                       // $aec530.OMS_G_FIELD
         &in0oms_LpXnz_im,                   // $aec530.OMS_LPN_FIELD
         // AEC reference
         &aec_obj,                           // $aec530.MAIN_OBJ_FIELD
         0,                                  // $aec530.X_STREAM_DELAY_FIELD
         &X_im,                              // $aec530.X_FIELD
         &RcvBuf_real,                       // $aec530.XBUF_REAL_FIELD
         &RcvBuf_imag,                       // $aec530.XBUF_IMAG_FIELD
         &BExp_X_buf,                        // $aec530.XBUF_BEXP_FIELD
         // AEC FBC (left channel)
         0,                                  // $aec530.PTR_FBC_OBJ_FIELD
         // AEC primary LMS (left channel)
         &D_im,                              // $aec530.D_FIELD
         &Ga_real_im,                        // $aec530.GA_REAL_FIELD
         &Ga_imag_im,                        // $aec530.GA_IMAG_FIELD
         &BExp_Ga_im,                        // $aec530.GA_BEXP_FIELD
         // AEC (right channel)
         0,                                  // $aec530.DM_OBJ_FIELD
         // Prep
         &LPwrX0,                            // $aec530.LPWRX0_FIELD
         &LPwrX1,                            // $aec530.LPWRX1_FIELD
         // DTC
         &RatFE_im,                          // $aec530.RATFE_FIELD
         // RER
         &rer_mem_im,                        // $aec530.RER_STATE_FIELD
         // CNG
         0,                                  // $aec530.CNG_STATE_FIELD
         // Scratch Arrays
         &L_adaptA,                          // $aec530.SCRPTR_LADAPTA_FIELD
         &Exp_Mts_adapt,                     // $aec530.SCRPTR_EXP_MTS_ADAPT_FIELD
         &AttenuationPersist_im,             // $aec530.SCRPTR_ATTENUATION_FIELD
         &W_ri,                              // $aec530.SCRPTR_W_RI_FIELD
         &L_adaptR,                          // $aec530.SCRPTR_LADAPTR_FIELD
         &DTC_lin,                           // $aec530.SCRPTR_DTC_LIN_FIELD
         &AEC_Dt,                            // $aec530.SCRPTR_T_FIELD
         // RERDT
         &rerdt_dtc,                         // $aec530.SCRPTR_RERDT_DTC_FIELD
      #if defined(BLD_AEC_AUX_IM)
         // AEC Auxiliary LMS
         &Gb_real_im,                        // $aec530.GB_REAL_FIELD
         &Gb_imag_im,                        // $aec530.GB_IMAG_FIELD
         &BExp_Gb_im,                        // $aec530.GB_BEXP_FIELD
         &L_RatSqG_im,                       // $aec530.L_RATSQG_FIELD
      #endif
         0 ...;

   // AEC NLP data object
   .VAR vsm_fdnlp_im[$aec530.nlp.STRUCT_SIZE] =
         &aec_im,                            // AEC_OBJ_PTR
         &nlp_param,                         // OFFSET_PARAM_PTR
         &ZeroValue,                         // OFFSET_CALLSTATE_PTR
         &vad_rcv,                           // OFFSET_PTR_RCV_DETECT (input), only used for HD/HC
         &AttenuationPersist_im,             // OFFSET_SCRPTR_Attenuation
         0 ...;
#endif


#if defined(BLD_NS_IM)
   #define param_dms_im       CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_INT_DMS_AGGR

   .BLOCK/DM dms_data_im;
      .VAR sndLpX_queue_im[$dms200.pbp.QUE_LENGTH_WB];
      .VAR dms_state_im[$dms200.pbp.STATE_LENGTH];
   .ENDBLOCK;

   .VAR dms200_im[$dms200.STRUC_SIZE] =
         &D_im,                  // Y_FIELD
         &D_im,                  // X_FIELD
         &cvc_variant,           // PTR_VARIANT_FIELD
         dms_mode_object,        // PTR_MODE_FIELD
         &param_dms_im,          // PARAM_FIELD
         &cvclib_table,          // $M.oms280.PBP_TABLE_FIELD  
         &sndLpX_queue_im,       // $M.oms280.LPX_QUEUE_START_FIELD
         0,                      // $M.oms280.PTR_G_FIELD;
         0,                      // $M.oms280.PTR_LPXNZ_FIELD,
         &dms_state_im,          // $M.oms280.PTR_STATE_FIELD
         &dms_scratch,           // $M.oms280.PTR_SCRATCH_FIELD
         0.45,                   // $M.oms280.HARMONICITY_THRESHOLD_FIELD
         $dms200.MS_DUR,         // $M.oms280.MIN_SEARCH_TIME_FIELD
         1,                      // $M.oms280.MMSE_LSA_ON_FIELD
         0,                      // $M.oms280.PTR_TONE_FLAG_FIELD
         &dms_im,                // DMS_OBJ_FIELD
         0 ...;

   .VAR dms_im[$dms200.dms.STRUC_SIZE] =
         &OneValue,              // PTR_MIC_MODE_FIELD
         &dms_doa0,              // PTR_DOA0_FIELD
         &power_adjust,          // PTR_POWR_ADJUST_FIELD
         0 ...;
#endif

#if defined(BLD_LOW_SNR_DETECT)
   #define param_snr       CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_NOISE_HYST_CLEAR_THRES

   .VAR dmss_snr_obj[$dmss.snr.STRUC_SIZE] =
         &D1,                 // Z1_FIELD
         &param_snr,          // PARAM_FIELD
         &cvc_variant,        // PTR_VARIANT_FIELD
         FFT_WIN_FACTOR * 2,  // NPROTO_FRAME_FIELD
         0 ...;
#else
   .CONST dmss_snr_obj        0;
#endif

#if defined(BLD_SELFCLEAN)
#ifndef CVC_INEAR_MAOR_ROM_HARDWARE_BUILD
   .VAR selfclean100_dobj[$selfclean100.STRUC_SIZE] =
#else
   .VAR selfclean100_dobj[$selfclean100.STRUC_SIZE_HW] =
#endif
      &D0,                                                                     // $selfclean100.Z0_PROC_FIELD
      &D_selfclean,                                                            // $selfclean100.Z0_UNPROC_FIELD
      CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_SELF_CLEAN_TC_HW,          // $selfclean100.PARAM_PTR_FIELD
      &cvc_variant,                                                            // $selfclean100.PTR_VARIANT_FIELD
      0 ...;
#endif

#if defined(BLD_BCM_ACC)
   
   .VAR intmicvad_peq_output[$cvc_stream.frmbuffer_struct.STRUC_SIZE.NO_PEAK]  =
      &vad_scratch,  // $cvc_stream.frmbuffer_struct.FRAME_PTR_FIELD
      0,             // $cvc_stream.frmbuffer_struct.FRAME_SIZE_FIELD
      0,             // $cvc_stream.frmbuffer_struct.BUFFER_SIZE_FIELD
      0;             // $cvc_stream.frmbuffer_struct.BUFFER_ADDR_FIELD

   .VAR/DM1 intmic_vad_peq[PEQ_OBJECT_SIZE(1)] =
      &stream_im,                                     // PTR_INPUT_DATA_BUFF_FIELD
      &intmicvad_peq_output,                          // PTR_OUTPUT_DATA_BUFF_FIELD
      1,                                              // MAX_STAGES_FIELD
      vad_dc_coeffs + $M.vad410.VAD_PEQ_COEFF_OFFSET, // PARAM_PTR_FIELD
      0 ...;
   
   .VAR intmic_vad410[$M.vad410.OBJECT_SIZE_FIELD] =
      &stream_d2,                                                         // $M.vad410.INPUT_PTR_FIELD
      &CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_SND_VAD_ATTACK_TC,   // $M.vad410.PARAM_PTR_FIELD
      &cvc_variant,                                                       // $M.vad410.PTR_VARIANT_FIELD 
      &intmic_vad_peq,                                                    // $M.vad410.PTR_FILTER_FIELD
      0 ...;
      
   #define intmic_vad410_flag      intmic_vad410 + $M.vad410.FLAG_FIELD
   
   .VAR isoselfclean100_dobj[$isoselfclean100.STRUC_SIZE] =
      CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_ISOSELFCLEAN_LOWNOISE_THRESH,   // $isoselfclean100.PARAM_PTR_FIELD
      &intmic_vad410_flag,                                                          // $isoselfclean100.INTVAD_PTR_FIELD
   #if defined(BLD_LOW_SNR_DETECT)
      &dmss_snr_obj + $dmss.snr.NOISE_EST_FIELD,                                    // $isoselfclean100.NOISE_POWER_LOG2_PTR
   #endif
      0 ...;
      
#endif


#if defined(BLD_INT_MIC_FIT)
   .VAR int_fit_eval100_data_obj[$int_fit_eval100.STRUC_SIZE] =
     &D_im,                                                                    // $int_fit_eval100.D_INT_MIC
     CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_INT_MIC_FIT_POW_DIFF_TH,    // $int_fit_eval100.PARAM_PTR_FIELD
     &cvc_variant,                                                             // $int_fit_eval100.PTR_VARIANT_FIELD
     0 ...;
#endif

#if defined(BLD_EQ_MAP)
   #define eq_map_scratch_1   dm1_scratch
   #define eq_map_scratch_2   dm2_scratch
   #define eq_param_map       CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_EQ_INIT_TAU
   #define blend_dim          blend100_data_obj + $blend100.DIM_FIELD

   .VAR EQ_map_ratio[WILL_BE_RESIZED];

   .VAR eq_map_obj[$eq100.STRUC_SIZE] =
      &D_im,                     // $eq100.INTMIC_PTR_FIELD
      &D0,                       // $eq100.EXTMIC_PTR_FIELD
      &eq_param_map,             // $eq100.PARAM_PTR_FIELD
      &cvc_variant,              // $eq100.PTR_VARIANT_FIELD
      FFT_WIN_FACTOR * 2,        // $eq100.NPROTO_FRAME_FIELD
      &low_input_flag,           // $eq100.LOW_INPUT_FLAG_PTR_FIELD
      &EQ_map_ratio,             // $eq100.SMOOTHED_RATIO_PTR_FIELD
      &eq_map_scratch_1,         // $eq100.EQ100_SCRATCH_1_PTR
      &eq_map_scratch_2,         // $eq100.EQ100_SCRATCH_2_PTR
      &blend_dim,                // $eq100.BLEND_DIM_PTR_FIELD
      0 ...;
#else
      .CONST EQ_map_ratio        0;            
#endif // BLD_EQ_MAP

#if defined(BLD_EQ_MAP) || defined(BLD_INT_MALFUNC)
   #define ref_param_map      CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_REF_THRESH

   .VAR refpwr_obj[$refpwr.STRUCT_SIZE] =
      &X,                        // $refpwr.AEC_REF_PTR_FIELD
      &ref_param_map,            // $eq100.PARAM_PTR_FIELD
      &cvc_variant,              // $refpwr.PTR_VARIANT_FIELD
      &dm1_scratch,              // $refpwr.SCRATCH_FIELD 
      0 ...;                     // {internal fields}
#endif

#if defined(BLD_IM)
   #if 0
      .VAR hyst100_data_obj[$hyst100.STRUC_SIZE] =
         &cvc_variant,                                                        // $hyst100.PTR_VARIANT_FIELD
         &hi_wind_flag,                                                       // $hyst100.IMM_PTR_FIELD
         CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_HYST_CLEAR_THRES,
         0 ...;
   #endif

   #define blend_param              CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_BLEND_SLOPE
   #define blend100_scratch_dm1     dm1_scratch

   #ifndef CVC_INEAR_MAOR_ROM_HARDWARE_BUILD
      .VAR blend100_data_obj[$blend100.STRUC_SIZE] =
   #else
      .VAR blend100_data_obj[$blend100.STRUC_SIZE_HW] =
   #endif
      &D_im,                                                               // $blend100.INTMIC_PTR_FIELD
      &D0,                                                                 // $blend100.EXTMIC_PTR_FIELD
      &blend_param,                                                        // $blend100.PARAM_PTR_FIELD
      &cvc_variant,                                                        // $blend100.PTR_VARIANT_FIELD
      &blend100_scratch_dm1,                                               // $blend100.BLEND_SCRPTR_FIELD
      0 ...;

#if defined(BLD_INT_MALFUNC)
   #define int_malfunc_param_obj    CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_INT_MIC_MALFUNC_THRES
   .VAR int_malfunc_data_obj[$int_malfunc.STRUC_SIZE] =
      &D0,                       // $int_malfunc.D0_FIELD
      &D_im,                     // $int_malfunc.D_INT_FIELD
      &int_malfunc_param_obj,    // $int_malfunc.PARAM_PTR_FIELD
      &cvc_variant,              // $int_malfunc.PTR_VARIANT_FIELD
      &dm1_scratch,              // $int_malfunc.SCRATCH_DM1_FIELD 
      &dm2_scratch,              // $int_malfunc.SCRATCH_DM2_FIELD
      0 ...;

#endif /* defined(BLD_INT_MALFUNC) */

#endif /* defined(BLD_IM) */

#if uses_ASF && defined(BLD_WNR_MAP) 
   #define hi_wind_param      CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_WNR_HYST_CLEAR_THRES
   .VAR wnr_map_obj[$asf100.wnr_map.STRUC_SIZE] =
         &hi_wind_param,               // $asf100.wnr_map.HI_WIND_PARAM_FIELD
         &cvc_variant,                 // $asf100.wnr_map.PTR_VARIANT_FIELD
         0 ...;                        // rest zeros
#else
   .CONST wnr_map_obj         0;
#endif

#if defined(BLD_TMM)
   #define tmm_peq_off        tmm_obj + $cvc.tmm.PEQ_OFF_FLAG
   #if defined(BLD_MLMASK)
      #undef snd_gain_voice
      #define snd_gain_voice  tmm_obj + $cvc.tmm.STREAM_GAIN
   #endif

   .VAR tmm_obj[$cvc.tmm.STRUC_SIZE] =
      &wnr_map_obj,
      &dmss_snr_obj,
      #if defined(BLD_IM)
         &dms200_im,
         &eq_map_obj,
         &blend100_data_obj,
         &int_malfunc_data_obj,
         &int_fit_eval100_data_obj,
      #endif
      0 ...;
#endif

   // --------------------------------------------------------------------------
   // Internal mic processing
   // --------------------------------------------------------------------------
   .VAR/DM proc_stream_im[] =
      //                                        r9 -> '&root' implicitly and globally
      // Function                               r7                   r8

   #if 0
      $hyst100.process,                         $cvc.mc.hyst,        &hyst100_data_obj,                          MIPS_DEBUG(&mips_array + WINDHYST_IDX)
   #endif

   #if defined(BLD_OMS_IN0_IM)
      $dms200.process,                          $cvc.mc.aec530_im,    &oms280in0_im,                             MIPS_DEBUG(&mips_array + OMSINT_IDX)
   #endif                                                                                                        

   #if defined(BLD_AEC_IM)
      $aec530.process,                          $cvc.mc.aec530_im,    &aec_im,                                   MIPS_DEBUG(&mips_array + AECINT_IDX)
   #endif

   #if defined(BLD_INT_MIC_FIT)
      $int_fit_eval100.process,                 $cvc.mc.int_fit_eval, &int_fit_eval100_data_obj,                 MIPS_DEBUG(&mips_array + FITEVAL_IDX)
   #endif

   #if defined(BLD_EQ_MAP)
      $eq100.process,                           $cvc.mc.eq_map,       &eq_map_obj,                               MIPS_DEBUG(&mips_array + EQMAP_IDX)
   #endif

   #if defined(BLD_NS_IM)
      $dms200.process,                          $cvc.mc.dms200_im,    &dms200_im,                                MIPS_DEBUG(&mips_array + DMSINT_IDX)
      $dms200.apply_gain,                       $cvc.mc.dms200_im,    &dms200_im,                                MIPS_DEBUG(&mips_array + DMSINTAPPLYGAIN_IDX)
   #endif

   #if defined(BLD_AEC_IM)
      $aec530.nlp.process,                      $cvc.mc.aec_nlp_im,   &vsm_fdnlp_im,                             MIPS_DEBUG(&mips_array + AECNLPINT_IDX)
      $aec530.cng.process,                      $cvc.mc.aec_cng_im,   &aec_im,                                   MIPS_DEBUG(&mips_array + CNGINT_IDX)
   #endif

      $blend100.process,                        $cvc.mc.blend,        &blend100_data_obj,                        MIPS_DEBUG(&mips_array + BLEND_IDX)

      0;                                     // END OF TABLE


   // --------------------------------------------------------------------------
   // Table of functions for current mode
   // --------------------------------------------------------------------------
   .VAR  ModeProcTableSnd[$M.GEN.CVC_SEND.SYSMODE.MAX_MODES] =
      &copy_proc_funcsSnd,              // STATIC
      &copy_proc_funcsSnd,              // STANDBY
      &hfk_proc_funcsSnd,               // FULL
      &hfk_proc_funcsSnd,               // LOWVOLUME
      &copy_proc_funcsSnd,              // PASS_THRU_LEFT
      &copy_proc_funcsSnd,              // PASS_THRU_RIGHT
      &copy_proc_funcsSnd,              // PASS_THRU_MIC3
      &copy_proc_funcsSnd,              // PASS_THRU_MIC4
      &copy_proc_funcsSnd;              // PASS_THRU_AEC_REF



   // --------------------------------------------------------------------------
   // Send Process Table
   // --------------------------------------------------------------------------
   .VAR/DM hfk_proc_funcsSnd[] =
      //                                        r9 -> '&root' implicitly and globally
      // Function                               r7                   r8

      $cvc.pre_process,                         0,                   0,                                          MIPS_DEBUG(&mips_array + CVCPREPROC_IDX)

#if defined(MIC_GROUPING)
      $mgdc100.stream_mixing.proc,              &mic_array,          &mgdc100_obj,                               MIPS_DEBUG(0)
#endif

#if uses_DCBLOCK
      $cvc.peq.process,                         &in_l_dcblock,       0,                                          MIPS_DEBUG(&mips_array + DCBLOCK_IDX)       // Si_L --> Si_L
      $cvc.peq.process,                         &in_r_dcblock,       0,                                          MIPS_DEBUG(0)                               // Si_R --> Si_R 
      $cvc.peq.process,                         &in_mic3_dcblock,    0,                                          MIPS_DEBUG(0)                               // Si_R --> Si_R 
#endif

#if uses_AEC
   #if uses_REF_VAD
      $vad410.process,                          0,                   &ref_vad410,                                MIPS_DEBUG(&mips_array + REFVAD_IDX)
   #endif

      $cvc.event.echo_flag,                     &vsm_fdnlp,          &vad_rcv,                                   MIPS_DEBUG(&mips_array + ECHOEVENT_IDX)

   #if defined(BLD_FDFBC)
      $cvc.stream_copy,                         &stream_d0,          &stream_dd0,                                MIPS_DEBUG(0)
      $filter_bank.analysis.process,            $cvc.mc.fdfbc,       &fba_left_pre_fdfbc,                        MIPS_DEBUG(0)                               // Si_L -> DD0                  
      $aec530.fdfbc.process,                    0,                   &aec_obj,                                   MIPS_DEBUG(&mips_array + FDFBC_IDX)         // [Si_L -> Si_L1]
   #endif
#endif 

#if defined(BLD_FBC_IM)
   #if defined(BLD_FBC_IM_RESAMPLER)
         $cvc.resampler.process,                &im_downsampler,     0,                                          MIPS_DEBUG(0)
         $cvc.resampler.process,                &ref_downsampler,    &stream_ref_wb,                             MIPS_DEBUG(0)
   #endif

      $fbc.process,                             $cvc.mc.fbc_im,      &fbc_im,                                    MIPS_DEBUG(&mips_array + TDFBC_IDX)

   #if defined(BLD_FBC_IM_RESAMPLER)
         $cvc.resampler.process,                &im_upsampler,       0,                                          MIPS_DEBUG(0)
   #endif
#endif

#if defined(BLD_BCM_ACC)
      $vad410.process,                          0,                   &intmic_vad410,                             MIPS_DEBUG(&mips_array + INTMICVAD_IDX)
#endif

#if !defined(SND_HARM_OFF)
      $harm100.process,                         0,                   &snd_harm_obj,                              MIPS_DEBUG(&mips_array + HARM_IDX)
#endif

      $filter_bank.analysis.process,            0,                   &fba_left,                                  MIPS_DEBUG(&mips_array + AFB_IDX)           // Si_L -> D0

#if CVC_DYN_NUM_MICS != 1 
      $filter_bank.analysis.process,            0,                   &fba_right,                                 MIPS_DEBUG(0)                               // Si_R -> D1                                
#endif

#if defined(BLD_3MIC)
      $filter_bank.analysis.process,            0,                   &fba_mic3,                                  MIPS_DEBUG(0)                               // Si_mic3 -> D2
#endif

#if uses_MGDC
      $mgdc100.process,                         $cvc.mc.mgdc100,     &mgdc100_obj,                               MIPS_DEBUG(&mips_array + MGDC_IDX)          // [D0,D1]
      $cvc.mgdc_persist.state_upload,           &mgdc_state_ptr,     &mgdc100_obj,                               MIPS_DEBUG(&mips_array + MGDCPERSIST_IDX)
   #if !defined(SND_HARM_OFF)
      $cvc.mgdc.harm_dynamic,                   &harm_inputs,        &snd_harm_obj,                              MIPS_DEBUG(0)
   #endif
#endif

#if uses_IN0_OMS
      $dms200.process,                          $cvc.mc.oms_in,      &oms280in0_obj,                             MIPS_DEBUG(&mips_array + OMSEXT_IDX)        // D0
#endif

#if uses_AEC
      $filter_bank.analysis.process,            $cvc.mc.ref_delay,   &fba_ref,                                   MIPS_DEBUG(0)                               // ref --> [X_real,X_imag]

   #if defined(BLD_EQ_MAP) || defined(BLD_INT_MALFUNC)
      $aec530.refpower_calc,                    0,                   &refpwr_obj,                                MIPS_DEBUG(&mips_array + REFPOWER_IDX)
   #endif
   #if defined(BLD_INT_MALFUNC)
      $int_malfunc.process,                     $cvc.mc.int_malfunc, &int_malfunc_data_obj,                      MIPS_DEBUG(&mips_array + MICMALFUNC_IDX)
   #endif

      $aec530.process,                          $cvc.mc.aec530,      &aec_obj,                                   MIPS_DEBUG(&mips_array + AECEXT_IDX)        // [D0,D1]
      $aec530.reference.process,                0,                   &aec_obj,                                   MIPS_DEBUG(&mips_array + AECEXT_REFPROC_IDX)

   #if defined(BLD_AEC_IM)
      $aec530.reference.pre_proc,               $cvc.mc.aec530_prep, &aec_obj,                                   MIPS_DEBUG(&mips_array + AECEXT_REFPREPROC_IDX)
   #endif
#endif

#if defined(BLD_SELFCLEAN)
      $cvc.selfclean.channel_save,              &D0,                 &selfclean100_dobj,                         MIPS_DEBUG(&mips_array + SELFCLEAN_PREPROC_IDX)
#endif

#if defined(BLD_DMSS)
      $dmss.input_power_monitor,                0,                   &dmss_obj,                                  MIPS_DEBUG(&mips_array + INPUTPWRMONITOR_IDX)
#endif

#if uses_ASF
#if !defined(BLD_ASF200)
      $asf100.process,                          $cvc.mc.asf100,      &asf_object,                                MIPS_DEBUG(&mips_array + ASF100_IDX)        // [D0,D1]
#endif

#if defined(BLD_ASF200)
   #if defined(BLD_SPK_VA)
      $asf200.ffv.preprocess,                   $cvc.mc.asf200,      &asf200_obj,                                MIPS_DEBUG(0)                               // [D0,D1,D2,D0]
   #endif 

      $asf200.process,                          $cvc.mc.asf200,      &asf200_obj,                                MIPS_DEBUG(0)                               // [D0,D1,D2,Z3]
#endif
#endif

#if defined(BLD_LOW_SNR_DETECT)
      $dmss.snr.process,                        0,                   &dmss_snr_obj,                              MIPS_DEBUG(&mips_array + LOWSNR_IDX)
#endif

#if defined(BLD_TMM)
      $cvc.tmm.process,                         0,                   &tmm_obj,                                   MIPS_DEBUG(0)
#endif

#if defined(BLD_BCM_ACC)
      $isoselfclean100.process,                 $cvc.mc.isoselfclean,&isoselfclean100_dobj,                      MIPS_DEBUG(&mips_array + ISOSELFCLEAN_IDX)
#endif

#if uses_NC
      $cvc.mc.nc100_process,                    0,                   &nc100_obj,                                 MIPS_DEBUG(&mips_array + NC100_IDX)             // D0
#endif

#if defined(BLD_DMSS)
      $dmss.output_power_monitor,               0,                   &dmss_obj,                                  MIPS_DEBUG(&mips_array + OUTPUTPWRMONITOR_IDX)            

   #if !defined(RNR_OFF)
      $dmss.rnr.process,                        $cvc.mc.dmss_rnr,    &dmss_obj,                                  MIPS_DEBUG(&mips_array + RNR_IDX)
   #endif
#endif

#if uses_SND_NS
      $dms200.process,                          $cvc.mc.dms200,      &dms200_obj,                                MIPS_DEBUG(&mips_array + DMSEXT_IDX)
      $dms200.apply_gain,                       $cvc.mc.dms_out,     &dms200_obj,                                MIPS_DEBUG(&mips_array + DMSEXTAPPLYGAIN_IDX)
#endif

#if defined(BLD_SELFCLEAN)
      $selfclean100.process,                    0,                   &selfclean100_dobj,                         MIPS_DEBUG(&mips_array + SELFCLEAN_IDX)
#endif 

#if defined(BLD_SELFCLEAN) && defined(BLD_BCM_ACC)
      $cvc.mc.selfclean_set,                    0,                   &isoselfclean100_dobj,                      MIPS_DEBUG(0)                     
#endif      

#if defined(BLD_DMSS)
   #if uses_ASF || uses_SND_VAD
      $dmss.calc_TR,                            0,                   &dmss_obj,                                  MIPS_DEBUG(&mips_array + TARGETRATIO_IDX)
   #endif
#endif

#if defined(BLD_VA)
      $cvc.run_function_table,                  $cvc.mc.va,          &proc_stream_va,                            MIPS_DEBUG(0)
#endif

#if !defined(BLD_VOICE_OFF)
      $cvc.run_function_table,                  $cvc.mc.voice,       &proc_stream_voice,                         MIPS_DEBUG(0)
#endif

      0;                                     // END OF TABLE

   // --------------------------------------------------------------------------
   // Voice stream processing
   // --------------------------------------------------------------------------
   .VAR/DM proc_stream_voice[] =
      //                                        r9 -> '&root' implicitly and globally
      // Function                               r7                   r8

#if !defined(BLD_SPK_VA)
   #if defined(BLD_TP)
      $dmss.tp.process,                         $cvc.mc.dmss_tp,     &dmss_obj,                                  MIPS_DEBUG(&mips_array + TARGETPROTECT_IDX)
   #endif

   #if uses_SND_VAD
      $aed100.process,                          $cvc.mc.aed100,      &aed100_obj,                                MIPS_DEBUG(&mips_array + AED_IDX)
   #endif

   #if uses_AEC
      $aec530.nlp.process,                      $cvc.mc.aec530_nlp,  &vsm_fdnlp,                                 MIPS_DEBUG(&mips_array + AECNLPEXT_IDX)
      $aec530.cng.process,                      $cvc.mc.aec530_cng,  &aec_obj,                                   MIPS_DEBUG(&mips_array + CNGEXT_IDX)
   #endif

   #if defined(BLD_DMSS)
      $dmss.rnr.gain_apply,                     0,                   &dmss_obj,                                  MIPS_DEBUG(&mips_array + RNRGAINAPPLY_IDX)
   #endif

   #if defined(BLD_IM) 
      $cvc.run_function_table,                  $cvc.mc.int_mic,     &proc_stream_im,                            MIPS_DEBUG(0)
   #endif

    #if defined (BLD_MBDRC) && !defined(BLD_MLMASK) 
         $mbdrc100.process,                     $cvc.mc.mbdrc,       &mbdrc100_obj,                                 MIPS_DEBUG(0)
         $cvc.adj_bexp,                         2,                   &D0,                                       MIPS_DEBUG(0)
    #endif

      $filter_bank.synthesis.process,           0,                   &fbs_snd,                                   MIPS_DEBUG(&mips_array + SFB_IDX)               // [D -> So]

   #if defined(BLD_MLMASK)
      $filter_bank.analysis.process,            0,                   &fba_ml,                                    MIPS_DEBUG(0)

      $mlfe100_xlate.process,                   0,                   &mlmask_obj,                                MIPS_DEBUG(0)

      #if defined(BLD_MBDRC) 
         $mbdrc100.process,                     $cvc.mc.mbdrc,       &mbdrc100_obj,                                 MIPS_DEBUG(0)
      #endif
      $cvc.adj_bexp,                            2,                   &D_ml,                                      MIPS_DEBUG(0)
      $filter_bank.synthesis.process,           0,                   &fbs_ml,                                    MIPS_DEBUG(0)
   #endif

   #if uses_SND_PEQ
      #if defined(BLD_TMM) 
         $cvc_send.peq.process,                    &snd_peq,         &tmm_peq_off,                               MIPS_DEBUG(0)
      #else
         $cvc.peq.process,                         &snd_peq,         0,                                          MIPS_DEBUG(0)
      #endif
   #endif

      $cvc.stream_gain.mult4.process,           0,                   &stream_z0,                                 MIPS_DEBUG(0)
      $cvc.stream_gain.process,                 &snd_gain_voice,     &stream_z0,                                 MIPS_DEBUG(0)

   #if uses_SND_AGC
      $agc400.process,                          $cvc.mc.agc400,      &snd_agc400_dm,                             MIPS_DEBUG(&mips_array + AGC_IDX)
   #endif

      $cvc_send.mute_control,                   &mute_control_ptr,   &stream_z0,                                 MIPS_DEBUG(0)
#endif // BLD_SPK_VA

      0,
      $mbdrc100.process,                     $cvc.mc.mbdrc,       &mbdrc100_obj ;                                     // END OF TABLE

#if defined(BLD_VA)
   // --------------------------------------------------------------------------
   // VA stream processing
   // --------------------------------------------------------------------------
   .VAR/DM proc_stream_va[] =
      //                                        r9 -> '&root' implicitly and globally
      // Function                               r7                   r8

      $filter_bank.synthesis.process,           0,                   &fbs_snd_va1,                               MIPS_DEBUG(0)
      $cvc.stream_gain.process,                 &snd_gain_va,        &stream_z1,                                 MIPS_DEBUG(0)
      $cvc_send.mute_control,                   &mute_control_ptr,   &stream_z1,                                 MIPS_DEBUG(0)

   #if defined(BLD_SPK_VA)
      #if uses_SND_NS
         $dms200.process,                       $cvc.mc.dms200,      &dms200_obj_va2,                            MIPS_DEBUG(0)
         $dms200.process,                       $cvc.mc.dms200,      &dms200_obj_va3,                            MIPS_DEBUG(0)
         $dms200.process,                       $cvc.mc.dms200,      &dms200_obj_va4,                            MIPS_DEBUG(0)

         $dms200.apply_gain,                    $cvc.mc.dms_out,     &dms200_obj_va2,                            MIPS_DEBUG(0)
         $dms200.apply_gain,                    $cvc.mc.dms_out,     &dms200_obj_va3,                            MIPS_DEBUG(0)
         $dms200.apply_gain,                    $cvc.mc.dms_out,     &dms200_obj_va4,                            MIPS_DEBUG(0)
      #endif

      $filter_bank.synthesis.process,           0,                   &fbs_snd_va2,                               MIPS_DEBUG(0)
      $filter_bank.synthesis.process,           0,                   &fbs_snd_va3,                               MIPS_DEBUG(0)
      $filter_bank.synthesis.process,           0,                   &fbs_snd_va4,                               MIPS_DEBUG(0)

      $cvc.stream_gain.process,                 &snd_gain_va,        &stream_z2,                                 MIPS_DEBUG(0)
      $cvc.stream_gain.process,                 &snd_gain_va,        &stream_z3,                                 MIPS_DEBUG(0)
      $cvc.stream_gain.process,                 &snd_gain_va,        &stream_z4,                                 MIPS_DEBUG(0)
   #endif

      0;                                     // END OF TABLE
#endif // BLD_VA

   // --------------------------------------------------------------------------
   // Pass Through Process Table
   // --------------------------------------------------------------------------
   .VAR/DM copy_proc_funcsSnd[] =
      //                                        r9 -> '&root' implicitly and globally
      // Function                               r7                      r8

      $cvc_send.passthrough.voice,              &cvc_streams,           &stream_z0,
      $cvc_send.mute_control,                   &mute_control_ptr,      &stream_z0,

   #if defined(BLD_VA)
      $cvc_send.passthrough.va,                 &cvc_streams,           &stream_z1,
      $cvc_send.mute_control,                   &mute_control_ptr,      &stream_z1,
   #endif  

   #if defined(BLD_SPK_VA)
      $cvc_send.passthrough.speaker_va,         &stream_d0,             &stream_z2,
      $cvc_send.passthrough.speaker_va,         &stream_d1,             &stream_z3,
      $cvc_send.passthrough.speaker_va,         &stream_d2,             &stream_z4,
   #endif

      0;                                     // END OF TABLE

// --------------------------------------------------------------------------
   // Reinitialize Table
   // --------------------------------------------------------------------------
   .VAR/DM ReInitializeTable[] =
      //                                  r9 -> '&root' implicitly and globally
      // Function                         r7                      r8

      $cvc.init.root,                     CVC_NUM_MICS_EXT,       CVC_SEND_MAJOR_CONFIG,   MIPS_DEBUG(0)

#if uses_DCBLOCK
      $cvc.peq.initialize,                &in_l_dcblock,          0,  MIPS_DEBUG(0)
      $cvc.peq.initialize,                &in_r_dcblock,          0,  MIPS_DEBUG(0)
      $cvc.peq.initialize,                &in_mic3_dcblock,       0,  MIPS_DEBUG(0)
#endif

#if defined(BLD_AUTO) && !defined(BLD_1MIC) // AUTO 2mic channel switch
      $cvc.init.fb.stream_connect.left,   &cvc_streams,           &fba_left,  MIPS_DEBUG(0)
      $cvc.init.fb.stream_connect.right,  &cvc_streams,           &fba_right, MIPS_DEBUG(0)
#endif

#if !defined(BLD_VOICE_OFF)
      $filter_bank.synthesis.initialize,  0,                      &fbs_snd,  MIPS_DEBUG(0)
#endif

#if defined(BLD_VA)
      $filter_bank.synthesis.initialize,  0,                      &fbs_snd_va1,  MIPS_DEBUG(0)
#endif

#if defined(BLD_SPK_VA)
      $filter_bank.synthesis.initialize,  0,                      &fbs_snd_va2,  MIPS_DEBUG(0)
      $filter_bank.synthesis.initialize,  0,                      &fbs_snd_va3,  MIPS_DEBUG(0)
      $filter_bank.synthesis.initialize,  0,                      &fbs_snd_va4,  MIPS_DEBUG(0)
#endif    
   
      $filter_bank.analysis.initialize,   0,                      &fba_left,    MIPS_DEBUG(0)
#if !defined(BLD_1MIC)
      $filter_bank.analysis.initialize,   0,                      &fba_right,   MIPS_DEBUG(0)
#endif

#if defined(BLD_3MIC)
      $filter_bank.analysis.initialize,   0,                      &fba_mic3,   MIPS_DEBUG(0)
#endif

#if !defined(SND_HARM_OFF)
      $harm100.initialize,                $cvc.init.harm,         &snd_harm_obj,  MIPS_DEBUG(0)
#endif

#if uses_MGDC
      $mgdc100.initialize,                0,                      &mgdc100_obj, MIPS_DEBUG(0)
      $cvc.mgdc_persist.init,             &mgdc_state_ptr,        &mgdc100_obj, MIPS_DEBUG(0)
#endif

#if uses_IN0_OMS
      $oms280.initialize,                 $cvc.init.oms_in,       &oms280in0_obj, MIPS_DEBUG(0)
#endif

#if uses_AEC
   #if uses_REF_VAD
      $vad410.initialize,                 0,                      &ref_vad410, MIPS_DEBUG(0)
   #endif

      $filter_bank.analysis.initialize,   0,                      &fba_ref, MIPS_DEBUG(0)
      $aec530.initialize,                 $cvc.init.aec530,       &aec_obj, MIPS_DEBUG(0)
      $aec530.main_cng_initialize,        0,                      &aec_obj, MIPS_DEBUG(0)

   #if !defined(VSM_FDNLP_OFF)
      $aec530.nlp.initialize,             $cvc.init.vsm_fdnlp,    &vsm_fdnlp, MIPS_DEBUG(0)
   #endif

   #if defined(BLD_FDFBC)
      $cvc.user.fdfbc.fb.initialize,      0,                      &fba_left_pre_fdfbc, MIPS_DEBUG(0)
      $cvc.user.aec530.fdfbc.initialize,  &aec_obj,               &fdfbc0_obj, MIPS_DEBUG(0)
   #endif
#endif

#if defined(BLD_TMM)
      $cvc.tmm.initialize,                0,                      &tmm_obj,  MIPS_DEBUG(0)
#endif

#if defined(BLD_DMSS)
      $dmss.initialize,                   0,                      &dmss_obj, MIPS_DEBUG(0)
#endif 

#if uses_ASF
#if !defined(BLD_ASF200)
      $asf100.initialize,                 $cvc.init.asf100,       &asf_object, MIPS_DEBUG(0)
#endif

#if defined(BLD_ASF200)
      $asf200.initialize,                 $cvc.init.asf200,       &asf200_obj, MIPS_DEBUG(0)
#endif
#endif

#if uses_NC
      $nc100.initialize,                  $cvc.init.nc100,        &nc100_obj, MIPS_DEBUG(0)
#endif

#if uses_SND_NS
      $dms200.initialize,                 $cvc.init.dms200,       &dms200_obj, MIPS_DEBUG(0)

   #if !defined(OMS_WNR_OFF)
      // OMS WNR
      $cvc.user.dms200.wnr.initialize,    &oms_wnr_obj,           &dms200_obj, MIPS_DEBUG(0)
   #endif

   #if defined(BLD_VA)
      $cvc.user.dms200.va_init,           &X,                     &dms200_obj, MIPS_DEBUG(0)
   #endif

   #if defined(BLD_SPK_VA)
      $dms200.initialize,                 $cvc.init.dms200.speaker_va,    &dms200_obj,     MIPS_DEBUG(0)
      $dms200.initialize,                 $cvc.init.dms200.speaker_va,    &dms200_obj_va2, MIPS_DEBUG(0)
      $dms200.initialize,                 $cvc.init.dms200.speaker_va,    &dms200_obj_va3, MIPS_DEBUG(0)
      $dms200.initialize,                 $cvc.init.dms200.speaker_va,    &dms200_obj_va4, MIPS_DEBUG(0)
   #endif
#endif

#if uses_SND_VAD
      $aed100.initialize,                 $cvc.init.aed100,       &aed100_obj,  MIPS_DEBUG(0)
#endif

#if uses_SND_PEQ
      $cvc.peq.initialize,                &snd_peq,               0,   MIPS_DEBUG(0)
#endif

#if uses_SND_AGC
      $agc400.initialize,                 $cvc.init.agc400,       &snd_agc400_dm,  MIPS_DEBUG(0)
#endif

#if defined(BLD_SELFCLEAN)
      $selfclean100.initialize,                0,                 &selfclean100_dobj,  MIPS_DEBUG(0)
#endif

#if defined(BLD_IM)
   #if 0
      $hyst100.initialize,                $cvc.init.hyst,           &hyst100_data_obj,   MIPS_DEBUG(0)
   #endif

      $blend100.initialize,               $cvc.init.blend,          &blend100_data_obj,  MIPS_DEBUG(0)

   #if defined(BLD_INT_MIC_FIT)
      $int_fit_eval100.initialize,        0,                      &int_fit_eval100_data_obj,  MIPS_DEBUG(0)
   #endif
#endif

#if defined(BLD_FBC_IM)
   #if defined(BLD_FBC_IM_RESAMPLER)
      $cvc.resampler.init.ref_downsampler,&ref_delay_stream,      &stream_ref_wb,   MIPS_DEBUG(0)
      $cvc.resampler.init.im_downsampler, &stream_im,             &stream_im_wb,    MIPS_DEBUG(0)
      $cvc.resampler.init.im_upsampler,   &stream_im_wb,          &stream_im,       MIPS_DEBUG(0)
   #endif

      $fbc.initialize,                    $cvc.init.fbc_im,       &fbc_im,          MIPS_DEBUG(0)
#endif

#if defined(BLD_OMS_IN0_IM)
      $oms280.initialize,                 $cvc.init.oms_in_im,    &oms280in0_im, MIPS_DEBUG(0)
#endif

#if defined(BLD_AEC_IM)
      $aec530.initialize,                 $cvc.init.aec530_im,    &aec_im, MIPS_DEBUG(0)
      $aec530.inst.cng_initialize,        $cvc.init.cng_im,       &aec_im, MIPS_DEBUG(0)

   #if !defined(VSM_FDNLP_OFF)
      $aec530.nlp.initialize,             $cvc.init.vsm_fdnlp_im, &vsm_fdnlp_im, MIPS_DEBUG(0)
   #endif
#endif

#if defined(BLD_NS_IM)
      $dms200.initialize,                 $cvc.init.dms200_im,    &dms200_im, MIPS_DEBUG(0)
#endif

#if defined(BLD_EQ_MAP)
      $eq100.initialize,                  $cvc.init.eq,           &eq_map_obj, MIPS_DEBUG(0)
#endif

#if defined(BLD_EQ_MAP) || defined(BLD_INT_MALFUNC)
      $aec530.refpower_init,                 0,                   &refpwr_obj,   MIPS_DEBUG(0)
#endif

#if defined(BLD_LOW_SNR_DETECT)
      $dmss.snr.initialize,               0,                      &dmss_snr_obj,MIPS_DEBUG(0)
#endif

#if defined(BLD_INT_MALFUNC)
      $int_malfunc.initialize,            0,                      &int_malfunc_data_obj,MIPS_DEBUG(0)
#endif

#if defined(BLD_BCM_ACC)
      $vad410.initialize,                 0,                      &intmic_vad410, MIPS_DEBUG(0)
      $isoselfclean100.initialize,        0,                      &isoselfclean100_dobj,MIPS_DEBUG(0)
#endif

#if defined(BLD_MLMASK)
      $mlfe100_xlate.initialize,          0,                      &mlmask_obj,   MIPS_DEBUG(0)
      $filter_bank.analysis.initialize,   0,                      &fba_ml,       MIPS_DEBUG(0)
      $filter_bank.synthesis.initialize,  0,                      &fbs_ml,       MIPS_DEBUG(0)
      $cvc.config.ml_peq,                 &snd_peq,               &fbs_ml,       MIPS_DEBUG(0)

#endif

#if defined(BLD_MBDRC) 
    $mbdrc100.initialize,               0,                      &mbdrc100_obj,    MIPS_DEBUG(0)
#endif

      0;                                    // END OF TABLE

   // --------------------------------------------------------------------------
   // Stream Definitions
   // --------------------------------------------------------------------------

   .BLOCK/DM cvc_send_internal_streams;
      // initialized by aec530 init
      .VAR stream_x[$cvc_stream.frmbuffer_struct.STRUC_SIZE] =
         0 ...;

      // initialized by $cvc_send.mic_stream_update
      .VAR stream_d0[$cvc_stream.frmbuffer_struct.STRUC_SIZE] =
         0 ...;

      // initialized by $cvc_send.mic_stream_update
      .VAR stream_d1[$cvc_stream.frmbuffer_struct.STRUC_SIZE] =
         0 ...;

      // initialized by $cvc_send.mic_stream_update
      .VAR stream_d2[$cvc_stream.frmbuffer_struct.STRUC_SIZE] =
         0 ...;

      // initialized by $cvc_send.mic_stream_update
      .VAR stream_d3[$cvc_stream.frmbuffer_struct.STRUC_SIZE] =
         0 ...;

      // initialized by filter_bank syntheis init
      .VAR stream_z0[$cvc_stream.frmbuffer_struct.STRUC_SIZE] =
         0 ...;

      #if defined(BLD_VA)
         // initialized by filter_bank syntheis init
         .VAR stream_z1[$cvc_stream.frmbuffer_struct.STRUC_SIZE] =
            0 ...;
      #endif

      #if defined(BLD_SPK_VA)
         // initialized by filter_bank syntheis init
         .VAR stream_z2[$cvc_stream.frmbuffer_struct.STRUC_SIZE] =
            0 ...;
   
         // initialized by filter_bank syntheis init
         .VAR stream_z3[$cvc_stream.frmbuffer_struct.STRUC_SIZE] =
            0 ...;
   
         // initialized by filter_bank syntheis init
         .VAR stream_z4[$cvc_stream.frmbuffer_struct.STRUC_SIZE] =
            0 ...;
      #endif
   .ENDBLOCK;


   // --------------------------------------------------------------------------
   // DynTable_Linker  - Place Holder for linker resolved symbols
   // DynTable_Main - Command Data Block
   // --------------------------------------------------------------------------
#if !defined(CAPABILITY_DOWNLOAD_BUILD)
   .VAR/CONST     DynTable_Linker[] = 0;
   .VAR/CONST16   DynTable_Main[] =

    DYN_LINKER_RESOLVE(DynTable_Linker),
#else
   .VAR/CONST     Downloadable.DynTable_Linker[] = 0;
   .VAR/CONST16   Downloadable.DynTable_Main[] =

    DYN_LINKER_RESOLVE(Downloadable.DynTable_Linker),
#endif

      DYN_ALLOC_EXTERNAL_FILESYSTEM()
      // Header
      DYN_ALLOC_ROOT($cvc_send.cap.INST_ALLOC_PTR_FIELD),
      DYN_ALLOC_SCRATCH_ROOT($cvc_send.cap.SCRATCH_ALLOC_PTR_FIELD),

      // Define Dynamic Memory Block Sizes to use 
      DYN_BLOCK_SIZE(1032),

      // Scratch blocks use 3 words for header
      DYN_SCRATCH_BLOCK_SIZE(1032),

      // Link to Root Object

      // internal streams
      DYN_SET_ROOT($cvc_send.cap.PTR_INPUT_STREAM_REF_FIELD, cvc_send_internal_streams),
      DYN_SET_ROOT($cvc_send.cap.SCRATCH_BUFFER, D0),

      DYN_SET_ROOT($cvc_send.cap.MODE_TABLE_PTR_FIELD,ModeProcTableSnd),
      DYN_SET_ROOT($cvc_send.cap.INIT_TABLE_PTR_FIELD,ReInitializeTable),
      DYN_SET_ROOT($cvc_send.cap.CVC_DATA_ROOT_FIELD,root),
      DYN_SET_ROOT($cvc_send.cap.STATUS_TABLE_PTR_FIELD, StatusArray), 
      DYN_SET_ROOT($cvc_send.cap.PARAMS_PTR_FIELD, CurParams),
      DYN_SET_ROOT($cvc_send.cap.PTR_MAP_RATIO, EQ_map_ratio),
   #if defined(BLD_MLMASK)
      DYN_SET_ROOT($cvc_send.cap.MLFE_OBJ_FIELD, &mlmask_obj),
   #endif
         
   #if uses_MGDC
      DYN_SET_ROOT($cvc_send.cap.OMNI_MODE_PTR_FIELD, mgdc100_obj+$mgdc100.OMNI_MODE_FIELD),
   #endif
   
    #ifdef DEBUG_MIPS
      DYN_SET_ROOT($cvc_send.cap.MIPS_ARRAY_FIELD, &mips_array),
   #endif

   #if defined(BLD_MBDRC)
      DYN_SET_ROOT($cvc_send.cap.MBDRC_OBJECT_FIELD, &mbdrc100_obj),
   #endif

   #if defined(BLD_DMSS)
      DYN_SET_VALUE(&root + $cvc_send.data.dmss_obj, &dmss_obj),
   #endif

   #if defined(BLD_FDFBC)
      DYN_SET_VALUE(&fdfbc0_obj + $fdfbc.FRAME_SIZE, ext_frame_size),
      DYN_SET_VALUE(&stream_dd0 + $cvc_stream.frmbuffer_struct.FRAME_SIZE_FIELD, ext_frame_size),
   #endif
   #if uses_AEC
      DYN_SET_VALUE(&aec_obj + $aec530.LMS_MAX_FREQ, AEC_MAX_FREQ),

      #if defined(BLD_SPK_VA)
         DYN_SET_VALUE(&aec_obj + $aec530.HF_FLAG_FIELD, $aec530.HF_FLAG_VA),
         DYN_SET_VALUE(&aec_obj + $aec530.FLAG_DTC_ENH, 1),
      #endif
   #else
      DYN_SET_VALUE(&root + $cvc_send.data.aec_inactive, 1),
   #endif

   #if defined(BLD_AEC_IM)
      DYN_SET_VALUE(&aec_im + $aec530.LMS_MAX_FREQ, AEC_MAX_FREQ_INT),
      DYN_SET_VALUE(&aec_im + $aec530.cng.LPZNZ_FIELD, cng_mem_im),
   #endif

   #if uses_SND_NS
      DYN_SET_VALUE(&dms200_obj + $dms200.PTR_NS_POWER_FIELD, CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_NS_POWER),
   #endif

   #if uses_ASF && defined(BLD_WNR_MAP)
      DYN_SET_VALUE(asf_object + $asf100.WNR_MAP_OBJ_FIELD,   &wnr_map_obj),
   #endif

   #if defined(BLD_SELFCLEAN)
      DYN_SET_VALUE(&root + $cvc_send.data.selfclean100_dobj, &selfclean100_dobj),
      DYN_SET_VALUE(selfclean100_dobj + $selfclean100.PTR_DMSS_LPN_MIC_FIELD, CurParams + $M.GEN.CVC_SEND.PARAMETERS.OFFSET_DMSS_LPN_MIC),
   #endif
   #if defined(BLD_EQ_MAP) || defined(BLD_INT_MALFUNC)
      DYN_SET_VALUE(&root + $cvc_send.data.ref_power_obj, &refpwr_obj),
   #endif

      DYN_RESOLVE_EXTERN($cvc_send.cap.CAP_ROOT_PTR_FIELD, cap_root_ptr),
      DYN_RESOLVE_EXTERN($cvc_send.cap.CVCLIB_TABLE, cvclib_table),
      DYN_RESOLVE_EXTERN($cvc_send.cap.FFTSPLIT_TABLE, fft_split),
      DYN_RESOLVE_EXTERN($cvc_send.cap.OMS_CONST, oms_mode_object),
      DYN_RESOLVE_EXTERN($cvc_send.cap.DMS200_MODE,dms_mode_object),
      DYN_RESOLVE_EXTERN($cvc_send.cap.ASF_MODE_TABLE, asf_mode_table),
      DYN_RESOLVE_EXTERN($cvc_send.cap.WNR_MODE_TABLE, wnr_mode_table),
      DYN_RESOLVE_EXTERN($cvc_send.cap.VAD_DC_COEFFS, vad_dc_coeffs),
      DYN_RESOLVE_EXTERN($cvc_send.cap.AEC_MODE, aec_mode_object),
      DYN_RESOLVE_EXTERN($cvc_send.cap.MUTE_CONTROL_PTR, mute_control_ptr),
      DYN_RESOLVE_EXTERN($cvc_send.cap.FILTERBANK_CONFIG, fb_configuration),
      DYN_RESOLVE_EXTERN($cvc_send.cap.HR_FILTERBANK_CONFIG, fb_config_hr),
      DYN_RESOLVE_EXTERN($cvc_send.cap.MGDC_STATE_PTR_FIELD, mgdc_state_ptr),
      DYN_RESOLVE_EXTERN($cvc_send.cap.FRAME_SIZE_FIELD, ext_frame_size), 

   #if defined(BLD_FBC_IM) && defined(BLD_FBC_IM_RESAMPLER)
      DYN_RESOLVE_EXTERN($cvc_send.cap.REF_DOWNSAMPLER_FIELD, ref_downsampler),
      DYN_RESOLVE_EXTERN($cvc_send.cap.IM_DOWNSAMPLER_FIELD,  im_downsampler),
      DYN_RESOLVE_EXTERN($cvc_send.cap.IM_UPSAMPLER_FIELD,    im_upsampler),
   #endif

#if defined(BLD_NB)
   // -----------------------------------------------------------------------
      // Variants - NB
      // -----------------------------------------------------------------------

      DYN_VARIANT(DATA_VARIANT_NB),

   #if uses_NC
      DYN_SET_VALUE(nc100_obj + $nc100.NUM_FFT_FREQ_BIN_FIELD, $CVC_BASE.NB.NUM_FREQ_BIN),
   #endif
   
      DYN_SET_VALUE(&root + $cvc_send.data.fftwin_power, $cvc.POWER_ADJUST_NB_Q8_16),

      DYN_ALLOC_RESIZE(X_real, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(X_imag, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_l_real, $CVC_BASE.NB.NUM_FREQ_BIN),
   #if defined(BLD_FDFBC)
      DYN_ALLOC_RESIZE(DD_r_real, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(DD_r_imag, $CVC_BASE.NB.NUM_FREQ_BIN),
   #endif
      DYN_ALLOC_RESIZE(D_l_imag, $CVC_BASE.NB.NUM_FREQ_BIN),
   #if CVC_DYN_NUM_MICS != 1 
      DYN_ALLOC_RESIZE(D_r_real, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_r_imag, $CVC_BASE.NB.NUM_FREQ_BIN),
   #endif    
   #if defined(BLD_3MIC)
      DYN_ALLOC_RESIZE(D_mic3_real, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_mic3_imag, $CVC_BASE.NB.NUM_FREQ_BIN),
   #endif

   #if defined(BLD_MBDRC)
      DYN_SET_VALUE(mbdrc100_in_buffer + $mbdrc100_library.mbdrc100_in_buffer_t_struct.NUM_BINS_FIELD, ($CVC_BASE.NB.NUM_FREQ_BIN - 1) * HR_NUM_BINS_FACTOR + 1),
   #endif

   #if uses_AEC
      DYN_ALLOC_RESIZE(W_ri, $CVC_BASE.NB.NUM_FREQ_BIN+1),
      DYN_ALLOC_RESIZE(L_adaptA, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(L_adaptR, $CVC_BASE.NB.NUM_FREQ_BIN),
      #if (uses_ASF) || !defined(RER_CNG_OFF)
         DYN_ALLOC_RESIZE(Dt_real, $aec530.RER_DIM),
         DYN_ALLOC_RESIZE(Et_real, $aec530.RER_DIM),
      #endif
      #if (uses_ASF) || defined(BLD_FDFBC)
         DYN_ALLOC_RESIZE(scratch_extra_dm1, MAX(1, CVC_MAX_SCRATCH_SIZE_DM1 - (2*$aec530.RER_DIM + 3*$CVC_BASE.NB.NUM_FREQ_BIN + 1))),
      #endif

      DYN_ALLOC_RESIZE(Exp_Mts_adapt, 2*$CVC_BASE.NB.NUM_FREQ_BIN),
      #if (uses_ASF) || !defined(RER_CNG_OFF)
         DYN_ALLOC_RESIZE(DTC_lin, $CVC_BASE.NB.NUM_FREQ_BIN),
         DYN_ALLOC_RESIZE(Dt_imag, $aec530.RER_DIM),
         DYN_ALLOC_RESIZE(Et_imag, $aec530.RER_DIM),
      #endif
      #if CVC_SEND_MAJOR_CONFIG != 0
         DYN_ALLOC_RESIZE(rerdt_dtc, $CVC_BASE.NB.NUM_FREQ_BIN),
         #if (uses_ASF) || defined(BLD_FDFBC)
            DYN_ALLOC_RESIZE(scratch_extra_dm2, MAX(1, CVC_MAX_SCRATCH_SIZE_DM2 - ( 4*$CVC_BASE.NB.NUM_FREQ_BIN + 2*$aec530.RER_DIM))),
         #endif
      #else
         #if uses_ASF
            DYN_ALLOC_RESIZE(scratch_extra_dm2, MAX(1, CVC_MAX_SCRATCH_SIZE_DM2 - ( 3*$CVC_BASE.NB.NUM_FREQ_BIN + 2*$aec530.RER_DIM))),
         #endif
      #endif
   #else
      DYN_ALLOC_RESIZE(scratch_extra_dm1, CVC_MAX_SCRATCH_SIZE_DM1),
      DYN_ALLOC_RESIZE(scratch_extra_dm2, CVC_MAX_SCRATCH_SIZE_DM2),
   #endif
   
      DYN_ALLOC_RESIZE(bufd_outp, FFT_WIN_FACTOR*$CVC_BASE.NB.NUM_FFT_WINDOW + $CVC_BASE.NB.SAMPLES_PER_FRAME),
   #if defined(BLD_VA)
      DYN_ALLOC_RESIZE(bufd_outp_va1, FFT_WIN_FACTOR*$CVC_BASE.NB.NUM_FFT_WINDOW + $CVC_BASE.NB.SAMPLES_PER_FRAME),
   #endif
   #if defined(BLD_SPK_VA)      
      DYN_ALLOC_RESIZE(bufd_outp_va2, FFT_WIN_FACTOR*$CVC_BASE.NB.NUM_FFT_WINDOW + $CVC_BASE.NB.SAMPLES_PER_FRAME),
      DYN_ALLOC_RESIZE(bufd_outp_va3, FFT_WIN_FACTOR*$CVC_BASE.NB.NUM_FFT_WINDOW + $CVC_BASE.NB.SAMPLES_PER_FRAME),
      DYN_ALLOC_RESIZE(bufd_outp_va4, FFT_WIN_FACTOR*$CVC_BASE.NB.NUM_FFT_WINDOW + $CVC_BASE.NB.SAMPLES_PER_FRAME),
   #endif
   #if defined(BLD_FDFBC)
      DYN_ALLOC_RESIZE(bufd_l_inp_pre_fdfbc, FFT_WIN_FACTOR*$CVC_BASE.NB.NUM_FFT_WINDOW),
      DYN_ALLOC_RESIZE(scratch_extra_fdfbc, 6*$CVC_BASE.NB.NUM_FREQ_BIN),
   #endif
      DYN_ALLOC_RESIZE(bufd_l_inp, FFT_WIN_FACTOR*$CVC_BASE.NB.NUM_FFT_WINDOW),
   #if CVC_DYN_NUM_MICS != 1 
      DYN_ALLOC_RESIZE(bufd_r_inp, FFT_WIN_FACTOR*$CVC_BASE.NB.NUM_FFT_WINDOW),
   #endif
   #if defined(BLD_3MIC)
      DYN_ALLOC_RESIZE(bufd_mic3_inp, FFT_WIN_FACTOR*$CVC_BASE.NB.NUM_FFT_WINDOW),
   #endif

   #if uses_NC
     DYN_ALLOC_RESIZE(nc_ctrl, $CVC_BASE.NB.NUM_FREQ_BIN),
     DYN_ALLOC_RESIZE(LRatio_interpolated, $CVC_BASE.NB.NUM_FREQ_BIN),
   #endif

   #if uses_IN0_OMS != 0
     DYN_ALLOC_RESIZE(in0oms_G, $CVC_BASE.NB.NUM_FREQ_BIN),
     DYN_ALLOC_RESIZE(in0oms_LpX_queue, $M.oms280.QUE_LENGTH),
     DYN_ALLOC_RESIZE(in0oms_state, $CVC_BASE.NB.OMS280.STATELENGTH),
   #endif

   #if defined(BLD_DMS_LINEAR)
     DYN_ALLOC_RESIZE(sndLpX_queue, $dms200.QUE_LENGTH),
   #else
     DYN_ALLOC_RESIZE(sndLpX_queue, $dms200.pbp.QUE_LENGTH_NB),
     DYN_ALLOC_RESIZE(dms_state, $dms200.pbp.STATE_LENGTH),
   #endif
   
     DYN_ALLOC_RESIZE(G_dmsZ, $CVC_BASE.NB.NUM_FREQ_BIN),

   DYN_ALLOC_RESIZE(AttenuationPersist, $CVC_BASE.NB.NUM_FREQ_BIN),
   DYN_ALLOC_RESIZE(in0oms_LpXnz, $CVC_BASE.NB.NUM_FREQ_BIN),

   #if uses_AEC
      DYN_ALLOC_RESIZE(bufd_aec_inp,  FFT_WIN_FACTOR*$CVC_BASE.NB.NUM_FFT_WINDOW), 
      DYN_ALLOC_RESIZE(&ref_delay_buffer, MAX_REF_DELAY_NB),
      DYN_SET_VALUE(&ref_delay_stream + $cvc_stream.frmbuffer_struct.BUFFER_SIZE_FIELD, ADDR_PER_WORD * MAX_REF_DELAY_NB),
      #if defined(BLD_AEC2)
         DYN_ALLOC_RESIZE(GaMic1_real, $CVC_BASE.NB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(GaMic1_imag, $CVC_BASE.NB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(BExp_GaMic1, $CVC_BASE.NB.NUM_FREQ_BIN),
      #endif
      DYN_ALLOC_RESIZE(Ga_real, $CVC_BASE.NB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(Ga_imag, $CVC_BASE.NB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(BExp_Ga, $CVC_BASE.NB.NUM_FREQ_BIN),

      DYN_ALLOC_RESIZE(RcvBuf_real, $CVC_BASE.NB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(RcvBuf_imag, $CVC_BASE.NB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(BExp_X_buf, $M.CVC.AEC_Num_Primary_Taps+1),

      DYN_ALLOC_RESIZE(LPwrX0, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(LPwrX1, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(cng_mem, $CVC_BASE.NB.NUM_FREQ_BIN + $CVC_BASE.NB.NUM_FREQ_BIN),
   #endif
   #if defined(BLD_DMSS)
      DYN_ALLOC_RESIZE(PIZ0r, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(PIZ0i, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(PIZ1r, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(PIZ1i, $CVC_BASE.NB.NUM_FREQ_BIN),

      DYN_ALLOC_RESIZE(POZ0r, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(POZ0i, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(POZ1r, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(POZ1i, $CVC_BASE.NB.NUM_FREQ_BIN),
   #endif

#if uses_ASF
#if !defined(BLD_ASF200)
   DYN_ALLOC_RESIZE(x0_saved_real, $asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(x1_saved_real, $asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(z0_aux_real,   $asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(z1_aux_real,   $asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(x0_saved_imag, $asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(x1_saved_imag, $asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(z0_aux_imag,   $asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(z1_aux_imag,   $asf100.NUM_PROC),
#endif
#endif

   #if defined(BLD_FDFBC)
      DYN_ALLOC_RESIZE(g_time_fix, 2*($CVC_BASE.NB.NUM_FREQ_BIN-1)),
      DYN_ALLOC_RESIZE(fdfbc_hist_buf, $CVC_BASE.NB.SAMPLES_PER_FRAME-1),
      DYN_ALLOC_RESIZE(G_freq_fix_real, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(G_freq_fix_imag, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(G_fix_Bexp, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(X_fdfbc_real, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(X_fdfbc_imag, $CVC_BASE.NB.NUM_FREQ_BIN),
      
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.GFIX_ALIGN_REAL_SCRPTR, fdfbc_scratch_dm1),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.Y0_REAL_SCRPTR,    fdfbc_scratch_dm1 + 4*2*($CVC_BASE.NB.NUM_FREQ_BIN-1)),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.Y1_REAL_SCRPTR,    fdfbc_scratch_dm1 + 4*2*($CVC_BASE.NB.NUM_FREQ_BIN-1) + 4*$CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.Y2_REAL_SCRPTR,    fdfbc_scratch_dm1 + 4*2*($CVC_BASE.NB.NUM_FREQ_BIN-1) + 4*2*$CVC_BASE.NB.NUM_FREQ_BIN),
      
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.GFIX_ALIGN_IMAG_SCRPTR, fdfbc_scratch_dm2),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.Y0_IMAG_SCRPTR,    fdfbc_scratch_dm2 + 4*2*($CVC_BASE.NB.NUM_FREQ_BIN-1) + 4*$CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.Y1_IMAG_SCRPTR,    fdfbc_scratch_dm2 + 4*2*($CVC_BASE.NB.NUM_FREQ_BIN-1) + 4*2*$CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.Y2_IMAG_SCRPTR,    fdfbc_scratch_dm2 + 4*2*($CVC_BASE.NB.NUM_FREQ_BIN-1) + 4*3*$CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.dBExp_SCRPTR,      fdfbc_scratch_dm2 + 4*2*($CVC_BASE.NB.NUM_FREQ_BIN-1) + 4*4*$CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.FFT_STRUCT_SCRPTR, fdfbc_scratch_dm2 + 4*2*($CVC_BASE.NB.NUM_FREQ_BIN-1) + 4*5*$CVC_BASE.NB.NUM_FREQ_BIN),
      
      DYN_SET_VALUE(stream_dd0 + $cvc_stream.frmbuffer_struct.FRAME_PTR_FIELD, DD_r_real),
   #endif

   #if defined(BLD_FBC_IM)
      DYN_SET_VALUE(fbc_im + $fbc.SAMPLING_RATE_FIELD, 8000),
      DYN_ALLOC_RESIZE(fbc_im_g, FBC_IM_MAX_G_LENGTH * 2 / 2),
   #endif
   #if defined(BLD_OMS_IN0_IM)   
      DYN_ALLOC_RESIZE(in0oms_state_im, $CVC_BASE.NB.OMS280.STATELENGTH),
   #endif
   #if defined(BLD_AEC_IM) && (AEC_MAX_FREQ_INT==0)
      DYN_ALLOC_RESIZE(BExp_Ga_im, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(Ga_real_im, $CVC_BASE.NB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(Ga_imag_im, $CVC_BASE.NB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
   #endif
   #if defined(BLD_NS_IM)
      DYN_ALLOC_RESIZE(sndLpX_queue_im, $dms200.pbp.QUE_LENGTH_NB),
   #endif
   #if defined(BLD_SELFCLEAN)
      DYN_ALLOC_RESIZE(D_selfclean_real, $CVC_BASE.NB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_selfclean_imag, $CVC_BASE.NB.NUM_FREQ_BIN),
   #endif

   #if defined(BLD_EQ_MAP)
      DYN_ALLOC_RESIZE(EQ_map_ratio, $CVC_BASE.NB.NUM_FREQ_BIN * 2),
   #endif

#endif

#if defined(BLD_WB)   
      // -----------------------------------------------------------------------
      // Variants - WB
      // -----------------------------------------------------------------------

      DYN_VARIANT(DATA_VARIANT_WB),

   #if uses_NC
      DYN_SET_VALUE(nc100_obj + $nc100.NUM_FFT_FREQ_BIN_FIELD, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif
   
      DYN_SET_VALUE(&root + $cvc_send.data.fftwin_power, $cvc.POWER_ADJUST_WB_Q8_16),

   #if !defined(SND_HARM_OFF)
      DYN_ALLOC_RESIZE(harm_history, $CVC_BASE.WB.SAMPLES_PER_FRAME * 3),
   #endif
   
   #if defined(BLD_MLMASK)
      DYN_SET_VALUE(mlmask_obj + $mlfe100_library_c.MLFE100_STRUC_struct.INPUT_NUM_BINS_FIELD, ($CVC_BASE.WB.NUM_FREQ_BIN - 1)* HR_NUM_BINS_FACTOR ),
      DYN_SET_VALUE(mlmask_obj + $mlfe100_library_c.MLFE100_STRUC_struct.OUTPUT_NUM_BINS_FIELD, ($CVC_BASE.WB.NUM_FREQ_BIN - 1)* HR_NUM_BINS_FACTOR ),
      DYN_ALLOC_RESIZE(tensor_scratch, 2*($CVC_BASE.WB.NUM_FREQ_BIN - 1)* HR_NUM_BINS_FACTOR),
      DYN_ALLOC_RESIZE(mulaw_scratch, 2*($CVC_BASE.WB.NUM_FREQ_BIN - 1)* HR_NUM_BINS_FACTOR),
      DYN_ALLOC_RESIZE(swb_scratch_real, ($CVC_BASE.WB.NUM_FREQ_BIN )* HR_NUM_BINS_FACTOR ),
      DYN_ALLOC_RESIZE(swb_scratch_imag, ($CVC_BASE.WB.NUM_FREQ_BIN )* HR_NUM_BINS_FACTOR ),
   #endif

      DYN_ALLOC_RESIZE(X_real, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(X_imag, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_l_real, $CVC_BASE.WB.NUM_FREQ_BIN),
   #if defined(BLD_FDFBC)
      DYN_ALLOC_RESIZE(DD_r_real, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(DD_r_imag, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif
      DYN_ALLOC_RESIZE(D_l_imag, $CVC_BASE.WB.NUM_FREQ_BIN),
   #if CVC_DYN_NUM_MICS != 1 
      DYN_ALLOC_RESIZE(D_r_real, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_r_imag, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif       
   #if defined(BLD_3MIC)
      DYN_ALLOC_RESIZE(D_mic3_real, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_mic3_imag, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif

   #if defined(BLD_MBDRC)
      DYN_SET_VALUE(mbdrc100_in_buffer + $mbdrc100_library.mbdrc100_in_buffer_t_struct.NUM_BINS_FIELD, ($CVC_BASE.WB.NUM_FREQ_BIN - 1) * HR_NUM_BINS_FACTOR + 1),
   #endif

   #if uses_AEC
      DYN_ALLOC_RESIZE(W_ri, $CVC_BASE.WB.NUM_FREQ_BIN+1),
      DYN_ALLOC_RESIZE(L_adaptA, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(L_adaptR, $CVC_BASE.WB.NUM_FREQ_BIN),
      #if (uses_ASF) || !defined(RER_CNG_OFF)
         DYN_ALLOC_RESIZE(Dt_real, $aec530.RER_DIM),
         DYN_ALLOC_RESIZE(Et_real, $aec530.RER_DIM),
      #endif
      #if (uses_ASF) || defined(BLD_FDFBC)
         DYN_ALLOC_RESIZE(scratch_extra_dm1, MAX(1, CVC_MAX_SCRATCH_SIZE_DM1 - (2*$aec530.RER_DIM + 3*$CVC_BASE.WB.NUM_FREQ_BIN + 1))),
      #endif

      DYN_ALLOC_RESIZE(Exp_Mts_adapt, 2*$CVC_BASE.WB.NUM_FREQ_BIN),
      #if (uses_ASF) || !defined(RER_CNG_OFF)
         DYN_ALLOC_RESIZE(DTC_lin, $CVC_BASE.WB.NUM_FREQ_BIN),   
         DYN_ALLOC_RESIZE(Dt_imag, $aec530.RER_DIM),
         DYN_ALLOC_RESIZE(Et_imag, $aec530.RER_DIM),
      #endif
      #if CVC_SEND_MAJOR_CONFIG != 0
         DYN_ALLOC_RESIZE(rerdt_dtc, $CVC_BASE.WB.NUM_FREQ_BIN),
         #if (uses_ASF) || defined(BLD_FDFBC)
            DYN_ALLOC_RESIZE(scratch_extra_dm2, MAX(1, CVC_MAX_SCRATCH_SIZE_DM2 - ( 4*$CVC_BASE.WB.NUM_FREQ_BIN + 2*$aec530.RER_DIM))),
         #endif
      #else
         #if uses_ASF
            DYN_ALLOC_RESIZE(scratch_extra_dm2, MAX(1, CVC_MAX_SCRATCH_SIZE_DM2 - ( 3*$CVC_BASE.WB.NUM_FREQ_BIN + 2*$aec530.RER_DIM))),
         #endif
      #endif
   #else
      DYN_ALLOC_RESIZE(scratch_extra_dm1, CVC_MAX_SCRATCH_SIZE_DM1),
      DYN_ALLOC_RESIZE(scratch_extra_dm2, CVC_MAX_SCRATCH_SIZE_DM2),
   #endif

   #if !defined(BLD_VOICE_OFF)
      DYN_ALLOC_RESIZE(bufd_outp, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW + $CVC_BASE.WB.SAMPLES_PER_FRAME),
   #endif
   #if defined(BLD_VA)
      DYN_ALLOC_RESIZE(bufd_outp_va1, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW + $CVC_BASE.WB.SAMPLES_PER_FRAME),      
   #endif
   #if defined(BLD_SPK_VA)
      DYN_ALLOC_RESIZE(bufd_outp_va2, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW + $CVC_BASE.WB.SAMPLES_PER_FRAME),
      DYN_ALLOC_RESIZE(bufd_outp_va3, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW + $CVC_BASE.WB.SAMPLES_PER_FRAME),
      DYN_ALLOC_RESIZE(bufd_outp_va4, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW + $CVC_BASE.WB.SAMPLES_PER_FRAME),
   #endif
   #if defined(BLD_FDFBC)
      DYN_ALLOC_RESIZE(bufd_l_inp_pre_fdfbc, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW),
      DYN_ALLOC_RESIZE(scratch_extra_fdfbc, 6*$CVC_BASE.WB.NUM_FREQ_BIN),
   #endif
      DYN_ALLOC_RESIZE(bufd_l_inp, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW),
   #if CVC_DYN_NUM_MICS != 1 
      DYN_ALLOC_RESIZE(bufd_r_inp, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW),
   #endif
   #if defined(BLD_3MIC)
      DYN_ALLOC_RESIZE(bufd_mic3_inp, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW),
   #endif
   #if uses_NC
     DYN_ALLOC_RESIZE(nc_ctrl, $CVC_BASE.WB.NUM_FREQ_BIN),
     DYN_ALLOC_RESIZE(LRatio_interpolated, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif

   #if uses_IN0_OMS != 0
     DYN_ALLOC_RESIZE(in0oms_G, $CVC_BASE.WB.NUM_FREQ_BIN),
     DYN_ALLOC_RESIZE(in0oms_LpX_queue, $M.oms280.QUE_LENGTH),
     DYN_ALLOC_RESIZE(in0oms_state, $CVC_BASE.WB.OMS280.STATELENGTH),
   #endif

   #if defined(BLD_DMS_LINEAR)
     DYN_ALLOC_RESIZE(sndLpX_queue, $dms200.QUE_LENGTH),
   #else
     DYN_ALLOC_RESIZE(sndLpX_queue, $dms200.pbp.QUE_LENGTH_WB.USER),
     DYN_ALLOC_RESIZE(dms_state, $dms200.pbp.STATE_LENGTH),
   #endif

     DYN_ALLOC_RESIZE(G_dmsZ, $CVC_BASE.WB.NUM_FREQ_BIN),

   #if !defined(BLD_VOICE_OFF)
      DYN_ALLOC_RESIZE(AttenuationPersist, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(in0oms_LpXnz, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif

   #if uses_AEC
      DYN_ALLOC_RESIZE(bufd_aec_inp,  FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW), 
      #if !defined(BLD_SPK_VA)
         #if defined(BLD_AEC2)
            DYN_ALLOC_RESIZE(GaMic1_real, $CVC_BASE.WB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
            DYN_ALLOC_RESIZE(GaMic1_imag, $CVC_BASE.WB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
            DYN_ALLOC_RESIZE(BExp_GaMic1, $CVC_BASE.WB.NUM_FREQ_BIN),
   
            #if defined(BLD_AEC3)
               DYN_ALLOC_RESIZE(GaMic2_real, $CVC_BASE.WB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
               DYN_ALLOC_RESIZE(GaMic2_imag, $CVC_BASE.WB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
               DYN_ALLOC_RESIZE(BExp_GaMic2, $CVC_BASE.WB.NUM_FREQ_BIN),
            #endif
         #endif
      #else
         #if defined(BLD_AEC2)
            DYN_ALLOC_RESIZE(GaMic1_real, $aec530.RER_DIM * $M.CVC.AEC_Num_Primary_Taps),
            DYN_ALLOC_RESIZE(GaMic1_imag, $aec530.RER_DIM * $M.CVC.AEC_Num_Primary_Taps),
            DYN_ALLOC_RESIZE(BExp_GaMic1, $aec530.RER_DIM),
   
            #if defined(BLD_AEC3)
               DYN_ALLOC_RESIZE(GaMic2_real, $aec530.RER_DIM * $M.CVC.AEC_Num_Primary_Taps),
               DYN_ALLOC_RESIZE(GaMic2_imag, $aec530.RER_DIM * $M.CVC.AEC_Num_Primary_Taps),
               DYN_ALLOC_RESIZE(BExp_GaMic2, $aec530.RER_DIM),
            #endif
         #endif
      #endif
      DYN_ALLOC_RESIZE(Ga_real, $CVC_BASE.WB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(Ga_imag, $CVC_BASE.WB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(BExp_Ga, $CVC_BASE.WB.NUM_FREQ_BIN),

      DYN_ALLOC_RESIZE(RcvBuf_real, $CVC_BASE.WB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(RcvBuf_imag, $CVC_BASE.WB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(BExp_X_buf, $M.CVC.AEC_Num_Primary_Taps+1),

      DYN_ALLOC_RESIZE(LPwrX0, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(LPwrX1, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif

   #if defined(BLD_DMSS)
      DYN_ALLOC_RESIZE(PIZ0r, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(PIZ0i, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(PIZ1r, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(PIZ1i, $CVC_BASE.WB.NUM_FREQ_BIN),

      DYN_ALLOC_RESIZE(POZ0r, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(POZ0i, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(POZ1r, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(POZ1i, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif

#if uses_ASF
#if !defined(BLD_ASF200)
   DYN_ALLOC_RESIZE(x0_saved_real, 2*$asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(x1_saved_real, 2*$asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(z0_aux_real,   2*$asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(z1_aux_real,   2*$asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(x0_saved_imag, 2*$asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(x1_saved_imag, 2*$asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(z0_aux_imag,   2*$asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(z1_aux_imag,   2*$asf100.NUM_PROC),
#endif
#endif

   #if defined(BLD_FDFBC)
      DYN_ALLOC_RESIZE(g_time_fix, 2*($CVC_BASE.WB.NUM_FREQ_BIN-1)),
      DYN_ALLOC_RESIZE(fdfbc_hist_buf, $CVC_BASE.WB.SAMPLES_PER_FRAME-1),
      DYN_ALLOC_RESIZE(G_freq_fix_real, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(G_freq_fix_imag, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(G_fix_Bexp, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(X_fdfbc_real, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(X_fdfbc_imag, $CVC_BASE.WB.NUM_FREQ_BIN),
      
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.GFIX_ALIGN_REAL_SCRPTR, fdfbc_scratch_dm1),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.Y0_REAL_SCRPTR,    fdfbc_scratch_dm1 + 4*2*($CVC_BASE.WB.NUM_FREQ_BIN-1)),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.Y1_REAL_SCRPTR,    fdfbc_scratch_dm1 + 4*2*($CVC_BASE.WB.NUM_FREQ_BIN-1) + 4*$CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.Y2_REAL_SCRPTR,    fdfbc_scratch_dm2),
      
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.GFIX_ALIGN_IMAG_SCRPTR, fdfbc_scratch_dm2 + 4*1*($CVC_BASE.WB.NUM_FREQ_BIN-1)),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.Y0_IMAG_SCRPTR,    fdfbc_scratch_dm2 + 4*1*($CVC_BASE.WB.NUM_FREQ_BIN-1) + 4*2*($CVC_BASE.WB.NUM_FREQ_BIN-1)),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.Y1_IMAG_SCRPTR,    scratch_extra_fdfbc),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.Y2_IMAG_SCRPTR,    scratch_extra_fdfbc + 4*1*$CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.dBExp_SCRPTR,      scratch_extra_fdfbc + 4*2*$CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_SET_VALUE(fdfbc0_obj + $fdfbc.FFT_STRUCT_SCRPTR, scratch_extra_fdfbc + 4*3*$CVC_BASE.WB.NUM_FREQ_BIN),

      DYN_SET_VALUE(stream_dd0 + $cvc_stream.frmbuffer_struct.FRAME_PTR_FIELD, DD_r_real),
   #endif
   
   #if defined(BLD_SELFCLEAN)
      DYN_ALLOC_RESIZE(D_selfclean_real, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_selfclean_imag, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif
   #if defined(BLD_EQ_MAP)
      DYN_ALLOC_RESIZE(EQ_map_ratio, $CVC_BASE.WB.NUM_FREQ_BIN * 2),
   #endif
   
   #if defined(BLD_MLMASK)
         DYN_ALLOC_RESIZE(freq_delay_buffer_ext, (2*($CVC_BASE.WB.NUM_FREQ_BIN * HR_NUM_BINS_FACTOR)+1) * $MAX_DELAY_FRAMES),
         DYN_SET_VALUE(chdelay_obj_ext + $chdelay100.NUM_BINS, $CVC_BASE.WB.NUM_FREQ_BIN * HR_NUM_BINS_FACTOR),
         DYN_ALLOC_RESIZE(freq_delay_buffer_swb, (2*($CVC_BASE.WB.NUM_FREQ_BIN * HR_NUM_BINS_FACTOR)+1) * $MAX_DELAY_FRAMES),
         DYN_SET_VALUE(chdelay_obj_swb + $chdelay100.NUM_BINS, $CVC_BASE.WB.NUM_FREQ_BIN * HR_NUM_BINS_FACTOR),
   #endif

#endif

#ifdef INSTALL_OPERATOR_CVC_24K
   #if defined(BLD_UWB)
      // -----------------------------------------------------------------------
      // Variants - UWB
      // -----------------------------------------------------------------------
      DYN_VARIANT(DATA_VARIANT_UWB),

   #if uses_NC
      DYN_SET_VALUE(nc100_obj + $nc100.NUM_FFT_FREQ_BIN_FIELD, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif

      DYN_SET_VALUE(&root + $cvc_send.data.fftwin_power, $cvc.POWER_ADJUST_WB_Q8_16),

   #if !defined(SND_HARM_OFF)
      DYN_ALLOC_RESIZE(harm_history, $CVC_BASE.WB.SAMPLES_PER_FRAME * 4),
   #endif

      DYN_ALLOC_RESIZE(X_real, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(X_imag, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_l_real, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_l_imag, $CVC_BASE.WB.NUM_FREQ_BIN),
   #if CVC_DYN_NUM_MICS != 1 
      DYN_ALLOC_RESIZE(D_r_real, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_r_imag, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif      
   #if defined(BLD_3MIC)
      DYN_ALLOC_RESIZE(D_mic3_real, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_mic3_imag, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif

   #if defined(BLD_MBDRC)
      DYN_SET_VALUE(mbdrc100_in_buffer + $mbdrc100_library.mbdrc100_in_buffer_t_struct.NUM_BINS_FIELD, ($CVC_BASE.WB.NUM_FREQ_BIN - 1) * HR_NUM_BINS_FACTOR + 1),
   #endif

   #if uses_AEC
      DYN_ALLOC_RESIZE(W_ri, $aec530.DIM.UWB+1),
      DYN_ALLOC_RESIZE(L_adaptA, $aec530.DIM.UWB),
      DYN_ALLOC_RESIZE(L_adaptR, $aec530.DIM.UWB),
      #if (uses_ASF) || !defined(RER_CNG_OFF)
         DYN_ALLOC_RESIZE(Dt_real, $aec530.RER_DIM.UWB),
         DYN_ALLOC_RESIZE(Et_real, $aec530.RER_DIM.UWB),
      #endif
      #if uses_ASF
         DYN_ALLOC_RESIZE(scratch_extra_dm1, MAX(1, CVC_MAX_SCRATCH_SIZE_DM1 - (2*$aec530.RER_DIM.UWB + 3*$aec530.DIM.UWB + 1))),
      #elif defined(BLD_AEC_HDM)
         DYN_ALLOC_RESIZE(scratch_extra_dm1, MAX(1, 2*$CVC_BASE.FFT_BUFFER_SIZE.WB - (2*$aec530.RER_DIM.UWB + 3*$aec530.DIM.UWB + 1))),
      #endif

      DYN_ALLOC_RESIZE(Exp_Mts_adapt, 2*$aec530.DIM.UWB),
      #if (uses_ASF) || !defined(RER_CNG_OFF)
         DYN_ALLOC_RESIZE(DTC_lin, $aec530.DIM.UWB),   
         DYN_ALLOC_RESIZE(Dt_imag, $aec530.RER_DIM.UWB),
         DYN_ALLOC_RESIZE(Et_imag, $aec530.RER_DIM.UWB),
      #endif
      #if CVC_SEND_MAJOR_CONFIG != 0
         DYN_ALLOC_RESIZE(rerdt_dtc, $aec530.DIM.UWB),
         #if uses_ASF
            DYN_ALLOC_RESIZE(scratch_extra_dm2, MAX(1,CVC_MAX_SCRATCH_SIZE_DM2 - ( 4*$aec530.DIM.UWB + 2*$aec530.RER_DIM.UWB))),
         #endif
      #else
         #if uses_ASF
            DYN_ALLOC_RESIZE(scratch_extra_dm2, MAX(1,CVC_MAX_SCRATCH_SIZE_DM2 - ( 3*$aec530.DIM.UWB + 2*$aec530.RER_DIM.UWB))),
         #endif
      #endif
   #else
      DYN_ALLOC_RESIZE(scratch_extra_dm1, CVC_MAX_SCRATCH_SIZE_DM1),
      DYN_ALLOC_RESIZE(scratch_extra_dm2, CVC_MAX_SCRATCH_SIZE_DM2),
   #endif

      DYN_ALLOC_RESIZE(bufd_outp, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW + $CVC_BASE.WB.SAMPLES_PER_FRAME),
   #if defined(BLD_VA)
      DYN_ALLOC_RESIZE(bufd_outp_va1, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW + $CVC_BASE.WB.SAMPLES_PER_FRAME),   
   #endif
   #if defined(BLD_SPK_VA)
      DYN_ALLOC_RESIZE(bufd_outp_va2, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW + $CVC_BASE.WB.SAMPLES_PER_FRAME),
      DYN_ALLOC_RESIZE(bufd_outp_va3, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW + $CVC_BASE.WB.SAMPLES_PER_FRAME),
      DYN_ALLOC_RESIZE(bufd_outp_va4, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW + $CVC_BASE.WB.SAMPLES_PER_FRAME),
   #endif      
      DYN_ALLOC_RESIZE(bufd_l_inp, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW),
   #if CVC_DYN_NUM_MICS != 1 
      DYN_ALLOC_RESIZE(bufd_r_inp, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW),
   #endif
   #if defined(BLD_3MIC)
      DYN_ALLOC_RESIZE(bufd_mic3_inp, FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW),
   #endif
   #if uses_NC
     DYN_ALLOC_RESIZE(nc_ctrl, $CVC_BASE.WB.NUM_FREQ_BIN),
     DYN_ALLOC_RESIZE(LRatio_interpolated, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif

   #if uses_IN0_OMS != 0 
     DYN_ALLOC_RESIZE(in0oms_G, $CVC_BASE.WB.NUM_FREQ_BIN),
     DYN_ALLOC_RESIZE(in0oms_LpX_queue, $M.oms280.QUE_LENGTH_UWB_FB),
     DYN_ALLOC_RESIZE(in0oms_state, $CVC_BASE.WB.OMS280.STATELENGTH),
   #endif

   #if defined(BLD_DMS_LINEAR)
     DYN_ALLOC_RESIZE(sndLpX_queue, $dms200.QUE_LENGTH_UWB_FB),
   #else
     DYN_ALLOC_RESIZE(sndLpX_queue, $dms200.pbp.QUE_LENGTH_UWB),
     DYN_ALLOC_RESIZE(dms_state, $dms200.pbp.STATE_LENGTH),
   #endif

     DYN_ALLOC_RESIZE(G_dmsZ, $CVC_BASE.WB.NUM_FREQ_BIN),

   DYN_ALLOC_RESIZE(AttenuationPersist, $CVC_BASE.WB.NUM_FREQ_BIN),
   DYN_ALLOC_RESIZE(in0oms_LpXnz, $CVC_BASE.WB.NUM_FREQ_BIN),

   #if uses_AEC
      DYN_ALLOC_RESIZE(bufd_aec_inp,  FFT_WIN_FACTOR*$CVC_BASE.WB.NUM_FFT_WINDOW),    
      #if defined(BLD_AEC2)
         DYN_ALLOC_RESIZE(GaMic1_real, $aec530.DIM.UWB * $M.CVC_UWB.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(GaMic1_imag, $aec530.DIM.UWB * $M.CVC_UWB.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(BExp_GaMic1, $aec530.DIM.UWB),
      #endif

      DYN_ALLOC_RESIZE(Ga_real, $aec530.DIM.UWB * $M.CVC_UWB.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(Ga_imag, $aec530.DIM.UWB * $M.CVC_UWB.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(BExp_Ga, $aec530.DIM.UWB),

      DYN_ALLOC_RESIZE(RcvBuf_real, $aec530.DIM.UWB * $M.CVC_UWB.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(RcvBuf_imag, $aec530.DIM.UWB * $M.CVC_UWB.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(BExp_X_buf, $M.CVC_UWB.AEC_Num_Primary_Taps+1),

      DYN_ALLOC_RESIZE(RatFE, $aec530.RER_DIM.UWB),
      DYN_ALLOC_RESIZE(rer_mem, $aec530.RER_DIM.UWB * $aec530.RER_VEC),

      #if defined(BLD_AEC_AUX)
        DYN_ALLOC_RESIZE(Gb_real, $aec530.RER_DIM.UWB * $M.CVC_UWB.AEC_Num_Auxillary_Taps),
        DYN_ALLOC_RESIZE(Gb_imag, $aec530.RER_DIM.UWB * $M.CVC_UWB.AEC_Num_Auxillary_Taps),
        DYN_ALLOC_RESIZE(BExp_Gb, $aec530.RER_DIM.UWB),
        DYN_ALLOC_RESIZE(L_RatSqG, $aec530.RER_DIM.UWB),
      #endif

      DYN_ALLOC_RESIZE(LPwrX0, $aec530.DIM.UWB),
      DYN_ALLOC_RESIZE(LPwrX1, $aec530.DIM.UWB),
      DYN_ALLOC_RESIZE(cng_mem, $CVC_BASE.WB.NUM_FREQ_BIN + $aec530.DIM.UWB),
   #endif
   #if defined(BLD_DMSS)
      DYN_ALLOC_RESIZE(PIZ0r, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(PIZ0i, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(PIZ1r, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(PIZ1i, $CVC_BASE.WB.NUM_FREQ_BIN),

      DYN_ALLOC_RESIZE(POZ0r, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(POZ0i, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(POZ1r, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(POZ1i, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif

#if uses_ASF
#if !defined(BLD_ASF200)
   DYN_ALLOC_RESIZE(x0_saved_real, 2*$asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(x1_saved_real, 2*$asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(z0_aux_real,   2*$asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(z1_aux_real,   2*$asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(x0_saved_imag, 2*$asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(x1_saved_imag, 2*$asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(z0_aux_imag,   2*$asf100.NUM_PROC),
   DYN_ALLOC_RESIZE(z1_aux_imag,   2*$asf100.NUM_PROC),
#endif
#endif

   #if defined(BLD_FBC_IM)
      DYN_SET_VALUE(fbc_im + $fbc.SAMPLING_RATE_FIELD, 24000),
      DYN_ALLOC_RESIZE(fbc_im_g, FBC_IM_MAX_G_LENGTH * 2 * 1),
   #endif
   #if defined(BLD_OMS_IN0_IM)   
      DYN_ALLOC_RESIZE(in0oms_LpX_queue_im, $M.oms280.QUE_LENGTH_UWB_FB),
   #endif
   #if defined(BLD_AEC_IM)
      #if (AEC_MAX_FREQ_INT==0)
         DYN_ALLOC_RESIZE(Ga_real_im, $aec530.DIM.UWB * $M.CVC_UWB.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(Ga_imag_im, $aec530.DIM.UWB * $M.CVC_UWB.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(BExp_Ga_im, $aec530.DIM.UWB),
      #else
         DYN_ALLOC_RESIZE(Ga_real_im, ($aec530.RER_DIM.UWB+1) * $M.CVC_UWB.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(Ga_imag_im, ($aec530.RER_DIM.UWB+1) * $M.CVC_UWB.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(BExp_Ga_im, ($aec530.RER_DIM.UWB+1)),
      #endif

      DYN_ALLOC_RESIZE(RatFE_im, $aec530.RER_DIM.UWB),
      DYN_ALLOC_RESIZE(rer_mem_im, $aec530.RER_DIM.UWB * $aec530.RER_VEC),

      #if defined(BLD_AEC_AUX_IM)
         DYN_ALLOC_RESIZE(Gb_real_im, $aec530.RER_DIM.UWB * $M.CVC_UWB.AEC_Num_Auxillary_Taps),
         DYN_ALLOC_RESIZE(Gb_imag_im, $aec530.RER_DIM.UWB * $M.CVC_UWB.AEC_Num_Auxillary_Taps),
         DYN_ALLOC_RESIZE(BExp_Gb_im, $aec530.RER_DIM.UWB),
         DYN_ALLOC_RESIZE(L_RatSqG_im, $aec530.RER_DIM.UWB),
      #endif
   #endif
   #if defined(BLD_NS_IM)
      DYN_ALLOC_RESIZE(sndLpX_queue_im, $dms200.pbp.QUE_LENGTH_UWB),
      DYN_ALLOC_RESIZE(dms_state_im, $dms200.pbp.STATE_LENGTH),
   #endif
   #if defined(BLD_SELFCLEAN)
      DYN_ALLOC_RESIZE(D_selfclean_real, $CVC_BASE.WB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_selfclean_imag, $CVC_BASE.WB.NUM_FREQ_BIN),
   #endif
   #if defined(BLD_EQ_MAP)
      DYN_ALLOC_RESIZE(EQ_map_ratio, $CVC_BASE.WB.NUM_FREQ_BIN * 2),
   #endif

#endif // BLD_UWB
#endif // INSTALL_OPERATOR_CVC_24K

#ifdef INSTALL_OPERATOR_CVC_32K
#if defined(BLD_SWB)
      // -----------------------------------------------------------------------
      // Variants - SWB
      // -----------------------------------------------------------------------

      DYN_VARIANT(DATA_VARIANT_SWB),

      DYN_SET_VALUE(&fft_obj+$M.filter_bank.fft.CBUF_ADDR_FIELD, fft_real_scratch+($CVC_BASE.FFT_BUFFER_SIZE.HD * MK1)),

   #if uses_NC
      DYN_SET_VALUE(nc100_obj + $nc100.NUM_FFT_FREQ_BIN_FIELD, $CVC_BASE.SWB.NUM_FREQ_BIN),
   #endif
   
   #if defined(BLD_MLMASK)
      DYN_SET_VALUE(mlmask_obj + $mlfe100_library_c.MLFE100_STRUC_struct.INPUT_NUM_BINS_FIELD, ($CVC_BASE.SWB.NUM_FREQ_BIN - 1)* HR_NUM_BINS_FACTOR),
      DYN_SET_VALUE(mlmask_obj + $mlfe100_library_c.MLFE100_STRUC_struct.OUTPUT_NUM_BINS_FIELD, ($CVC_BASE.SWB.NUM_FREQ_BIN - 1)* HR_NUM_BINS_FACTOR),
      DYN_ALLOC_RESIZE(tensor_scratch, (2*($CVC_BASE.SWB.NUM_FREQ_BIN -1)* HR_NUM_BINS_FACTOR)/2),
      DYN_ALLOC_RESIZE(swb_scratch_real, $CVC_BASE.SWB.NUM_FREQ_BIN * HR_NUM_BINS_FACTOR),
      DYN_ALLOC_RESIZE(swb_scratch_imag, $CVC_BASE.SWB.NUM_FREQ_BIN * HR_NUM_BINS_FACTOR),
      DYN_ALLOC_RESIZE(mulaw_scratch, 2*($CVC_BASE.SWB.NUM_FREQ_BIN - 1)* HR_NUM_BINS_FACTOR),
   #endif

      DYN_SET_VALUE(&root + $cvc_send.data.fftwin_power, $cvc.POWER_ADJUST_SWB_Q8_16),

   #if !defined(SND_HARM_OFF)
      DYN_ALLOC_RESIZE(harm_history, $CVC_BASE.SWB.SAMPLES_PER_FRAME * 3),
   #endif

      DYN_ALLOC_RESIZE(X_real, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(X_imag, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_l_real, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_l_imag, $CVC_BASE.SWB.NUM_FREQ_BIN),
   #if CVC_DYN_NUM_MICS != 1 
      DYN_ALLOC_RESIZE(D_r_real, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_r_imag, $CVC_BASE.SWB.NUM_FREQ_BIN),
   #endif   
   #if defined(BLD_3MIC)
      DYN_ALLOC_RESIZE(D_mic3_real, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_mic3_imag, $CVC_BASE.SWB.NUM_FREQ_BIN),
   #endif   

   #if defined(BLD_MBDRC)
      DYN_SET_VALUE(mbdrc100_in_buffer + $mbdrc100_library.mbdrc100_in_buffer_t_struct.NUM_BINS_FIELD, ($CVC_BASE.SWB.NUM_FREQ_BIN - 1) * HR_NUM_BINS_FACTOR + 1),
   #endif

   #if uses_AEC
      DYN_ALLOC_RESIZE(W_ri, $aec530.DIM.SWB+1),
      DYN_ALLOC_RESIZE(L_adaptA, $aec530.DIM.SWB),
      DYN_ALLOC_RESIZE(L_adaptR, $aec530.DIM.SWB),
      #if (uses_ASF) || !defined(RER_CNG_OFF)
         DYN_ALLOC_RESIZE(Dt_real, $aec530.RER_DIM),
         DYN_ALLOC_RESIZE(Et_real, $aec530.RER_DIM),
      #endif
      #if uses_ASF
         DYN_ALLOC_RESIZE(scratch_extra_dm1, MAX(1, CVC_MAX_SCRATCH_SIZE_DM1 - (2*$aec530.RER_DIM + 3*$aec530.DIM.SWB + 1))),
      #elif defined(BLD_AEC_HDM)
         DYN_ALLOC_RESIZE(scratch_extra_dm1, MAX(1, (2*$CVC_BASE.FFT_BUFFER_SIZE.HD) - (2*$aec530.RER_DIM + 3*$aec530.DIM.SWB + 1))),
      #endif

      DYN_ALLOC_RESIZE(Exp_Mts_adapt, 2*$aec530.DIM.SWB),
      #if (uses_ASF) || !defined(RER_CNG_OFF)
         DYN_ALLOC_RESIZE(DTC_lin, $aec530.DIM.SWB),
         DYN_ALLOC_RESIZE(Dt_imag, $aec530.RER_DIM),
         DYN_ALLOC_RESIZE(Et_imag, $aec530.RER_DIM),
      #endif
      #if CVC_SEND_MAJOR_CONFIG != 0
         DYN_ALLOC_RESIZE(rerdt_dtc, $aec530.DIM.SWB),
         #if uses_ASF
            DYN_ALLOC_RESIZE(scratch_extra_dm2, MAX(1,CVC_MAX_SCRATCH_SIZE_DM2 - ( 4*$aec530.DIM.SWB + 2*$aec530.RER_DIM))),
         #endif
      #else
         #if uses_ASF
            DYN_ALLOC_RESIZE(scratch_extra_dm2, MAX(1,CVC_MAX_SCRATCH_SIZE_DM2 - ( 3*$aec530.DIM.SWB + 2*$aec530.RER_DIM))),
         #endif
      #endif
   #else
      DYN_ALLOC_RESIZE(scratch_extra_dm1, CVC_MAX_SCRATCH_SIZE_DM1),
      DYN_ALLOC_RESIZE(scratch_extra_dm2, CVC_MAX_SCRATCH_SIZE_DM2),
   #endif

      DYN_ALLOC_RESIZE(bufd_outp, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW + $CVC_BASE.SWB.SAMPLES_PER_FRAME),
   #if defined(BLD_VA)
      DYN_ALLOC_RESIZE(bufd_outp_va1, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW + $CVC_BASE.SWB.SAMPLES_PER_FRAME),   
   #endif
   #if defined(BLD_SPK_VA)
      DYN_ALLOC_RESIZE(bufd_outp_va2, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW + $CVC_BASE.SWB.SAMPLES_PER_FRAME),
      DYN_ALLOC_RESIZE(bufd_outp_va3, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW + $CVC_BASE.SWB.SAMPLES_PER_FRAME),
      DYN_ALLOC_RESIZE(bufd_outp_va4, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW + $CVC_BASE.SWB.SAMPLES_PER_FRAME),
   #endif
      DYN_ALLOC_RESIZE(bufd_l_inp, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW),
   #if CVC_DYN_NUM_MICS != 1 
      DYN_ALLOC_RESIZE(bufd_r_inp, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW),
   #endif
   #if defined(BLD_3MIC)
      DYN_ALLOC_RESIZE(bufd_mic3_inp, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW),
   #endif
   #if defined(BLD_MLMASK)
      DYN_ALLOC_RESIZE(bufd_ml_inp, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW.HR),
      DYN_ALLOC_RESIZE(bufd_ml_outp, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW.HR + $CVC_BASE.SWB.SAMPLES_PER_FRAME),
   #endif

   #if uses_NC
     DYN_ALLOC_RESIZE(nc_ctrl, $CVC_BASE.SWB.NUM_FREQ_BIN),
     DYN_ALLOC_RESIZE(LRatio_interpolated, $CVC_BASE.SWB.NUM_FREQ_BIN),
   #endif

   #if uses_IN0_OMS != 0
     DYN_ALLOC_RESIZE(in0oms_G, $CVC_BASE.SWB.NUM_FREQ_BIN),
     DYN_ALLOC_RESIZE(in0oms_LpX_queue, $M.oms280.QUE_LENGTH),
     DYN_ALLOC_RESIZE(in0oms_state, $CVC_BASE.SWB.OMS280.STATELENGTH),
   #endif

   #if defined(BLD_DMS_LINEAR)
     DYN_ALLOC_RESIZE(sndLpX_queue, $dms200.QUE_LENGTH),
   #else
     DYN_ALLOC_RESIZE(sndLpX_queue, $dms200.pbp.QUE_LENGTH_SWB),
     DYN_ALLOC_RESIZE(dms_state, $dms200.pbp.STATE_LENGTH_SWB_FB),
   #endif

     DYN_ALLOC_RESIZE(G_dmsZ, $CVC_BASE.SWB.NUM_FREQ_BIN),

   DYN_ALLOC_RESIZE(AttenuationPersist, $CVC_BASE.SWB.NUM_FREQ_BIN),
   DYN_ALLOC_RESIZE(in0oms_LpXnz, $CVC_BASE.SWB.NUM_FREQ_BIN),

   #if uses_AEC
      DYN_ALLOC_RESIZE(bufd_aec_inp,  FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW),   
      DYN_ALLOC_RESIZE(&ref_delay_buffer, MAX_REF_DELAY_FB),
      DYN_SET_VALUE(&ref_delay_stream + $cvc_stream.frmbuffer_struct.BUFFER_SIZE_FIELD, ADDR_PER_WORD * MAX_REF_DELAY_FB),  
      #if defined(BLD_AEC2)
         DYN_ALLOC_RESIZE(GaMic1_real, $aec530.DIM.SWB * $M.CVC.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(GaMic1_imag, $aec530.DIM.SWB * $M.CVC.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(BExp_GaMic1, $aec530.DIM.SWB),
      #endif
      DYN_ALLOC_RESIZE(Ga_real, $aec530.DIM.SWB * $M.CVC.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(Ga_imag, $aec530.DIM.SWB * $M.CVC.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(BExp_Ga, $aec530.DIM.SWB),

      DYN_ALLOC_RESIZE(RcvBuf_real, $aec530.DIM.SWB * $M.CVC.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(RcvBuf_imag, $aec530.DIM.SWB * $M.CVC.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(BExp_X_buf, $M.CVC.AEC_Num_Primary_Taps+1),

      DYN_ALLOC_RESIZE(LPwrX0, $aec530.DIM.SWB),
      DYN_ALLOC_RESIZE(LPwrX1, $aec530.DIM.SWB),
      DYN_ALLOC_RESIZE(cng_mem, $CVC_BASE.SWB.NUM_FREQ_BIN + $aec530.DIM.SWB),
   #endif
   #if defined(BLD_DMSS)
      DYN_ALLOC_RESIZE(PIZ0r, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(PIZ0i, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(PIZ1r, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(PIZ1i, $CVC_BASE.SWB.NUM_FREQ_BIN),

      DYN_ALLOC_RESIZE(POZ0r, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(POZ0i, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(POZ1r, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(POZ1i, $CVC_BASE.SWB.NUM_FREQ_BIN),
   #endif

#if uses_ASF
#if !defined(BLD_ASF200)
   DYN_ALLOC_RESIZE(x0_saved_real, $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
   DYN_ALLOC_RESIZE(x1_saved_real, $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
   DYN_ALLOC_RESIZE(z0_aux_real,   $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
   DYN_ALLOC_RESIZE(z1_aux_real,   $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
   DYN_ALLOC_RESIZE(x0_saved_imag, $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
   DYN_ALLOC_RESIZE(x1_saved_imag, $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
   DYN_ALLOC_RESIZE(z0_aux_imag,   $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
   DYN_ALLOC_RESIZE(z1_aux_imag,   $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
#endif
#endif

   #if defined(BLD_FBC_IM)
      #if !defined(BLD_FBC_IM_RESAMPLER)
         DYN_SET_VALUE(fbc_im + $fbc.SAMPLING_RATE_FIELD, 32000),
         DYN_ALLOC_RESIZE(fbc_im_g, FBC_IM_MAX_G_LENGTH * 2 * 2),
      #else
         DYN_SET_VALUE(fbc_im + $fbc.STREAM_D_FIELD, stream_im_wb),
         DYN_SET_VALUE(fbc_im + $fbc.STREAM_X_FIELD, stream_ref_wb),
      #endif
   #endif
   #if defined(BLD_OMS_IN0_IM)   
      DYN_ALLOC_RESIZE(in0oms_state_im, $CVC_BASE.SWB.OMS280.STATELENGTH),
   #endif
   #if defined(BLD_AEC_IM) && (AEC_MAX_FREQ_INT==0)
      DYN_ALLOC_RESIZE(BExp_Ga_im, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(Ga_real_im, $CVC_BASE.SWB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(Ga_imag_im, $CVC_BASE.SWB.NUM_FREQ_BIN * $M.CVC.AEC_Num_Primary_Taps),
   #endif
   #if defined(BLD_NS_IM)
      DYN_ALLOC_RESIZE(sndLpX_queue_im, $dms200.pbp.QUE_LENGTH_SWB),
      DYN_ALLOC_RESIZE(dms_state_im, $dms200.pbp.STATE_LENGTH_SWB_FB),
   #endif
   #if defined(BLD_SELFCLEAN)
      DYN_ALLOC_RESIZE(D_selfclean_real, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_selfclean_imag, $CVC_BASE.SWB.NUM_FREQ_BIN),
   #endif

   #if defined(BLD_EQ_MAP)
      DYN_ALLOC_RESIZE(EQ_map_ratio, $CVC_BASE.SWB.NUM_FREQ_BIN * 2),
   #endif
   
   #if defined(BLD_MLMASK)
         DYN_ALLOC_RESIZE(freq_delay_buffer_ext, (2*($CVC_BASE.WB.NUM_FREQ_BIN * HR_NUM_BINS_FACTOR)+1) * $MAX_DELAY_FRAMES),
         DYN_SET_VALUE(chdelay_obj_ext + $chdelay100.NUM_BINS, $CVC_BASE.WB.NUM_FREQ_BIN * HR_NUM_BINS_FACTOR),
         DYN_ALLOC_RESIZE(freq_delay_buffer_swb, (2*($CVC_BASE.SWB.NUM_FREQ_BIN * HR_NUM_BINS_FACTOR)+1) * $MAX_DELAY_FRAMES),
         DYN_SET_VALUE(chdelay_obj_swb + $chdelay100.NUM_BINS, $CVC_BASE.SWB.NUM_FREQ_BIN * HR_NUM_BINS_FACTOR),
   #endif

#endif // BLD_SWB
#endif // INSTALL_OPERATOR_CVC_32K

#ifdef INSTALL_OPERATOR_CVC_48K
   #if defined(BLD_FB)
      // -----------------------------------------------------------------------
      // Variants - FB
      // -----------------------------------------------------------------------

      DYN_VARIANT(DATA_VARIANT_FB),

      DYN_SET_VALUE(&fft_obj+$M.filter_bank.fft.CBUF_ADDR_FIELD, fft_real_scratch+($CVC_BASE.FFT_BUFFER_SIZE.HD * MK1)),

   #if uses_NC
      DYN_SET_VALUE(nc100_obj + $nc100.NUM_FFT_FREQ_BIN_FIELD, $CVC_BASE.SWB.NUM_FREQ_BIN),
   #endif
   
      DYN_SET_VALUE(&root + $cvc_send.data.fftwin_power, $cvc.POWER_ADJUST_SWB_Q8_16),

   #if !defined(SND_HARM_OFF)
      DYN_ALLOC_RESIZE(harm_history, $CVC_BASE.SWB.SAMPLES_PER_FRAME * 4),
   #endif

      DYN_ALLOC_RESIZE(X_real, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(X_imag, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_l_real, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_l_imag, $CVC_BASE.SWB.NUM_FREQ_BIN),
   #if CVC_DYN_NUM_MICS != 1 
      DYN_ALLOC_RESIZE(D_r_real, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_r_imag, $CVC_BASE.SWB.NUM_FREQ_BIN),
   #endif      
   #if defined(BLD_3MIC)
      DYN_ALLOC_RESIZE(D_mic3_real, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_mic3_imag, $CVC_BASE.SWB.NUM_FREQ_BIN),
   #endif   

   #if defined(BLD_MBDRC)
      DYN_SET_VALUE(mbdrc100_in_buffer + $mbdrc100_library.mbdrc100_in_buffer_t_struct.NUM_BINS_FIELD, ($CVC_BASE.SWB.NUM_FREQ_BIN - 1) * HR_NUM_BINS_FACTOR + 1),
   #endif

   #if uses_AEC
      DYN_ALLOC_RESIZE(W_ri, $aec530.DIM.FB+1),
      DYN_ALLOC_RESIZE(L_adaptA, $aec530.DIM.FB),
      DYN_ALLOC_RESIZE(L_adaptR, $aec530.DIM.FB),
      #if (uses_ASF) || !defined(RER_CNG_OFF)
         DYN_ALLOC_RESIZE(Dt_real, $aec530.RER_DIM.UWB),
         DYN_ALLOC_RESIZE(Et_real, $aec530.RER_DIM.UWB),
      #endif
      #if uses_ASF
         DYN_ALLOC_RESIZE(scratch_extra_dm1, MAX(1, CVC_MAX_SCRATCH_SIZE_DM1 - (2*$aec530.RER_DIM.UWB + 3*$aec530.DIM.FB + 1))),
      #elif defined(BLD_AEC_HDM)
         DYN_ALLOC_RESIZE(scratch_extra_dm1, MAX(1, (2*$CVC_BASE.FFT_BUFFER_SIZE.HD) - (2*$aec530.RER_DIM.UWB + 3*$aec530.DIM.FB + 1))),
      #endif

      DYN_ALLOC_RESIZE(Exp_Mts_adapt, 2*$aec530.DIM.FB),
      #if (uses_ASF) || !defined(RER_CNG_OFF)
         DYN_ALLOC_RESIZE(DTC_lin, $aec530.DIM.FB),
         DYN_ALLOC_RESIZE(Dt_imag, $aec530.RER_DIM.UWB),
         DYN_ALLOC_RESIZE(Et_imag, $aec530.RER_DIM.UWB),
      #endif
      #if CVC_SEND_MAJOR_CONFIG != 0
         DYN_ALLOC_RESIZE(rerdt_dtc, $aec530.DIM.FB),
         #if uses_ASF
            DYN_ALLOC_RESIZE(scratch_extra_dm2, MAX(1,CVC_MAX_SCRATCH_SIZE_DM2 - ( 4*$aec530.DIM.FB + 2*$aec530.RER_DIM.UWB))),
         #endif
      #else
         #if uses_ASF
            DYN_ALLOC_RESIZE(scratch_extra_dm2, MAX(1,CVC_MAX_SCRATCH_SIZE_DM2 - ( 3*$aec530.DIM.FB + 2*$aec530.RER_DIM.UWB))),
         #endif
      #endif
   #else
      DYN_ALLOC_RESIZE(scratch_extra_dm1, CVC_MAX_SCRATCH_SIZE_DM1),
      DYN_ALLOC_RESIZE(scratch_extra_dm2, CVC_MAX_SCRATCH_SIZE_DM2),     
   #endif
   
      DYN_ALLOC_RESIZE(bufd_outp, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW + $CVC_BASE.SWB.SAMPLES_PER_FRAME),
   #if defined(BLD_VA)
      DYN_ALLOC_RESIZE(bufd_outp_va1, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW + $CVC_BASE.SWB.SAMPLES_PER_FRAME),   
   #endif
   #if defined(BLD_SPK_VA)
      DYN_ALLOC_RESIZE(bufd_outp_va2, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW + $CVC_BASE.SWB.SAMPLES_PER_FRAME),
      DYN_ALLOC_RESIZE(bufd_outp_va3, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW + $CVC_BASE.SWB.SAMPLES_PER_FRAME),
      DYN_ALLOC_RESIZE(bufd_outp_va4, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW + $CVC_BASE.SWB.SAMPLES_PER_FRAME),   
   #endif
      DYN_ALLOC_RESIZE(bufd_l_inp, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW),
   #if CVC_DYN_NUM_MICS != 1 
      DYN_ALLOC_RESIZE(bufd_r_inp, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW),
   #endif
   #if defined(BLD_3MIC)
      DYN_ALLOC_RESIZE(bufd_mic3_inp, FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW),
   #endif
   #if uses_NC
     DYN_ALLOC_RESIZE(nc_ctrl, $CVC_BASE.SWB.NUM_FREQ_BIN),
     DYN_ALLOC_RESIZE(LRatio_interpolated, $CVC_BASE.SWB.NUM_FREQ_BIN),
   #endif

   #if uses_IN0_OMS != 0
     DYN_ALLOC_RESIZE(in0oms_G, $CVC_BASE.SWB.NUM_FREQ_BIN),
     DYN_ALLOC_RESIZE(in0oms_LpX_queue, $M.oms280.QUE_LENGTH_UWB_FB),
     DYN_ALLOC_RESIZE(in0oms_state, $CVC_BASE.SWB.OMS280.STATELENGTH),
   #endif

   #if defined(BLD_DMS_LINEAR)
     DYN_ALLOC_RESIZE(sndLpX_queue, $dms200.QUE_LENGTH_UWB_FB),
   #else
     DYN_ALLOC_RESIZE(sndLpX_queue, $dms200.pbp.QUE_LENGTH_FB),
     DYN_ALLOC_RESIZE(dms_state, $dms200.pbp.STATE_LENGTH_SWB_FB),
   #endif

     DYN_ALLOC_RESIZE(G_dmsZ, $CVC_BASE.SWB.NUM_FREQ_BIN),

   DYN_ALLOC_RESIZE(AttenuationPersist, $CVC_BASE.SWB.NUM_FREQ_BIN),
   DYN_ALLOC_RESIZE(in0oms_LpXnz, $CVC_BASE.SWB.NUM_FREQ_BIN),

   #if uses_AEC
      DYN_ALLOC_RESIZE(bufd_aec_inp,  FFT_WIN_FACTOR*$CVC_BASE.SWB.NUM_FFT_WINDOW),   
      DYN_ALLOC_RESIZE(&ref_delay_buffer, MAX_REF_DELAY_FB),
      DYN_SET_VALUE(&ref_delay_stream + $cvc_stream.frmbuffer_struct.BUFFER_SIZE_FIELD, ADDR_PER_WORD * MAX_REF_DELAY_FB),
      #if defined(BLD_AEC2)
         DYN_ALLOC_RESIZE(GaMic1_real, $aec530.DIM.FB * $M.CVC_UWB.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(GaMic1_imag, $aec530.DIM.FB * $M.CVC_UWB.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(BExp_GaMic1, $aec530.DIM.FB),
      #endif
      DYN_ALLOC_RESIZE(Ga_real, $aec530.DIM.FB * $M.CVC_UWB.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(Ga_imag, $aec530.DIM.FB * $M.CVC_UWB.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(BExp_Ga, $aec530.DIM.FB),

      DYN_ALLOC_RESIZE(RcvBuf_real, $aec530.DIM.FB * $M.CVC_UWB.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(RcvBuf_imag, $aec530.DIM.FB * $M.CVC_UWB.AEC_Num_Primary_Taps),
      DYN_ALLOC_RESIZE(BExp_X_buf, $M.CVC_UWB.AEC_Num_Primary_Taps+1),

      DYN_ALLOC_RESIZE(RatFE, $aec530.RER_DIM.UWB),
      DYN_ALLOC_RESIZE(rer_mem, $aec530.RER_DIM.UWB * $aec530.RER_VEC),

      #if defined(BLD_AEC_AUX)
         DYN_ALLOC_RESIZE(Gb_real, $aec530.RER_DIM.UWB * $M.CVC_UWB.AEC_Num_Auxillary_Taps),
         DYN_ALLOC_RESIZE(Gb_imag, $aec530.RER_DIM.UWB * $M.CVC_UWB.AEC_Num_Auxillary_Taps),
         DYN_ALLOC_RESIZE(BExp_Gb, $aec530.RER_DIM.UWB),
         DYN_ALLOC_RESIZE(L_RatSqG, $aec530.RER_DIM.UWB),
      #endif

      DYN_ALLOC_RESIZE(LPwrX0, $aec530.DIM.FB),
      DYN_ALLOC_RESIZE(LPwrX1, $aec530.DIM.FB),
      DYN_ALLOC_RESIZE(cng_mem, $CVC_BASE.SWB.NUM_FREQ_BIN + $aec530.DIM.FB),
  #endif
  #if defined(BLD_DMSS)
    DYN_ALLOC_RESIZE(PIZ0r, $CVC_BASE.SWB.NUM_FREQ_BIN),
    DYN_ALLOC_RESIZE(PIZ0i, $CVC_BASE.SWB.NUM_FREQ_BIN),
    DYN_ALLOC_RESIZE(PIZ1r, $CVC_BASE.SWB.NUM_FREQ_BIN),
    DYN_ALLOC_RESIZE(PIZ1i, $CVC_BASE.SWB.NUM_FREQ_BIN),

    DYN_ALLOC_RESIZE(POZ0r, $CVC_BASE.SWB.NUM_FREQ_BIN),
    DYN_ALLOC_RESIZE(POZ0i, $CVC_BASE.SWB.NUM_FREQ_BIN),
    DYN_ALLOC_RESIZE(POZ1r, $CVC_BASE.SWB.NUM_FREQ_BIN),
    DYN_ALLOC_RESIZE(POZ1i, $CVC_BASE.SWB.NUM_FREQ_BIN),
  #endif
   
#if uses_ASF
#if !defined(BLD_ASF200)
   DYN_ALLOC_RESIZE(x0_saved_real, $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
   DYN_ALLOC_RESIZE(x1_saved_real, $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
   DYN_ALLOC_RESIZE(z0_aux_real,   $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
   DYN_ALLOC_RESIZE(z1_aux_real,   $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
   DYN_ALLOC_RESIZE(x0_saved_imag, $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
   DYN_ALLOC_RESIZE(x1_saved_imag, $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
   DYN_ALLOC_RESIZE(z0_aux_imag,   $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
   DYN_ALLOC_RESIZE(z1_aux_imag,   $CVC_BASE.SWB.NUM_FREQ_BIN - 2),
#endif
#endif

   #if defined(BLD_FBC_IM)
      #if !defined(BLD_FBC_IM_RESAMPLER)
         DYN_SET_VALUE(fbc_im + $fbc.SAMPLING_RATE_FIELD, 48000),
         DYN_ALLOC_RESIZE(fbc_im_g, FBC_IM_MAX_G_LENGTH * 2 * 2),
      #else
         DYN_SET_VALUE(fbc_im + $fbc.SAMPLING_RATE_FIELD, 24000),
         DYN_SET_VALUE(fbc_im + $fbc.STREAM_D_FIELD, stream_im_wb),
         DYN_SET_VALUE(fbc_im + $fbc.STREAM_X_FIELD, stream_ref_wb),
      #endif
   #endif
   #if defined(BLD_OMS_IN0_IM)   
      DYN_ALLOC_RESIZE(in0oms_LpX_queue_im, $M.oms280.QUE_LENGTH_UWB_FB),
      DYN_ALLOC_RESIZE(in0oms_state_im, $CVC_BASE.SWB.OMS280.STATELENGTH),
   #endif
   #if defined(BLD_AEC_IM)
      #if (AEC_MAX_FREQ_INT==0)
         DYN_ALLOC_RESIZE(Ga_real_im, $aec530.DIM.FB * $M.CVC_UWB.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(Ga_imag_im, $aec530.DIM.FB * $M.CVC_UWB.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(BExp_Ga_im, $aec530.DIM.FB),
      #else
         DYN_ALLOC_RESIZE(Ga_real_im, ($aec530.RER_DIM.UWB+1) * $M.CVC_UWB.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(Ga_imag_im, ($aec530.RER_DIM.UWB+1) * $M.CVC_UWB.AEC_Num_Primary_Taps),
         DYN_ALLOC_RESIZE(BExp_Ga_im, ($aec530.RER_DIM.UWB+1)),
      #endif

      DYN_ALLOC_RESIZE(RatFE_im, $aec530.RER_DIM.UWB),
      DYN_ALLOC_RESIZE(rer_mem_im, $aec530.RER_DIM.UWB * $aec530.RER_VEC),

      #if defined(BLD_AEC_AUX_IM)
         DYN_ALLOC_RESIZE(Gb_real_im, $aec530.RER_DIM.UWB * $M.CVC_UWB.AEC_Num_Auxillary_Taps),
         DYN_ALLOC_RESIZE(Gb_imag_im, $aec530.RER_DIM.UWB * $M.CVC_UWB.AEC_Num_Auxillary_Taps),
         DYN_ALLOC_RESIZE(BExp_Gb_im, $aec530.RER_DIM.UWB),
         DYN_ALLOC_RESIZE(L_RatSqG_im, $aec530.RER_DIM.UWB),
      #endif
   #endif
   #if defined(BLD_NS_IM)
      DYN_ALLOC_RESIZE(sndLpX_queue_im, $dms200.pbp.QUE_LENGTH_FB),
      DYN_ALLOC_RESIZE(dms_state_im, $dms200.pbp.STATE_LENGTH_SWB_FB),
   #endif
   #if defined(BLD_SELFCLEAN)
      DYN_ALLOC_RESIZE(D_selfclean_real, $CVC_BASE.SWB.NUM_FREQ_BIN),
      DYN_ALLOC_RESIZE(D_selfclean_imag, $CVC_BASE.SWB.NUM_FREQ_BIN),
   #endif
   #if defined(BLD_EQ_MAP)
      DYN_ALLOC_RESIZE(EQ_map_ratio, $CVC_BASE.SWB.NUM_FREQ_BIN * 2),
   #endif

#endif // BLD_FB
#endif // INSTALL_OPERATOR_CVC_48K

      DYN_END();

.ENDMODULE;

