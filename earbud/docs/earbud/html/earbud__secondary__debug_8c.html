<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Earbud Application: earbud_secondary_debug.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Earbud Application
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('earbud__secondary__debug_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">earbud_secondary_debug.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Earbud Application interface for testing le_debug_secondary module.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6ba3a31c8a06ee3c6fb79f208a689b7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="earbud__secondary__debug_8c.html#a6ba3a31c8a06ee3c6fb79f208a689b7e">EarbudSecondaryDebug_Disable</a> (void)</td></tr>
<tr class="memdesc:a6ba3a31c8a06ee3c6fb79f208a689b7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable Debug Mode This function shall be invoked on both the earbuds to disable the debug mode if it was enabled already.  <a href="earbud__secondary__debug_8c.html#a6ba3a31c8a06ee3c6fb79f208a689b7e">More...</a><br /></td></tr>
<tr class="separator:a6ba3a31c8a06ee3c6fb79f208a689b7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea56e61656c6800ca064b2e5e1065cee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="earbud__secondary__debug_8c.html#aea56e61656c6800ca064b2e5e1065cee">EarbudSecondaryDebug_DisconnectOrStopAdvert</a> (void)</td></tr>
<tr class="memdesc:aea56e61656c6800ca064b2e5e1065cee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnect debug device and switch local IRK to primary while in debug mode This function shall be invoked on secondary earbud, to perform.  <a href="earbud__secondary__debug_8c.html#aea56e61656c6800ca064b2e5e1065cee">More...</a><br /></td></tr>
<tr class="separator:aea56e61656c6800ca064b2e5e1065cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a574705489c85397ffe34cf9b88767e4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="earbud__secondary__debug_8c.html#a574705489c85397ffe34cf9b88767e4f">EarbudSecondaryDebug_Enable</a> (void)</td></tr>
<tr class="memdesc:a574705489c85397ffe34cf9b88767e4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable Debug Mode.  <a href="earbud__secondary__debug_8c.html#a574705489c85397ffe34cf9b88767e4f">More...</a><br /></td></tr>
<tr class="separator:a574705489c85397ffe34cf9b88767e4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b488e076b2aa0bc7be57930a315400c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="earbud__secondary__debug_8c.html#a8b488e076b2aa0bc7be57930a315400c">EarbudSecondaryDebug_HandleTwsTopologyRoleChange</a> (tws_topology_role new_role, tws_topology_role old_role)</td></tr>
<tr class="memdesc:a8b488e076b2aa0bc7be57930a315400c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle #TWS_TOPOLOGY_ROLE_CHANGED_IND This function handles TWS Topology Role transition and shall take respective actions like updating local IRK, Start/Stop Debug advertisement and Handle debug connection on secondary earbud.  <a href="earbud__secondary__debug_8c.html#a8b488e076b2aa0bc7be57930a315400c">More...</a><br /></td></tr>
<tr class="separator:a8b488e076b2aa0bc7be57930a315400c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a869ac9a374955a680e485139e6f9c817"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="earbud__secondary__debug_8c.html#a869ac9a374955a680e485139e6f9c817">EarbudSecondaryDebug_HandleUpdateIrkCfm</a> (LE_DEBUG_SECONDARY_UPDATE_IRK_CFM_T *message)</td></tr>
<tr class="memdesc:a869ac9a374955a680e485139e6f9c817"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle Update IRK Confirm.  <a href="earbud__secondary__debug_8c.html#a869ac9a374955a680e485139e6f9c817">More...</a><br /></td></tr>
<tr class="separator:a869ac9a374955a680e485139e6f9c817"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Earbud Application interface for testing le_debug_secondary module. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2023 Qualcomm Technologies International, Ltd. All Rights Reserved. Qualcomm Technologies International, Ltd. Confidential and Proprietary. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6ba3a31c8a06ee3c6fb79f208a689b7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ba3a31c8a06ee3c6fb79f208a689b7e">&#9670;&nbsp;</a></span>EarbudSecondaryDebug_Disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EarbudSecondaryDebug_Disable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable Debug Mode This function shall be invoked on both the earbuds to disable the debug mode if it was enabled already. </p>
<dl class="section note"><dt>Note</dt><dd>This functionality shall be used only for development purpose and shall NOT be invoked on an end product. </dd></dl>

</div>
</div>
<a id="aea56e61656c6800ca064b2e5e1065cee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea56e61656c6800ca064b2e5e1065cee">&#9670;&nbsp;</a></span>EarbudSecondaryDebug_DisconnectOrStopAdvert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EarbudSecondaryDebug_DisconnectOrStopAdvert </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnect debug device and switch local IRK to primary while in debug mode This function shall be invoked on secondary earbud, to perform. </p>
<ul>
<li>Disconnect debug BLE link if connected.</li>
<li>Restore the local IRK to default primary IRK (if modified)</li>
<li>Stop debug advertisements on secondary earbud.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>This functionality shall be used only for development purpose and shall NOT be invoked on an end product. </dd></dl>

</div>
</div>
<a id="a574705489c85397ffe34cf9b88767e4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a574705489c85397ffe34cf9b88767e4f">&#9670;&nbsp;</a></span>EarbudSecondaryDebug_Enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EarbudSecondaryDebug_Enable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable Debug Mode. </p>
<p>This function shall be invoked on both the earbuds, so that it could start debug advertisements and accept BLE connection from Debug central device automatically on role update (to Secondary) On invocation of this function Following actions are taken based on #tws_topology_role.</p><ul>
<li>tws_topology_role_none (PFR not started yet): just remembers that the debug mode is enabled.</li>
<li>tws_topology_role_primary :just remembers that the debug mode is enabled.</li>
<li>tws_topology_role_secondary (And if Peer is connected): Update the local IRK with modified root keys and start advertisement on confirmation (#LE_DEBUG_SECONDARY_UPDATE_IRK_CFM)</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>This functionality shall be used only for development purpose and shall NOT be invoked on an end product. </dd></dl>

</div>
</div>
<a id="a8b488e076b2aa0bc7be57930a315400c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b488e076b2aa0bc7be57930a315400c">&#9670;&nbsp;</a></span>EarbudSecondaryDebug_HandleTwsTopologyRoleChange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EarbudSecondaryDebug_HandleTwsTopologyRoleChange </td>
          <td>(</td>
          <td class="paramtype">tws_topology_role&#160;</td>
          <td class="paramname"><em>new_role</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tws_topology_role&#160;</td>
          <td class="paramname"><em>old_role</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle #TWS_TOPOLOGY_ROLE_CHANGED_IND This function handles TWS Topology Role transition and shall take respective actions like updating local IRK, Start/Stop Debug advertisement and Handle debug connection on secondary earbud. </p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">old_role  </th><th class="markdownTableHeadLeft">new_role  </th><th class="markdownTableHeadLeft">Action   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">tws_topology_role_primary  </td><td class="markdownTableBodyLeft">tws_topology_role_none  </td><td class="markdownTableBodyLeft">NA   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">tws_topology_role_secondary  </td><td class="markdownTableBodyLeft">tws_topology_role_none  </td><td class="markdownTableBodyLeft">Disconnect Link, Stop adverts,<br  />
 Restore primary IRK   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">tws_topology_role_none  </td><td class="markdownTableBodyLeft">tws_topology_role_none  </td><td class="markdownTableBodyLeft">NA   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">tws_topology_role_secondary  </td><td class="markdownTableBodyLeft">tws_topology_role_primary  </td><td class="markdownTableBodyLeft">Disconnect Link, Stop adverts,<br  />
 Restore primary IRK   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">tws_topology_role_primary  </td><td class="markdownTableBodyLeft">tws_topology_role_primary  </td><td class="markdownTableBodyLeft">NA   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">tws_topology_role_none  </td><td class="markdownTableBodyLeft">tws_topology_role_primary  </td><td class="markdownTableBodyLeft">NA   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">tws_topology_role_none  </td><td class="markdownTableBodyLeft">tws_topology_role_secondary  </td><td class="markdownTableBodyLeft">Update local IRK, Start debug adverts   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">tws_topology_role_primary  </td><td class="markdownTableBodyLeft">tws_topology_role_secondary  </td><td class="markdownTableBodyLeft">Update local IRK, Start debug adverts   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">tws_topology_role_secondary  </td><td class="markdownTableBodyLeft">tws_topology_role_secondary  </td><td class="markdownTableBodyLeft">Update local IRK, Start debug adverts   </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_role</td><td>#tws_topology_role to which TWS topology role has transitioned to! </td></tr>
    <tr><td class="paramname">old_role</td><td>#tws_topology_role from which the TWS topology has transitioned to current role. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This functionality shall be used only for development purpose and shall NOT be invoked on an end product. </dd></dl>

</div>
</div>
<a id="a869ac9a374955a680e485139e6f9c817"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a869ac9a374955a680e485139e6f9c817">&#9670;&nbsp;</a></span>EarbudSecondaryDebug_HandleUpdateIrkCfm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EarbudSecondaryDebug_HandleUpdateIrkCfm </td>
          <td>(</td>
          <td class="paramtype">LE_DEBUG_SECONDARY_UPDATE_IRK_CFM_T *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle Update IRK Confirm. </p>
<dl class="section note"><dt>Note</dt><dd>This functionality shall be used only for development purpose and shall NOT be invoked on an end product. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="earbud__secondary__debug_8c.html">earbud_secondary_debug.c</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
