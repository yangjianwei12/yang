<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Earbud Application: earbud_spatial_audio.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Earbud Application
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('earbud__spatial__audio_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">earbud_spatial_audio.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides Spatial (3D) audio support.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a59a5673fbdda649bb54e015f11f35df5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="earbud__spatial__audio_8c.html#a59a5673fbdda649bb54e015f11f35df5">spatial_audio_internal_messages_t</a> { <a class="el" href="earbud__spatial__audio_8c.html#a59a5673fbdda649bb54e015f11f35df5aff74e4ad564ceefde5d74fb41a44a5de">SPATIAL_AUDIO_RESET_ATTITUDE_FILTER_TIMEOUT</a>
 }</td></tr>
<tr class="separator:a59a5673fbdda649bb54e015f11f35df5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4e0fd2e58eb04d68873d4d7503f7f750"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="earbud__spatial__audio_8c.html#a4e0fd2e58eb04d68873d4d7503f7f750">EarbudSpatialAudio_Disable</a> (void)</td></tr>
<tr class="memdesc:a4e0fd2e58eb04d68873d4d7503f7f750"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable spatial audio processing.  <a href="earbud__spatial__audio_8c.html#a4e0fd2e58eb04d68873d4d7503f7f750">More...</a><br /></td></tr>
<tr class="separator:a4e0fd2e58eb04d68873d4d7503f7f750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad002729cf005e59c7a75ec444c2a5698"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="earbud__spatial__audio_8c.html#ad002729cf005e59c7a75ec444c2a5698">EarbudSpatialAudio_Enable</a> (uint16 sensor_sample_rate_hz, spatial_data_report_id_t report_id)</td></tr>
<tr class="memdesc:ad002729cf005e59c7a75ec444c2a5698"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable spatial audio processing.  <a href="earbud__spatial__audio_8c.html#ad002729cf005e59c7a75ec444c2a5698">More...</a><br /></td></tr>
<tr class="separator:ad002729cf005e59c7a75ec444c2a5698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae99db8ac6285211c07c3b4ed27010e4c"><td class="memItemLeft" align="right" valign="top">SPATIAL_DATA_REPORT_DATA_IND_T *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="earbud__spatial__audio_8c.html#ae99db8ac6285211c07c3b4ed27010e4c">EarbudSpatialAudio_GetLatestReport</a> (void)</td></tr>
<tr class="memdesc:ae99db8ac6285211c07c3b4ed27010e4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the latest report generated.  <a href="earbud__spatial__audio_8c.html#ae99db8ac6285211c07c3b4ed27010e4c">More...</a><br /></td></tr>
<tr class="separator:ae99db8ac6285211c07c3b4ed27010e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab51c488c902efdbb168c45b3866da0f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="earbud__spatial__audio_8c.html#aab51c488c902efdbb168c45b3866da0f">EarbudSpatialAudio_Init</a> (Task task)</td></tr>
<tr class="memdesc:aab51c488c902efdbb168c45b3866da0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise spatial audio functionality.  <a href="earbud__spatial__audio_8c.html#aab51c488c902efdbb168c45b3866da0f">More...</a><br /></td></tr>
<tr class="separator:aab51c488c902efdbb168c45b3866da0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99c21f5239c7e01883d5b56d61479ce6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="earbud__spatial__audio_8c.html#a99c21f5239c7e01883d5b56d61479ce6">EarbudSpatialAudio_SendSynchronisedData</a> (<a class="el" href="earbud__spatial__audio_8h.html#acd594ad4c57c35254bec9782ff1e3796">earbud_spatial_audio_sync_data_command_t</a> command, uint16 data_len, const uint8 *data)</td></tr>
<tr class="memdesc:a99c21f5239c7e01883d5b56d61479ce6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send synchronised data during spatial audio.  <a href="earbud__spatial__audio_8c.html#a99c21f5239c7e01883d5b56d61479ce6">More...</a><br /></td></tr>
<tr class="separator:a99c21f5239c7e01883d5b56d61479ce6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides Spatial (3D) audio support. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2021 Qualcomm Technologies International, Ltd. All Rights Reserved. Qualcomm Technologies International, Ltd. Confidential and Proprietary. </dd></dl>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a59a5673fbdda649bb54e015f11f35df5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59a5673fbdda649bb54e015f11f35df5">&#9670;&nbsp;</a></span>spatial_audio_internal_messages_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="earbud__spatial__audio_8c.html#a59a5673fbdda649bb54e015f11f35df5">spatial_audio_internal_messages_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Spatial audio internal messages handled along with spatial data messages. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a59a5673fbdda649bb54e015f11f35df5aff74e4ad564ceefde5d74fb41a44a5de"></a>SPATIAL_AUDIO_RESET_ATTITUDE_FILTER_TIMEOUT&#160;</td><td class="fielddoc"><p>Spatial audio reset of spatial data </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4e0fd2e58eb04d68873d4d7503f7f750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e0fd2e58eb04d68873d4d7503f7f750">&#9670;&nbsp;</a></span>EarbudSpatialAudio_Disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool EarbudSpatialAudio_Disable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable spatial audio processing. </p>
<p>Only the primary earbud shall disable spatial audio.</p>
<p>Once the feature is disabled in the primary, it shall disable the feature in secondary by sending a control message over the BT sensor profile in the buddy link.</p>
<p>NOTE: currently this interface is only for demonstrating head tracking as we don't have the complete spatial audio application!</p>
<dl class="section return"><dt>Returns</dt><dd>TRUE if enable is initiated successfully, else returns FALSE. </dd></dl>

</div>
</div>
<a id="ad002729cf005e59c7a75ec444c2a5698"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad002729cf005e59c7a75ec444c2a5698">&#9670;&nbsp;</a></span>EarbudSpatialAudio_Enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool EarbudSpatialAudio_Enable </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>sensor_sample_rate_hz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spatial_data_report_id_t&#160;</td>
          <td class="paramname"><em>data_report</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable spatial audio processing. </p>
<p>Only the primary earbud will enable spatial audio.</p>
<p>Once the feature is enabled in the primary, it will enable the feature in secondary by sending control message over the BT sensor profile in the buddy link.</p>
<p>NOTE: currently this interface is only for demonstrating head tracking as we don't have the complete spatial audio application!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensor_sample_rate_hz</td><td>- Sensor sample rate in Hz </td></tr>
    <tr><td class="paramname">data_report</td><td>- Requested data report</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if enable is initiated successfully, else returns FALSE. </dd></dl>

</div>
</div>
<a id="ae99db8ac6285211c07c3b4ed27010e4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae99db8ac6285211c07c3b4ed27010e4c">&#9670;&nbsp;</a></span>EarbudSpatialAudio_GetLatestReport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPATIAL_DATA_REPORT_DATA_IND_T* EarbudSpatialAudio_GetLatestReport </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the latest report generated. </p>
<p>Used by external applications to fetch the latest report.</p>
<dl class="section return"><dt>Returns</dt><dd>SPATIAL_DATA_REPORT_DATA_IND_T. </dd></dl>

</div>
</div>
<a id="aab51c488c902efdbb168c45b3866da0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab51c488c902efdbb168c45b3866da0f">&#9670;&nbsp;</a></span>EarbudSpatialAudio_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool EarbudSpatialAudio_Init </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise spatial audio functionality. </p>
<p>NOTE: currently this interface is only for demonstrating head tracking as we don't have the complete spatial audio application!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The init task</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if feature initialisation was successful, otherwise FALSE. </dd></dl>

</div>
</div>
<a id="a99c21f5239c7e01883d5b56d61479ce6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99c21f5239c7e01883d5b56d61479ce6">&#9670;&nbsp;</a></span>EarbudSpatialAudio_SendSynchronisedData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool EarbudSpatialAudio_SendSynchronisedData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="earbud__spatial__audio_8h.html#acd594ad4c57c35254bec9782ff1e3796">earbud_spatial_audio_sync_data_command_t</a>&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>data_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8 *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send synchronised data during spatial audio. </p>
<p>This is required to perform synchronised activities in both the earbuds during spatial audio.</p>
<p>The synchrnoised activity can be triggered in both primary and secondary earbuds.</p>
<p>The activity to perform is passed in the input command parameter. The data to be used while performing the synchronised activity is passed in the input data parameter.</p>
<p>The input data will be send along with the orientation data combined into one ACL packet (fitting in one BT slot) in the next BT sniff subrate instance in the buddy link.</p>
<p>NOTE: currently this interface is only for demonstrating head tracking as we don't have the complete spatial audio application!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>Synchronised data command </td></tr>
    <tr><td class="paramname">data_len</td><td>Data lenth </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to the data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return TRUE if the data is queued for sending, else returns FALSE. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="earbud__spatial__audio_8c.html">earbud_spatial_audio.c</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
